(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("mrSG"),o=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,s=n("q/0M"),a=n("zVF4"),u=n("S+S0"),c=n("x7I3"),h=o.SDK_VERSION,p=function(){function t(t){this.uid=t}return t.prototype.t=function(){return null!=this.uid},t.prototype.s=function(){return this.t()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();p.UNAUTHENTICATED=new p(null),p.i=new p("google-credentials-uid"),p.h=new p("first-party-uid");var l={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},f=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return i.__extends(e,t),e}(Error),d=function(t,e){this.user=e,this.type="OAuth",this.o={},this.o.Authorization="Bearer "+t},g=function(){function t(){this.u=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype._=function(){},t.prototype.l=function(t){this.u=t,t(p.UNAUTHENTICATED)},t.prototype.T=function(){this.u=null},t}(),b=function(){function t(t){var e=this;this.I=null,this.currentUser=p.UNAUTHENTICATED,this.R=!1,this.A=0,this.u=null,this.forceRefresh=!1,this.I=function(){e.A++,e.currentUser=e.m(),e.R=!0,e.u&&e.u(e.currentUser)},this.A=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.I):(this.I(null),t.get().then((function(t){e.auth=t,e.I&&e.auth.addAuthTokenListener(e.I)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.A,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.A!==e?(ge("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ve("string"==typeof n.accessToken),new d(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype._=function(){this.forceRefresh=!0},t.prototype.l=function(t){this.u=t,this.R&&t(this.currentUser)},t.prototype.T=function(){this.auth&&this.auth.removeAuthTokenListener(this.I),this.I=null,this.u=null},t.prototype.m=function(){var t=this.auth&&this.auth.getUid();return ve(null===t||"string"==typeof t),new p(t)},t}(),m=function(){function t(t,e){this.P=t,this.V=e,this.type="FirstParty",this.user=p.h}return Object.defineProperty(t.prototype,"o",{get:function(){var t={"X-Goog-AuthUser":this.V},e=this.P.auth.g([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),y=function(){function t(t,e){this.P=t,this.V=e}return t.prototype.getToken=function(){return Promise.resolve(new m(this.P,this.V))},t.prototype.l=function(t){t(p.h)},t.prototype.T=function(){},t.prototype._=function(){},t}(),v=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new f(l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new f(l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new f(l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new f(l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.p=function(t){return this.seconds===t.seconds?we(this.nanoseconds,t.nanoseconds):we(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),x=function(){function t(t){this.timestamp=t}return t.v=function(e){return new t(e)},t.min=function(){return new t(new v(0,0))},t.prototype.S=function(t){return this.timestamp.p(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.D=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.C=function(){return this.timestamp},t}(),_=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ye(),void 0===n?n=t.length-e:n>t.length-e&&ye(),this.segments=t,this.offset=e,this.F=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.F},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.N(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.k(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.M=function(t){return this.k(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.$=function(){return this.k(this.segments,this.offset,this.length-1)},t.prototype.O=function(){return this.segments[this.offset]},t.prototype.L=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.B=function(){return 0===this.length},t.prototype.q=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.U=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.W=function(){return this.segments.slice(this.offset,this.limit())},t.N=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.k=function(t,n,r){return new e(t,n,r)},e.prototype.j=function(){return this.W().join("/")},e.prototype.toString=function(){return this.j()},e.K=function(t){if(t.indexOf("//")>=0)throw new f(l.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e}(_);w.G=new w([]);var O=/^[_a-zA-Z][_a-zA-Z0-9]*$/,P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.k=function(t,n,r){return new e(t,n,r)},e.H=function(t){return O.test(t)},e.prototype.j=function(){return this.W().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.H(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.j()},e.prototype.Y=function(){return 1===this.length&&"__name__"===this.get(0)},e.J=function(){return new e(["__name__"])},e.X=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new f(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new f(l.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new f(l.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new f(l.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e}(_);P.G=new P([]);var E=function(){function t(t){this.path=t}return t.Z=function(e){return new t(w.K(e).M(5))},t.prototype.tt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===w.N(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.N=function(t,e){return w.N(t.path,e.path)},t.et=function(t){return t.length%2==0},t.st=function(e){return new t(new w(e.slice()))},t}();function C(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function M(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function T(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}E.EMPTY=new E(new w([]));var I=function(){function t(t){this.it=t}return t.fromBase64String=function(e){return new t(le.nt().atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return le.nt().btoa(this.it)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.it)},t.prototype.rt=function(){return 2*this.it.length},t.prototype.S=function(t){return we(this.it,t.it)},t.prototype.isEqual=function(t){return this.it===t.it},t}();function N(t){return null==t}function A(t){return-0===t&&1/t==-1/0}function S(t){return"number"==typeof t&&Number.isInteger(t)&&!A(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function k(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function D(t){var e=z(t.mapValue.fields.__local_write_time__.timestampValue);return new v(e.seconds,e.nanos)}I.ht=new I("");var R=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function L(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?k(t)?4:10:ye()}function V(t,e){var n=L(t);if(n!==L(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return D(t).isEqual(D(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=z(t.timestampValue),r=z(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return G(t.bytesValue).isEqual(G(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return B(t.geoPointValue.latitude)===B(e.geoPointValue.latitude)&&B(t.geoPointValue.longitude)===B(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return B(t.integerValue)===B(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=B(t.doubleValue),r=B(e.doubleValue);return n===r?A(n)===A(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Oe(t.arrayValue.values||[],e.arrayValue.values||[],V);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(C(n)!==C(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!V(n[i],r[i])))return!1;return!0}(t,e);default:return ye()}}function q(t,e){return void 0!==(t.values||[]).find((function(t){return V(t,e)}))}function j(t,e){var n=L(t),r=L(e);if(n!==r)return we(n,r);switch(n){case 0:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=B(t.integerValue||t.doubleValue),r=B(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return U(t.timestampValue,e.timestampValue);case 4:return U(D(t),D(e));case 5:return we(t.stringValue,e.stringValue);case 6:return function(t,e){var n=G(t),r=G(e);return n.S(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=we(n[i],r[i]);if(0!==o)return o}return we(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=we(B(t.latitude),B(e.latitude));return 0!==n?n:we(B(t.longitude),B(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=j(n[i],r[i]);if(o)return o}return we(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=we(r[s],o[s]);if(0!==a)return a;var u=j(n[r[s]],i[o[s]]);if(0!==u)return u}return we(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ye()}}function U(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return we(t,e);var n=z(t),r=z(e),i=we(n.seconds,r.seconds);return 0!==i?i:we(n.nanos,r.nanos)}function F(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=z(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?G(e.bytesValue).toBase64():"referenceValue"in e?E.Z(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):ye();var n}(t)}function z(t){if(ve(!!t),"string"==typeof t){var e=0,n=R.exec(t);if(ve(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:B(t.seconds),nanos:B(t.nanos)}}function B(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function G(t){return"string"==typeof t?I.fromBase64String(t):I.fromUint8Array(t)}function W(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.j()}}function K(t){return!!t&&"integerValue"in t}function X(t){return!!t&&"arrayValue"in t}function Q(t){return!!t&&"nullValue"in t}function $(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function J(t){return!!t&&"mapValue"in t}var Y=function(){function t(){}return t.prototype.ot=function(t,e){return function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(e,t)},t.prototype.at=function(t,e){return e},t.prototype.ut=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t}();Y.instance=new Y;var H=function(){function t(t){this.elements=t}return t.prototype.ot=function(t,e){return this.apply(t)},t.prototype.at=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=et(t),n=function(t){e.some((function(e){return V(e,t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.ut=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Oe(this.elements,e.elements,V)},t}(),Z=function(){function t(t){this.elements=t}return t.prototype.ot=function(t,e){return this.apply(t)},t.prototype.at=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=et(t),n=function(t){e=e.filter((function(e){return!V(e,t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.ut=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Oe(this.elements,e.elements,V)},t}(),tt=function(){function t(t,e){this.serializer=t,this.ct=e}return t.prototype.ot=function(t,e){var n=this.ut(t),r=this.asNumber(n)+this.asNumber(this.ct);return K(n)&&K(this.ct)?this.serializer._t(r):this.serializer.lt(r)},t.prototype.at=function(t,e){return e},t.prototype.ut=function(t){return K(e=t)||function(t){return!!t&&"doubleValue"in t}(e)?t:{integerValue:0};var e},t.prototype.isEqual=function(e){return e instanceof t&&V(this.ct,e.ct)},t.prototype.asNumber=function(t){return B(t.integerValue||t.doubleValue)},t}();function et(t){return X(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var nt=function(){function t(t){this.fields=t,t.sort(P.N)}return t.prototype.dt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].q(t))return!0;return!1},t.prototype.isEqual=function(t){return Oe(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),rt=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),it=function(t,e){this.version=t,this.transformResults=e},ot=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ft=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Tt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.Et=function(t){return void 0!==this.updateTime?t instanceof yt&&t.version.isEqual(this.updateTime):void 0===this.exists||this.exists===t instanceof yt},t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}(),st=function(){function t(){}return t.prototype.It=function(t){},t.wt=function(t){return t instanceof yt?t.version:x.min()},t}(),at=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Rt=r,i.type=0,i}return i.__extends(e,t),e.prototype.at=function(t,e){return this.It(t),new yt(this.key,e.version,this.value,{hasCommittedMutations:!0})},e.prototype.ot=function(t,e,n){if(this.It(t),!this.Rt.Et(t))return t;var r=st.wt(t);return new yt(this.key,r,this.value,{At:!0})},e.prototype.Pt=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.Rt.isEqual(t.Rt)},e}(st),ut=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Vt=r,o.Rt=i,o.type=1,o}return i.__extends(e,t),e.prototype.at=function(t,e){if(this.It(t),!this.Rt.Et(t))return new xt(this.key,e.version);var n=this.gt(t);return new yt(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.ot=function(t,e,n){if(this.It(t),!this.Rt.Et(t))return t;var r=st.wt(t),i=this.gt(t);return new yt(this.key,r,i,{At:!0})},e.prototype.Pt=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Vt.isEqual(t.Vt)&&this.Rt.isEqual(t.Rt)},e.prototype.gt=function(t){var e;return e=t instanceof yt?t.data():lt.empty(),this.pt(e)},e.prototype.pt=function(t){var e=this,n=new ft(t);return this.Vt.fields.forEach((function(t){if(!t.B()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.yt()},e}(st),ct=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Rt=ot.exists(!0),r}return i.__extends(e,t),e.prototype.at=function(t,e){if(this.It(t),ve(null!=e.transformResults),!this.Rt.Et(t))return new xt(this.key,e.version);var n=this.bt(t),r=this.vt(t,e.transformResults),i=e.version,o=this.St(n.data(),r);return new yt(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.ot=function(t,e,n){if(this.It(t),!this.Rt.Et(t))return t;var r=this.bt(t),i=this.Dt(n,t,e),o=this.St(r.data(),i);return new yt(this.key,r.version,o,{At:!0})},e.prototype.Pt=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof yt?t.field(i.field):void 0,s=i.transform.ut(o||null);null!=s&&(e=null==e?(new ft).set(i.field,s):e.set(i.field,s))}return e?e.yt():null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&Oe(this.fieldTransforms,t.fieldTransforms,(function(t,e){return t.isEqual(e)}))&&this.Rt.isEqual(t.Rt)},e.prototype.bt=function(t){return t},e.prototype.vt=function(t,e){var n=[];ve(this.fieldTransforms.length===e.length);for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof yt&&(s=t.field(i.field)),n.push(o.at(s,e[r]))}return n},e.prototype.Dt=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof yt&&(u=e.field(s.field)),null===u&&n instanceof yt&&(u=n.field(s.field)),r.push(a.ot(u,t))}return r},e.prototype.St=function(t,e){for(var n=new ft(t),r=0;r<this.fieldTransforms.length;r++)n.set(this.fieldTransforms[r].field,e[r]);return n.yt()},e}(st),ht=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Rt=n,r.type=3,r}return i.__extends(e,t),e.prototype.at=function(t,e){return this.It(t),new vt(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.ot=function(t,e,n){return this.It(t),this.Rt.Et(t)?new vt(this.key,x.min()):t},e.prototype.Pt=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Rt.isEqual(t.Rt)},e}(st),pt=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Rt=n,r.type=4,r}return i.__extends(e,t),e.prototype.at=function(t,e){ye()},e.prototype.ot=function(t,e,n){ye()},e.prototype.Pt=function(t){ye()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Rt.isEqual(t.Rt)},e}(st),lt=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.B())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!J(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.L()])||null},t.prototype.isEqual=function(t){return V(this.proto,t.proto)},t}(),ft=function(){function t(t){void 0===t&&(t=lt.empty()),this.Ct=t,this.Ft=new Map}return t.prototype.set=function(t,e){return this.Nt(t,e),this},t.prototype.delete=function(t){return this.Nt(t,null),this},t.prototype.Nt=function(t,e){for(var n=this.Ft,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===L(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.L(),e)},t.prototype.yt=function(){var t=this.kt(P.G,this.Ft);return null!=t?new lt(t):this.Ct},t.prototype.kt=function(t,e){var n=this,r=!1,i=this.Ct.field(t),o=J(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.kt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function dt(t){var e=[];return M(t.fields||{},(function(t,n){var r=new P([t]);if(J(n)){var i=dt(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new nt(e)}var gt,bt,mt=function(t,e){this.key=t,this.version=e},yt=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Mt=r,o.At=!!i.At,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return i.__extends(e,t),e.prototype.field=function(t){return this.Mt.field(t)},e.prototype.data=function(){return this.Mt},e.prototype.xt=function(){return this.Mt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.At===t.At&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Mt.isEqual(t.Mt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Mt.toString()+", {hasLocalMutations: "+this.At+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.At||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e}(mt),vt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return i.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(mt),xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(mt),_t=function(){function t(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.$t=null}return t.prototype.canonicalId=function(){if(null===this.$t){var t=this.path.j();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:",t+=this.filters.map((function(t){return t.canonicalId()})).join(","),t+="|ob:",t+=this.orderBy.map((function(t){return t.canonicalId()})).join(","),N(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.$t=t}return this.$t},t.prototype.toString=function(){var t=this.path.j();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),N(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(var n=0;n<this.filters.length;n++)if(!this.filters[n].isEqual(t.filters[n]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!!(null!==this.startAt?this.startAt.isEqual(t.startAt):null===t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.Ot=function(){return E.et(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}(),wt=function(){function t(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Lt=n,this.filters=r,this.limit=i,this.Bt=o,this.startAt=s,this.endAt=a,this.qt=null,this.Ut=null,this.startAt&&this.Qt(this.startAt),this.endAt&&this.Qt(this.endAt)}return t.Wt=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.qt){this.qt=[];var t=this.jt(),e=this.Kt();if(null!==t&&null===e)t.Y()||this.qt.push(new Nt(t)),this.qt.push(new Nt(P.J(),"asc"));else{for(var n=!1,r=0,i=this.Lt;r<i.length;r++){var o=i[r];this.qt.push(o),o.field.Y()&&(n=!0)}if(!n){var s=this.Lt.length>0?this.Lt[this.Lt.length-1].dir:"asc";this.qt.push(new Nt(P.J(),s))}}}return this.qt},enumerable:!0,configurable:!0}),t.prototype.Gt=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.Lt.slice(),n,this.limit,this.Bt,this.startAt,this.endAt)},t.prototype.zt=function(e){var n=this.Lt.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.Bt,this.startAt,this.endAt)},t.prototype.Ht=function(e){return new t(this.path,this.collectionGroup,this.Lt.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.Yt=function(e){return new t(this.path,this.collectionGroup,this.Lt.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.Jt=function(e){return new t(this.path,this.collectionGroup,this.Lt.slice(),this.filters.slice(),this.limit,this.Bt,e,this.endAt)},t.prototype.Xt=function(e){return new t(this.path,this.collectionGroup,this.Lt.slice(),this.filters.slice(),this.limit,this.Bt,this.startAt,e)},t.prototype.Zt=function(e){return new t(e,null,this.Lt.slice(),this.filters.slice(),this.limit,this.Bt,this.startAt,this.endAt)},t.prototype.te=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.Lt.length||1===this.Lt.length&&this.Lt[0].field.Y())},t.prototype.canonicalId=function(){return this.ee().canonicalId()+"|lt:"+this.Bt},t.prototype.toString=function(){return"Query(target="+this.ee().toString()+"; limitType="+this.Bt+")"},t.prototype.isEqual=function(t){return this.ee().isEqual(t.ee())&&this.Bt===t.Bt},t.prototype.se=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.Y()}return 0},t.prototype.matches=function(t){return this.ie(t)&&this.ne(t)&&this.re(t)&&this.he(t)},t.prototype.oe=function(){return!N(this.limit)&&"F"===this.Bt},t.prototype.ae=function(){return!N(this.limit)&&"L"===this.Bt},t.prototype.Kt=function(){return this.Lt.length>0?this.Lt[0].field:null},t.prototype.jt=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Ot&&n.ue())return n.field}return null},t.prototype.ce=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Ot&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Ot=function(){return this.ee().Ot()},t.prototype._e=function(){return null!==this.collectionGroup},t.prototype.ee=function(){if(!this.Ut)if("F"===this.Bt)this.Ut=new _t(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e];t.push(new Nt(r.field,"desc"===r.dir?"asc":"desc"))}var i=this.endAt?new It(this.endAt.position,!this.endAt.before):null,o=this.startAt?new It(this.startAt.position,!this.startAt.before):null;this.Ut=new _t(this.path,this.collectionGroup,t,this.filters,this.limit,i,o)}return this.Ut},t.prototype.ie=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.tt(this.collectionGroup)&&this.path.q(e):E.et(this.path)?this.path.isEqual(e):this.path.U(e)},t.prototype.ne=function(t){for(var e=0,n=this.Lt;e<n.length;e++){var r=n[e];if(!r.field.Y()&&null===t.field(r.field))return!1}return!0},t.prototype.re=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.he=function(t){return!(this.startAt&&!this.startAt.le(this.orderBy,t)||this.endAt&&this.endAt.le(this.orderBy,t))},t.prototype.Qt=function(t){},t}(),Ot=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return i.__extends(e,t),e.create=function(t,n,r){if(t.Y())return"in"===n?new Et(t,r):new Pt(t,n,r);if(Q(r)){if("=="!==n)throw new f(l.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if($(r)){if("=="!==n)throw new f(l.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return"array-contains"===n?new Ct(t,r):"in"===n?new Mt(t,r):"array-contains-any"===n?new Tt(t,r):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&L(this.value)===L(e)&&this.de(j(e,this.value))},e.prototype.de=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return t>0;case">=":return t>=0;default:return ye()}},e.prototype.ue=function(){return["<","<=",">",">="].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.j()+this.op.toString()+F(this.value)},e.prototype.isEqual=function(t){return t instanceof e&&this.op===t.op&&this.field.isEqual(t.field)&&V(this.value,t.value)},e.prototype.toString=function(){return this.field.j()+" "+this.op+" "+F(this.value)},e}((function(){})),Pt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=E.Z(r.referenceValue),i}return i.__extends(e,t),e.prototype.matches=function(t){var e=E.N(t.key,this.key);return this.de(e)},e}(Ot),Et=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=(n.arrayValue.values||[]).map((function(t){return E.Z(t.referenceValue)})),r}return i.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ot),Ct=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return X(e)&&q(e.arrayValue,this.value)},e}(Ot),Mt=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&q(this.value.arrayValue,e)},e}(Ot),Tt=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!X(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return q(e.value.arrayValue,t)}))},e}(Ot),It=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){return(this.before?"b":"a")+":"+this.position.map((function(t){return F(t)})).join(",")},t.prototype.le=function(t,e){for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(n=i.field.Y()?E.N(E.Z(o.referenceValue),e.key):j(o,e.field(i.field)),"desc"===i.dir&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!V(this.position[e],t.position[e]))return!1;return!0},t}(),Nt=function(){function t(t,e){this.field=t,void 0===e&&(e="asc"),this.dir=e,this.fe=t.Y()}return t.prototype.compare=function(t,e){var n=this.fe?E.N(t.key,e.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?j(r,i):ye()}(this.field,t,e);switch(this.dir){case"asc":return n;case"desc":return-1*n;default:return ye()}},t.prototype.canonicalId=function(){return this.field.j()+this.dir.toString()},t.prototype.toString=function(){return this.field.j()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),At=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=x.min()),void 0===o&&(o=x.min()),void 0===s&&(s=I.ht),this.target=t,this.targetId=e,this.Te=n,this.sequenceNumber=r,this.Ee=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Ie=function(e){return new t(this.target,this.targetId,this.Te,e,this.Ee,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.we=function(e,n){return new t(this.target,this.targetId,this.Te,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Re=function(e){return new t(this.target,this.targetId,this.Te,this.sequenceNumber,this.Ee,e,this.resumeToken)},t}(),St=function(t){this.count=t};function kt(t){switch(t){case l.OK:return ye();case l.CANCELLED:case l.UNKNOWN:case l.DEADLINE_EXCEEDED:case l.RESOURCE_EXHAUSTED:case l.INTERNAL:case l.UNAVAILABLE:case l.UNAUTHENTICATED:return!1;case l.INVALID_ARGUMENT:case l.NOT_FOUND:case l.ALREADY_EXISTS:case l.PERMISSION_DENIED:case l.FAILED_PRECONDITION:case l.ABORTED:case l.OUT_OF_RANGE:case l.UNIMPLEMENTED:case l.DATA_LOSS:return!0;default:return ye()}}function Dt(t){if(void 0===t)return be("GRPC error has no .code"),l.UNKNOWN;switch(t){case gt.OK:return l.OK;case gt.CANCELLED:return l.CANCELLED;case gt.UNKNOWN:return l.UNKNOWN;case gt.DEADLINE_EXCEEDED:return l.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return l.RESOURCE_EXHAUSTED;case gt.INTERNAL:return l.INTERNAL;case gt.UNAVAILABLE:return l.UNAVAILABLE;case gt.UNAUTHENTICATED:return l.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return l.INVALID_ARGUMENT;case gt.NOT_FOUND:return l.NOT_FOUND;case gt.ALREADY_EXISTS:return l.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return l.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return l.FAILED_PRECONDITION;case gt.ABORTED:return l.ABORTED;case gt.OUT_OF_RANGE:return l.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return l.UNIMPLEMENTED;case gt.DATA_LOSS:return l.DATA_LOSS;default:return ye()}}(bt=gt||(gt={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";var Rt=function(){function t(t,e){this.N=t,this.root=e||Vt.EMPTY}return t.prototype.Ae=function(e,n){return new t(this.N,this.root.Ae(e,n,this.N).me(null,null,Vt.Pe,null,null))},t.prototype.remove=function(e){return new t(this.N,this.root.remove(e,this.N).me(null,null,Vt.Pe,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.B();){var n=this.N(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.B();){var r=this.N(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.B=function(){return this.root.B()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.Ve=function(){return this.root.Ve()},t.prototype.ge=function(){return this.root.ge()},t.prototype.pe=function(t){return this.root.pe(t)},t.prototype.forEach=function(t){this.pe((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.pe((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ye=function(t){return this.root.ye(t)},t.prototype.be=function(){return new Lt(this.root,null,this.N,!1)},t.prototype.ve=function(t){return new Lt(this.root,t,this.N,!1)},t.prototype.Se=function(){return new Lt(this.root,null,this.N,!0)},t.prototype.De=function(t){return new Lt(this.root,t,this.N,!0)},t}(),Lt=function(){function t(t,e,n,r){this.Ce=r,this.Fe=[];for(var i=1;!t.B();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Ce?t.left:t.right;else{if(0===i){this.Fe.push(t);break}this.Fe.push(t),t=this.Ce?t.right:t.left}}return t.prototype.Ne=function(){var t=this.Fe.pop(),e={key:t.key,value:t.value};if(this.Ce)for(t=t.left;!t.B();)this.Fe.push(t),t=t.right;else for(t=t.right;!t.B();)this.Fe.push(t),t=t.left;return e},t.prototype.ke=function(){return this.Fe.length>0},t.prototype.Me=function(){if(0===this.Fe.length)return null;var t=this.Fe[this.Fe.length-1];return{key:t.key,value:t.value}},t}(),Vt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.me=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.B=function(){return!1},t.prototype.pe=function(t){return this.left.pe(t)||t(this.key,this.value)||this.right.pe(t)},t.prototype.ye=function(t){return this.right.ye(t)||t(this.key,this.value)||this.left.ye(t)},t.prototype.min=function(){return this.left.B()?this:this.left.min()},t.prototype.Ve=function(){return this.min().key},t.prototype.ge=function(){return this.right.B()?this.key:this.right.ge()},t.prototype.Ae=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.me(null,null,null,r.left.Ae(t,e,n),null):0===i?r.me(null,e,null,null,null):r.me(null,null,null,null,r.right.Ae(t,e,n))).xe()},t.prototype.$e=function(){if(this.left.B())return t.EMPTY;var e=this;return e.left.Oe()||e.left.left.Oe()||(e=e.Le()),(e=e.me(null,null,null,e.left.$e(),null)).xe()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.B()||i.left.Oe()||i.left.left.Oe()||(i=i.Le()),i=i.me(null,null,null,i.left.remove(e,n),null);else{if(i.left.Oe()&&(i=i.Be()),i.right.B()||i.right.Oe()||i.right.left.Oe()||(i=i.qe()),0===n(e,i.key)){if(i.right.B())return t.EMPTY;r=i.right.min(),i=i.me(r.key,r.value,null,null,i.right.$e())}i=i.me(null,null,null,null,i.right.remove(e,n))}return i.xe()},t.prototype.Oe=function(){return this.color},t.prototype.xe=function(){var t=this;return t.right.Oe()&&!t.left.Oe()&&(t=t.Ue()),t.left.Oe()&&t.left.left.Oe()&&(t=t.Be()),t.left.Oe()&&t.right.Oe()&&(t=t.Qe()),t},t.prototype.Le=function(){var t=this.Qe();return t.right.left.Oe()&&(t=(t=(t=t.me(null,null,null,null,t.right.Be())).Ue()).Qe()),t},t.prototype.qe=function(){var t=this.Qe();return t.left.left.Oe()&&(t=(t=t.Be()).Qe()),t},t.prototype.Ue=function(){var e=this.me(null,null,t.RED,null,this.right.left);return this.right.me(null,null,this.color,e,null)},t.prototype.Be=function(){var e=this.me(null,null,t.RED,this.left.right,null);return this.left.me(null,null,this.color,null,e)},t.prototype.Qe=function(){var t=this.left.me(null,null,!this.left.color,null,null),e=this.right.me(null,null,!this.right.color,null,null);return this.me(null,null,!this.color,t,e)},t.prototype.We=function(){var t=this.je();return Math.pow(2,t)<=this.size+1},t.prototype.je=function(){if(this.Oe()&&this.left.Oe())throw ye();if(this.right.Oe())throw ye();var t=this.left.je();if(t!==this.right.je())throw ye();return t+(this.Oe()?0:1)},t}();Vt.EMPTY=null,Vt.RED=!0,Vt.Pe=!1,Vt.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ye()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ye()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ye()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ye()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ye()},enumerable:!0,configurable:!0}),t.prototype.me=function(t,e,n,r,i){return this},t.prototype.Ae=function(t,e,n){return new Vt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.B=function(){return!0},t.prototype.pe=function(t){return!1},t.prototype.ye=function(t){return!1},t.prototype.Ve=function(){return null},t.prototype.ge=function(){return null},t.prototype.Oe=function(){return!1},t.prototype.We=function(){return!0},t.prototype.je=function(){return 0},t}());var qt=function(){function t(t){this.N=t,this.data=new Rt(this.N)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Ve()},t.prototype.last=function(){return this.data.ge()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.pe((function(e,n){return t(e),!1}))},t.prototype.Ke=function(t,e){for(var n=this.data.ve(t[0]);n.ke();){var r=n.Ne();if(this.N(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ge=function(t,e){var n;for(n=void 0!==e?this.data.ve(e):this.data.be();n.ke();)if(!t(n.Ne().key))return},t.prototype.ze=function(t){var e=this.data.ve(t);return e.ke()?e.Ne().key:null},t.prototype.be=function(){return new jt(this.data.be())},t.prototype.ve=function(t){return new jt(this.data.ve(t))},t.prototype.add=function(t){return this.me(this.data.remove(t).Ae(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.me(this.data.remove(t)):this},t.prototype.B=function(){return this.data.B()},t.prototype.He=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.be(),r=e.data.be();n.ke();){var i=n.Ne().key,o=r.Ne().key;if(0!==this.N(i,o))return!1}return!0},t.prototype.W=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.me=function(e){var n=new t(this.N);return n.data=e,n},t}(),jt=function(){function t(t){this.Ye=t}return t.prototype.Ne=function(){return this.Ye.Ne().key},t.prototype.ke=function(){return this.Ye.ke()},t}(),Ut=new Rt(E.N);function Ft(){return Ut}function zt(){return Ft()}var Bt=new Rt(E.N);function Gt(){return Bt}var Wt=new Rt(E.N),Kt=new qt(E.N);function Xt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Kt,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Qt=new qt(we);function $t(){return Qt}var Jt=function(){function t(t){this.N=t?function(e,n){return t(e,n)||E.N(e.key,n.key)}:function(t,e){return E.N(t.key,e.key)},this.Je=Gt(),this.Xe=new Rt(this.N)}return t.Ze=function(e){return new t(e.N)},t.prototype.has=function(t){return null!=this.Je.get(t)},t.prototype.get=function(t){return this.Je.get(t)},t.prototype.first=function(){return this.Xe.Ve()},t.prototype.last=function(){return this.Xe.ge()},t.prototype.B=function(){return this.Xe.B()},t.prototype.indexOf=function(t){var e=this.Je.get(t);return e?this.Xe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Xe.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.Xe.pe((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.me(e.Je.Ae(t.key,t),e.Xe.Ae(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.me(this.Je.remove(t),this.Xe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Xe.be(),r=e.Xe.be();n.ke();){var i=n.Ne().key,o=r.Ne().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.me=function(e,n){var r=new t;return r.N=this.N,r.Je=e,r.Xe=n,r},t}(),Yt=function(){function t(){this.ts=new Rt(E.N)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ts.get(e);n?0!==t.type&&3===n.type?this.ts=this.ts.Ae(e,t):3===t.type&&1!==n.type?this.ts=this.ts.Ae(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ts=this.ts.Ae(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ts=this.ts.Ae(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ts=this.ts.remove(e):1===t.type&&2===n.type?this.ts=this.ts.Ae(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ts=this.ts.Ae(e,{type:2,doc:t.doc}):ye():this.ts=this.ts.Ae(e,t)},t.prototype.es=function(){var t=[];return this.ts.pe((function(e,n){t.push(n)})),t},t}(),Ht=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.ss=n,this.docChanges=r,this.ns=i,this.fromCache=o,this.rs=s,this.hs=a}return t.os=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Jt.Ze(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.ns.B()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.rs===t.rs&&this.ns.isEqual(t.ns)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.ss.isEqual(t.ss)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Zt=function(){function t(t,e,n,r,i){this.Ee=t,this.as=e,this.us=n,this.cs=r,this._s=i}return t.ls=function(e,n){var r=new Map;return r.set(e,te.ds(e,n)),new t(x.min(),r,$t(),Ft(),Xt())},t}(),te=function(){function t(t,e,n,r,i){this.resumeToken=t,this.fs=e,this.Ts=n,this.Es=r,this.Is=i}return t.ds=function(e,n){return new t(I.ht,n,Xt(),Xt(),Xt())},t}(),ee=function(t,e,n,r){this.ws=t,this.removedTargetIds=e,this.key=n,this.Rs=r},ne=function(t,e){this.targetId=t,this.As=e},re=function(t,e,n,r){void 0===n&&(n=I.ht),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ie=function(){function t(){this.ms=0,this.Ps=ae(),this.Vs=I.ht,this.gs=!1,this.ps=!0}return Object.defineProperty(t.prototype,"fs",{get:function(){return this.gs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Vs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ys",{get:function(){return 0!==this.ms},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bs",{get:function(){return this.ps},enumerable:!0,configurable:!0}),t.prototype.vs=function(t){t.rt()>0&&(this.ps=!0,this.Vs=t)},t.prototype.Ss=function(){var t=Xt(),e=Xt(),n=Xt();return this.Ps.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ye()}})),new te(this.Vs,this.gs,t,e,n)},t.prototype.Ds=function(){this.ps=!1,this.Ps=ae()},t.prototype.Cs=function(t,e){this.ps=!0,this.Ps=this.Ps.Ae(t,e)},t.prototype.Fs=function(t){this.ps=!0,this.Ps=this.Ps.remove(t)},t.prototype.Ns=function(){this.ms+=1},t.prototype.ks=function(){this.ms-=1},t.prototype.Ms=function(){this.ps=!0,this.gs=!0},t}(),oe=function(){function t(t){this.xs=t,this.$s=new Map,this.Os=Ft(),this.Ls=se(),this.Bs=new qt(we)}return t.prototype.qs=function(t){for(var e=0,n=t.ws;e<n.length;e++){var r=n[e];t.Rs instanceof yt?this.Us(r,t.Rs):t.Rs instanceof vt&&this.Qs(r,t.key,t.Rs)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Qs(o[i],t.key,t.Rs)},t.prototype.Ws=function(t){var e=this;this.js(t,(function(n){var r=e.Ks(n);switch(t.state){case 0:e.Gs(n)&&r.vs(t.resumeToken);break;case 1:r.ks(),r.ys||r.Ds(),r.vs(t.resumeToken);break;case 2:r.ks(),r.ys||e.removeTarget(n);break;case 3:e.Gs(n)&&(r.Ms(),r.vs(t.resumeToken));break;case 4:e.Gs(n)&&(e.zs(n),r.vs(t.resumeToken));break;default:ye()}}))},t.prototype.js=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.$s.forEach((function(t,r){n.Gs(r)&&e(r)}))},t.prototype.Hs=function(t){var e=t.targetId,n=t.As.count,r=this.Ys(e);if(r){var i=r.target;if(i.Ot())if(0===n){var o=new E(i.path);this.Qs(e,o,new vt(o,x.min()))}else ve(1===n);else this.Js(e)!==n&&(this.zs(e),this.Bs=this.Bs.add(e))}},t.prototype.Xs=function(t){var e=this,n=new Map;this.$s.forEach((function(r,i){var o=e.Ys(i);if(o){if(r.fs&&o.target.Ot()){var s=new E(o.target.path);null!==e.Os.get(s)||e.Zs(i,s)||e.Qs(i,s,new vt(s,t))}r.bs&&(n.set(i,r.Ss()),r.Ds())}}));var r=Xt();this.Ls.forEach((function(t,n){var i=!0;n.Ge((function(t){var n=e.Ys(t);return!n||2===n.Te||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Zt(t,n,this.Bs,this.Os,r);return this.Os=Ft(),this.Ls=se(),this.Bs=new qt(we),i},t.prototype.Us=function(t,e){if(this.Gs(t)){var n=this.Zs(t,e.key)?2:0;this.Ks(t).Cs(e.key,n),this.Os=this.Os.Ae(e.key,e),this.Ls=this.Ls.Ae(e.key,this.ti(e.key).add(t))}},t.prototype.Qs=function(t,e,n){if(this.Gs(t)){var r=this.Ks(t);this.Zs(t,e)?r.Cs(e,1):r.Fs(e),this.Ls=this.Ls.Ae(e,this.ti(e).delete(t)),n&&(this.Os=this.Os.Ae(e,n))}},t.prototype.removeTarget=function(t){this.$s.delete(t)},t.prototype.Js=function(t){var e=this.Ks(t).Ss();return this.xs.ei(t).size+e.Ts.size-e.Is.size},t.prototype.Ns=function(t){this.Ks(t).Ns()},t.prototype.Ks=function(t){var e=this.$s.get(t);return e||(e=new ie,this.$s.set(t,e)),e},t.prototype.ti=function(t){var e=this.Ls.get(t);return e||(e=new qt(we),this.Ls=this.Ls.Ae(t,e)),e},t.prototype.Gs=function(t){var e=null!==this.Ys(t);return e||ge("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ys=function(t){var e=this.$s.get(t);return e&&e.ys?null:this.xs.si(t)},t.prototype.zs=function(t){var e=this;this.$s.set(t,new ie),this.xs.ei(t).forEach((function(n){e.Qs(t,n,null)}))},t.prototype.Zs=function(t,e){return this.xs.ei(t).has(e)},t}();function se(){return new Rt(E.N)}function ae(){return new Rt(E.N)}var ue={asc:"ASCENDING",desc:"DESCENDING"},ce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},he=function(){function t(t,e){this.ii=t,this.options=e}return t.prototype.ni=function(t){var e=void 0===t.code?l.UNKNOWN:Dt(t.code);return new f(e,t.message||"")},t.prototype.ri=function(t){return this.options.hi||N(t)?t:{value:t}},t.prototype.oi=function(t){var e;return N(e="object"==typeof t?t.value:t)?null:e},t.prototype._t=function(t){return{integerValue:""+t}},t.prototype.lt=function(t){if(this.options.hi){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:A(t)?"-0":t}},t.prototype.ai=function(t){return S(t)?this._t(t):this.lt(t)},t.prototype.C=function(t){return this.options.hi?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.v=function(t){var e=z(t);return new v(e.seconds,e.nanos)},t.prototype.ui=function(t){return this.options.hi?t.toBase64():t.toUint8Array()},t.prototype.ci=function(t){return this.options.hi?(ve(void 0===t||"string"==typeof t),I.fromBase64String(t||"")):(ve(void 0===t||t instanceof Uint8Array),I.fromUint8Array(t||new Uint8Array))},t.prototype.toVersion=function(t){return this.C(t.C())},t.prototype.fromVersion=function(t){return ve(!!t),x.v(this.v(t))},t.prototype._i=function(t,e){return this.li(e||this.ii).child("documents").child(t).j()},t.prototype.di=function(t){var e=w.K(t);return ve(pe(e)),e},t.prototype.fi=function(t){return this._i(t.path)},t.prototype.Z=function(t){var e=this.di(t);return ve(e.get(1)===this.ii.projectId),ve(!e.get(3)&&!this.ii.database||e.get(3)===this.ii.database),new E(this.Ti(e))},t.prototype.Ei=function(t){return this._i(t)},t.prototype.Ii=function(t){var e=this.di(t);return 4===e.length?w.G:this.Ti(e)},Object.defineProperty(t.prototype,"wi",{get:function(){return new w(["projects",this.ii.projectId,"databases",this.ii.database]).j()},enumerable:!0,configurable:!0}),t.prototype.li=function(t){return new w(["projects",t.projectId,"databases",t.database])},t.prototype.Ti=function(t){return ve(t.length>4&&"documents"===t.get(4)),t.M(5)},t.prototype.Ri=function(t,e){return{name:this.fi(t),fields:e.proto.mapValue.fields}},t.prototype.Ai=function(t){return{name:this.fi(t.key),fields:t.xt().mapValue.fields,updateTime:this.C(t.version.C())}},t.prototype.mi=function(t,e){var n=this.Z(t.name),r=this.fromVersion(t.updateTime),i=new lt({mapValue:{fields:t.fields}});return new yt(n,r,i,{hasCommittedMutations:!!e})},t.prototype.Pi=function(t){ve(!!t.found);var e=this.Z(t.found.name),n=this.fromVersion(t.found.updateTime),r=new lt({mapValue:{fields:t.found.fields}});return new yt(e,n,r,{})},t.prototype.Vi=function(t){ve(!!t.missing),ve(!!t.readTime);var e=this.Z(t.missing),n=this.fromVersion(t.readTime);return new vt(e,n)},t.prototype.gi=function(t){return"found"in t?this.Pi(t):"missing"in t?this.Vi(t):ye()},t.prototype.pi=function(t){var e;if("targetChange"in t){var n=this.yi(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=this.ci(t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&this.ni(o);e=new re(n,r,i,s||null)}else if("documentChange"in t){var a=t.documentChange,u=this.Z(a.document.name),c=this.fromVersion(a.document.updateTime),h=new lt({mapValue:{fields:a.document.fields}}),p=new yt(u,c,h,{});e=new ee(a.targetIds||[],a.removedTargetIds||[],p.key,p)}else if("documentDelete"in t){var l=t.documentDelete,f=this.Z(l.document),d=l.readTime?this.fromVersion(l.readTime):x.min(),g=new vt(f,d);e=new ee([],l.removedTargetIds||[],g.key,g)}else if("documentRemove"in t){var b=t.documentRemove,m=this.Z(b.document);e=new ee([],b.removedTargetIds||[],m,null)}else{if(!("filter"in t))return ye();var y=t.filter,v=new St(y.count||0);e=new ne(y.targetId,v)}return e},t.prototype.yi=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ye()},t.prototype.bi=function(t){if(!("targetChange"in t))return x.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?x.min():e.readTime?this.fromVersion(e.readTime):x.min()},t.prototype.vi=function(t){var e,n=this;if(t instanceof at)e={update:this.Ri(t.key,t.value)};else if(t instanceof ht)e={delete:this.fi(t.key)};else if(t instanceof ut)e={update:this.Ri(t.key,t.data),updateMask:this.Si(t.Vt)};else if(t instanceof ct)e={transform:{document:this.fi(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.Di(t)}))}};else{if(!(t instanceof pt))return ye();e={verify:this.fi(t.key)}}return t.Rt.Tt||(e.currentDocument=this.Ci(t.Rt)),e},t.prototype.Fi=function(t){var e=this,n=t.currentDocument?this.Ni(t.currentDocument):ot.ft();if(t.update){var r=this.Z(t.update.name),i=new lt({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=this.ki(t.updateMask);return new ut(r,i,o,n)}return new at(r,i,n)}if(t.delete){var s=this.Z(t.delete);return new ht(s,n)}if(t.transform){var a=this.Z(t.transform.document),u=t.transform.fieldTransforms.map((function(t){return e.Mi(t)}));return ve(!0===n.exists),new ct(a,u)}if(t.verify){var c=this.Z(t.verify);return new pt(c,n)}return ye()},t.prototype.Ci=function(t){return void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ye()},t.prototype.Ni=function(t){return void 0!==t.updateTime?ot.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ot.exists(t.exists):ot.ft()},t.prototype.xi=function(t,e){var n=this.fromVersion(t.updateTime?t.updateTime:e);n.isEqual(x.min())&&(n=this.fromVersion(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new it(n,r)},t.prototype.$i=function(t,e){var n=this;return t&&t.length>0?(ve(void 0!==e),t.map((function(t){return n.xi(t,e)}))):[]},t.prototype.Di=function(t){var e=t.transform;if(e instanceof Y)return{fieldPath:t.field.j(),setToServerValue:"REQUEST_TIME"};if(e instanceof H)return{fieldPath:t.field.j(),appendMissingElements:{values:e.elements}};if(e instanceof Z)return{fieldPath:t.field.j(),removeAllFromArray:{values:e.elements}};if(e instanceof tt)return{fieldPath:t.field.j(),increment:e.ct};throw ye()},t.prototype.Mi=function(t){var e=null;"setToServerValue"in t?(ve("REQUEST_TIME"===t.setToServerValue),e=Y.instance):"appendMissingElements"in t?e=new H(t.appendMissingElements.values||[]):"removeAllFromArray"in t?e=new Z(t.removeAllFromArray.values||[]):"increment"in t?e=new tt(this,t.increment):ye();var n=P.X(t.fieldPath);return new rt(n,e)},t.prototype.Oi=function(t){return{documents:[this.Ei(t.path)]}},t.prototype.Li=function(t){return ve(1===t.documents.length),wt.Wt(this.Ii(t.documents[0])).ee()},t.prototype.Bi=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(e.parent=this.Ei(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=this.Ei(n.$()),e.structuredQuery.from=[{collectionId:n.L()}]);var r=this.qi(t.filters);r&&(e.structuredQuery.where=r);var i=this.Ui(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.ri(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.Qi(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.Qi(t.endAt)),e},t.prototype.Wi=function(t){var e=this.Ii(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ve(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.ji(n.where));var a=[];n.orderBy&&(a=this.Ki(n.orderBy));var u=null;n.limit&&(u=this.oi(n.limit));var c=null;n.startAt&&(c=this.Gi(n.startAt));var h=null;return n.endAt&&(h=this.Gi(n.endAt)),new wt(e,i,a,s,u,"F",c,h).ee()},t.prototype.zi=function(t){var e=this.Hi(t.Te);return null==e?null:{"goog-listen-tags":e}},t.prototype.Hi=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ye()}},t.prototype.ee=function(t){var e,n=t.target;return(e=n.Ot()?{documents:this.Oi(n)}:{query:this.Bi(n)}).targetId=t.targetId,t.resumeToken.rt()>0&&(e.resumeToken=this.ui(t.resumeToken)),e},t.prototype.qi=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof Ot?e.Yi(t):ye()}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.ji=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.Ji(t)]:void 0!==t.fieldFilter?[this.Xi(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.ji(t)})).reduce((function(t,e){return t.concat(e)})):ye():[]},t.prototype.Ui=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.Zi(t)}))},t.prototype.Ki=function(t){var e=this;return t.map((function(t){return e.tn(t)}))},t.prototype.Qi=function(t){return{before:t.before,values:t.position}},t.prototype.Gi=function(t){return new It(t.values||[],!!t.before)},t.prototype.en=function(t){return ue[t]},t.prototype.sn=function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}},t.prototype.nn=function(t){return ce[t]},t.prototype.rn=function(t){switch(t){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ye()}},t.prototype.hn=function(t){return{fieldPath:t.j()}},t.prototype.on=function(t){return P.X(t.fieldPath)},t.prototype.Zi=function(t){return{field:this.hn(t.field),direction:this.en(t.dir)}},t.prototype.tn=function(t){return new Nt(this.on(t.field),this.sn(t.direction))},t.prototype.Xi=function(t){return Ot.create(this.on(t.fieldFilter.field),this.rn(t.fieldFilter.op),t.fieldFilter.value)},t.prototype.Yi=function(t){if("=="===t.op){if($(t.value))return{unaryFilter:{field:this.hn(t.field),op:"IS_NAN"}};if(Q(t.value))return{unaryFilter:{field:this.hn(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.hn(t.field),op:this.nn(t.op),value:t.value}}},t.prototype.Ji=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.on(t.unaryFilter.field);return Ot.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=this.on(t.unaryFilter.field);return Ot.create(n,"==",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ye()}},t.prototype.Si=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.j())})),{fieldPaths:e}},t.prototype.ki=function(t){return new nt((t.fieldPaths||[]).map((function(t){return P.X(t)})))},t}();function pe(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var le=function(){function t(){}return t.an=function(e){t.platform&&ye(),t.platform=e},t.nt=function(){return t.platform||ye(),t.platform},t}(),fe=new s.Logger("@firebase/firestore");function de(){return fe.logLevel}function ge(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(fe.logLevel<=s.LogLevel.DEBUG){var r=e.map(me);fe.debug.apply(fe,i.__spreadArrays(["Firestore ("+h+"): "+t],r))}}function be(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(fe.logLevel<=s.LogLevel.ERROR){var r=e.map(me);fe.error.apply(fe,i.__spreadArrays(["Firestore ("+h+"): "+t],r))}}function me(t){if("string"==typeof t)return t;var e=le.nt();try{return e.un(t)}catch(e){return t}}function ye(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+h+") INTERNAL ASSERTION FAILED: "+t;throw be(e),new Error(e)}function ve(t,e){t||ye()}function xe(t,e){return t}var _e=function(){function t(){}return t.cn=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=le.nt()._n(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function we(t,e){return t<e?-1:t>e?1:0}function Oe(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Pe(t){return t+"\0"}var Ee=function(t,e,n,r,i){this.ii=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},Ce=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"ln",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.S=function(t){return we(this.projectId,t.projectId)||we(this.database,t.database)},t}(),Me=function(){function t(t){this.dn=t,this.fn={}}return t.prototype.get=function(t){var e=this.dn(t),n=this.fn[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(o[0].isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.dn(t),r=this.fn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.fn[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.dn(t),n=this.fn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.fn[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){M(this.fn,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.B=function(){return T(this.fn)},t}(),Te=function(){function t(t,e,n,r){this.batchId=t,this.Tn=e,this.baseMutations=n,this.mutations=r}return t.prototype.at=function(t,e,n){for(var r=n.En,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.at(e,r[i]))}return e},t.prototype.ot=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=i.ot(e,e,this.Tn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=u.ot(e,o,this.Tn))}return e},t.prototype.In=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ot(r.key,t.get(r.key));i&&(n=n.Ae(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Xt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Oe(this.mutations,t.mutations,(function(t,e){return t.isEqual(e)}))&&Oe(this.baseMutations,t.baseMutations,(function(t,e){return t.isEqual(e)}))},t}(),Ie=function(){function t(t,e,n,r){this.batch=t,this.wn=e,this.En=n,this.Rn=r}return t.from=function(e,n,r){ve(e.mutations.length===r.length);for(var i=Wt,o=e.mutations,s=0;s<o.length;s++)i=i.Ae(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Ne=function(){function t(t){var e=this;this.An=null,this.mn=null,this.result=void 0,this.error=void 0,this.Pn=!1,this.Vn=!1,t((function(t){e.Pn=!0,e.result=t,e.An&&e.An(t)}),(function(t){e.Pn=!0,e.error=t,e.mn&&e.mn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Vn&&ye(),this.Vn=!0,this.Pn?this.error?this.gn(n,this.error):this.pn(e,this.result):new t((function(t,i){r.An=function(n){r.pn(e,n).next(t,i)},r.mn=function(e){r.gn(n,e).next(t,i)}}))},t.prototype.yn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.bn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.pn=function(e,n){return e?this.bn((function(){return e(n)})):t.resolve(n)},t.prototype.gn=function(e,n){return e?this.bn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.vn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Sn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.vn(r)},t}(),Ae=function(){function t(){this.Dn=new Me((function(t){return t.toString()})),this.Cn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Fn},set:function(t){this.Fn=t},enumerable:!0,configurable:!0}),t.prototype.Nn=function(t,e){this.kn(),this.readTime=e,this.Dn.set(t.key,t)},t.prototype.Mn=function(t,e){this.kn(),e&&(this.readTime=e),this.Dn.set(t,null)},t.prototype.xn=function(t,e){this.kn();var n=this.Dn.get(e);return void 0!==n?Ne.resolve(n):this.$n(t,e)},t.prototype.getEntries=function(t,e){return this.On(t,e)},t.prototype.apply=function(t){return this.kn(),this.Cn=!0,this.Ln(t)},t.prototype.kn=function(){},t}(),Se="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ke=function(){function t(){this.Bn=[]}return t.prototype.qn=function(t){this.Bn.push(t)},t.prototype.Un=function(){this.Bn.forEach((function(t){return t()}))},t}(),De=function(){function t(t,e,n){this.Qn=t,this.Wn=e,this.jn=n}return t.prototype.Kn=function(t,e){var n=this;return this.Wn.Gn(t,e).next((function(r){return n.zn(t,e,r)}))},t.prototype.zn=function(t,e,n){return this.Qn.xn(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ot(e,t);return t}))},t.prototype.Hn=function(t,e,n){var r=zt();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ot(t,e);r=r.Ae(t,e)})),r},t.prototype.Yn=function(t,e){var n=this;return this.Qn.getEntries(t,e).next((function(e){return n.Jn(t,e)}))},t.prototype.Jn=function(t,e){var n=this;return this.Wn.Xn(t,e).next((function(r){var i=n.Hn(t,e,r),o=Ft();return i.forEach((function(t,e){e||(e=new vt(t,x.min())),o=o.Ae(t,e)})),o}))},t.prototype.Zn=function(t,e,n){return e.Ot()?this.tr(t,e.path):e._e()?this.er(t,e,n):this.sr(t,e,n)},t.prototype.tr=function(t,e){return this.Kn(t,new E(e)).next((function(t){var e=Gt();return t instanceof yt&&(e=e.Ae(t.key,t)),e}))},t.prototype.er=function(t,e,n){var r=this,i=e.collectionGroup,o=Gt();return this.jn.ir(t,i).next((function(s){return Ne.forEach(s,(function(s){var a=e.Zt(s.child(i));return r.sr(t,a,n).next((function(t){t.forEach((function(t,e){o=o.Ae(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sr=function(t,e,n){var r,i,o=this;return this.Qn.Zn(t,e,n).next((function(n){return r=n,o.Wn.nr(t,e)})).next((function(e){return o.rr(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c),p=u.ot(h,h,o.Tn);r=p instanceof yt?r.Ae(c,p):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.rr=function(t,e,n){for(var r=Xt(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ut&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Qn.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof yt&&(c=c.Ae(t,e))})),c}))},t}(),Re=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.hr=n,this.or=r}return t.ar=function(e,n){for(var r=Xt(),i=Xt(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Le=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.ur=function(t){return n.cr(t)},this._r=function(t){return e.lr(t)})}return t.prototype.cr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this._r&&this._r(t),t},t}();Le.dr=-1;var Ve=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},qe=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Tr=t,this.Er=e,this.Ir=n,this.wr=r,this.Rr=i,this.Ar=0,this.mr=null,this.Pr=Date.now(),this.reset()}return t.prototype.reset=function(){this.Ar=0},t.prototype.Vr=function(){this.Ar=this.Rr},t.prototype.gr=function(t){var e=this;this.cancel();var n=Math.floor(this.Ar+this.pr()),r=Math.max(0,Date.now()-this.Pr),i=Math.max(0,n-r);i>0&&ge("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ar+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.mr=this.Tr.yr(this.Er,i,(function(){return e.Pr=Date.now(),t()})),this.Ar*=this.wr,this.Ar<this.Ir&&(this.Ar=this.Ir),this.Ar>this.Rr&&(this.Ar=this.Rr)},t.prototype.br=function(){null!==this.mr&&(this.mr.vr(),this.mr=null)},t.prototype.cancel=function(){null!==this.mr&&(this.mr.cancel(),this.mr=null)},t.prototype.pr=function(){return(Math.random()-.5)*this.Ar},t}();function je(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Fe(e)),e=Ue(t.get(n),e);return Fe(e)}function Ue(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Fe(t){return t+"\x01\x01"}function ze(t){var e=t.length;if(ve(e>=2),2===e)return ve("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),w.G;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&ye(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:ye()}o=s+2}return new w(r)}var Be=function(){function t(){this.Sr=new Ge}return t.prototype.Dr=function(t,e){return this.Sr.add(e),Ne.resolve()},t.prototype.ir=function(t,e){return Ne.resolve(this.Sr.getEntries(e))},t}(),Ge=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.L(),n=t.$(),r=this.index[e]||new qt(w.N),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.L(),n=t.$(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new qt(w.N)).W()},t}(),We=function(){function t(){this.Cr=new Ge}return t.prototype.Dr=function(t,e){var n=this;if(!this.Cr.has(e)){var r=e.L(),i=e.$();t.qn((function(){n.Cr.add(e)}));var o={collectionId:r,parent:je(i)};return Ke(t).put(o)}return Ne.resolve()},t.prototype.ir=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Pe(e),""],!1,!0);return Ke(t).Fr(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ze(o.parent))}return n}))},t}();function Ke(t){return an.Nr(t,Sn.store)}var Xe=function(){function t(t,e){this.serializer=t,this.jn=e}return t.prototype.Nn=function(t,e,n){return $e(t).put(Je(e),n)},t.prototype.Mn=function(t,e){var n=$e(t),r=Je(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},t.prototype.xn=function(t,e){var n=this;return $e(t).get(Je(e)).next((function(t){return n.Mr(t)}))},t.prototype.xr=function(t,e){var n=this;return $e(t).get(Je(e)).next((function(t){var e=n.Mr(t);return e?{$r:e,size:Ye(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=zt();return this.Or(t,e,(function(t,e){var i=n.Mr(e);r=r.Ae(t,i)})).next((function(){return r}))},t.prototype.Lr=function(t,e){var n=this,r=zt(),i=new Rt(E.N);return this.Or(t,e,(function(t,e){var o=n.Mr(e);o?(r=r.Ae(t,o),i=i.Ae(t,Ye(e))):(r=r.Ae(t,null),i=i.Ae(t,0))})).next((function(){return{Br:r,qr:i}}))},t.prototype.Or=function(t,e,n){if(e.B())return Ne.resolve();var r=IDBKeyRange.bound(e.first().path.W(),e.last().path.W()),i=e.be(),o=i.Ne();return $e(t).Ur({range:r},(function(t,e,r){for(var s=E.st(t);o&&E.N(o,s)<0;)n(o,null),o=i.Ne();o&&o.isEqual(s)&&(n(o,e),o=i.ke()?i.Ne():null),o?r.Qr(o.path.W()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ke()?i.Ne():null}))},t.prototype.Zn=function(t,e,n){var r=this,i=Gt(),o=e.path.length+1,s={};if(n.isEqual(x.min())){var a=e.path.W();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.W(),c=this.serializer.Wr(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Mn.collectionReadTimeIndex}return $e(t).Ur(s,(function(t,n,s){if(t.length===o){var a=r.serializer.jr(n);e.path.q(a.key.path)?a instanceof yt&&e.matches(a)&&(i=i.Ae(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Kr=function(t,e){var n=this,r=Ft(),i=this.serializer.Wr(e),o=$e(t),s=IDBKeyRange.lowerBound(i,!0);return o.Ur({index:Mn.readTimeIndex,range:s},(function(t,e){var o=n.serializer.jr(e);r=r.Ae(o.key,o),i=e.readTime})).next((function(){return{Gr:r,readTime:n.serializer.zr(i)}}))},t.prototype.Hr=function(t){var e=this,n=$e(t),r=x.min();return n.Ur({index:Mn.readTimeIndex,reverse:!0},(function(t,n,i){n.readTime&&(r=e.serializer.zr(n.readTime)),i.done()})).next((function(){return r}))},t.prototype.Yr=function(e){return new t.Jr(this,!!e&&e.Xr)},t.prototype.Zr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Qe(t).get(Tn.key).next((function(t){return ve(!!t),t}))},t.prototype.kr=function(t,e){return Qe(t).put(Tn.key,e)},t.prototype.Mr=function(t){if(t){var e=this.serializer.jr(t);return e instanceof vt&&e.version.isEqual(x.min())?null:e}return null},t}();function Qe(t){return an.Nr(t,Tn.store)}function $e(t){return an.Nr(t,Mn.store)}function Je(t){return t.path.W()}function Ye(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ye();e=t.noDocument}return JSON.stringify(e).length}Xe.Jr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).th=e,r.Xr=n,r.eh=new Me((function(t){return t.toString()})),r}return i.__extends(e,t),e.prototype.Ln=function(t){var e=this,n=[],r=0,i=new qt((function(t,e){return we(t.j(),e.j())}));return this.Dn.forEach((function(o,s){var a=e.eh.get(o);if(s){var u=e.th.serializer.sh(s,e.readTime);i=i.add(o.path.$());var c=Ye(u);r+=c-a,n.push(e.th.Nn(t,o,u))}else if(r-=a,e.Xr){var h=e.th.serializer.sh(new vt(o,x.min()),e.readTime);n.push(e.th.Nn(t,o,h))}else n.push(e.th.Mn(t,o))})),i.forEach((function(r){n.push(e.th.jn.Dr(t,r))})),n.push(this.th.updateMetadata(t,r)),Ne.vn(n)},e.prototype.$n=function(t,e){var n=this;return this.th.xr(t,e).next((function(t){return null===t?(n.eh.set(e,0),null):(n.eh.set(e,t.size),t.$r)}))},e.prototype.On=function(t,e){var n=this;return this.th.Lr(t,e).next((function(t){var e=t.Br;return t.qr.forEach((function(t,e){n.eh.set(t,e)})),e}))},e}(Ae);var He=function(){function t(t){this.ih=t}return t.prototype.next=function(){return this.ih+=2,this.ih},t.nh=function(){return new t(0)},t.rh=function(){return new t(-1)},t}(),Ze=function(){function t(t,e){this.hh=t,this.serializer=e}return t.prototype.oh=function(t){var e=this;return this.ah(t).next((function(n){var r=new He(n.highestTargetId);return n.highestTargetId=r.next(),e.uh(t,n).next((function(){return n.highestTargetId}))}))},t.prototype._h=function(t){return this.ah(t).next((function(t){return x.v(new v(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.lh=function(t){return this.ah(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.dh=function(t,e,n){var r=this;return this.ah(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.C()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.uh(t,i)}))},t.prototype.fh=function(t,e){var n=this;return this.Th(t,e).next((function(){return n.ah(t).next((function(r){return r.targetCount+=1,n.Eh(e,r),n.uh(t,r)}))}))},t.prototype.Ih=function(t,e){return this.Th(t,e)},t.prototype.wh=function(t,e){var n=this;return this.Rh(t,e.targetId).next((function(){return tn(t).delete(e.targetId)})).next((function(){return n.ah(t)})).next((function(e){return ve(e.targetCount>0),e.targetCount-=1,n.uh(t,e)}))},t.prototype.Ah=function(t,e,n){var r=this,i=0,o=[];return tn(t).Ur((function(s,a){var u=r.serializer.mh(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.wh(t,u)))})).next((function(){return Ne.vn(o)})).next((function(){return i}))},t.prototype.js=function(t,e){var n=this;return tn(t).Ur((function(t,r){var i=n.serializer.mh(r);e(i)}))},t.prototype.ah=function(t){return en(t).get(An.key).next((function(t){return ve(null!==t),t}))},t.prototype.uh=function(t,e){return en(t).put(An.key,e)},t.prototype.Th=function(t,e){return tn(t).put(this.serializer.Ph(e))},t.prototype.Eh=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Vh=function(t){return this.ah(t).next((function(t){return t.targetCount}))},t.prototype.gh=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return tn(t).Ur({range:i,index:In.queryTargetsIndexName},(function(t,r,i){var s=n.serializer.mh(r);e.isEqual(s.target)&&(o=s,i.done())})).next((function(){return o}))},t.prototype.ph=function(t,e,n){var r=this,i=[],o=nn(t);return e.forEach((function(e){var s=je(e.path);i.push(o.put(new Nn(n,s))),i.push(r.hh.yh(t,n,e))})),Ne.vn(i)},t.prototype.bh=function(t,e,n){var r=this,i=nn(t);return Ne.forEach(e,(function(e){var o=je(e.path);return Ne.vn([i.delete([n,o]),r.hh.vh(t,n,e)])}))},t.prototype.Rh=function(t,e){var n=nn(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Sh=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=nn(t),i=Xt();return r.Ur({range:n,Dh:!0},(function(t,e,n){var r=ze(t[1]),o=new E(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Ch=function(t,e){var n=je(e.path),r=IDBKeyRange.bound([n],[Pe(n)],!1,!0),i=0;return nn(t).Ur({index:Nn.documentTargetsIndex,Dh:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.si=function(t,e){var n=this;return tn(t).get(e).next((function(t){return t?n.serializer.mh(t):null}))},t}();function tn(t){return an.Nr(t,In.store)}function en(t){return an.Nr(t,An.store)}function nn(t){return an.Nr(t,Nn.store)}var rn=function(){function t(t){this.Fh=t}return t.prototype.jr=function(t){if(t.document)return this.Fh.mi(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=E.st(t.noDocument.path),n=this.Nh(t.noDocument.readTime);return new vt(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var r=E.st(t.unknownDocument.path),i=this.Nh(t.unknownDocument.version);return new xt(r,i)}return ye()},t.prototype.sh=function(t,e){var n=this.Wr(e),r=t.key.path.$().W();if(t instanceof yt){var i=this.Fh.Ai(t);return new Mn(null,null,i,t.hasCommittedMutations,n,r)}if(t instanceof vt){var o=t.key.path.W(),s=this.kh(t.version),a=t.hasCommittedMutations;return new Mn(null,new En(o,s),null,a,n,r)}if(t instanceof xt){var u=t.key.path.W(),c=this.kh(t.version);return new Mn(new Cn(u,c),null,null,!0,n,r)}return ye()},t.prototype.Wr=function(t){var e=t.C();return[e.seconds,e.nanoseconds]},t.prototype.zr=function(t){var e=new v(t[0],t[1]);return x.v(e)},t.prototype.kh=function(t){var e=t.C();return new xn(e.seconds,e.nanoseconds)},t.prototype.Nh=function(t){var e=new v(t.seconds,t.nanoseconds);return x.v(e)},t.prototype.Mh=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.Fh.vi(t)})),i=e.mutations.map((function(t){return n.Fh.vi(t)}));return new On(t,e.batchId,e.Tn.toMillis(),r,i)},t.prototype.xh=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.Fh.Fi(t)})),r=t.mutations.map((function(t){return e.Fh.Fi(t)})),i=v.fromMillis(t.localWriteTimeMs);return new Te(t.batchId,i,n,r)},t.prototype.mh=function(t){var e,n=this.Nh(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.Nh(t.lastLimboFreeSnapshotVersion):x.min();return e=void 0!==t.query.documents?this.Fh.Li(t.query):this.Fh.Wi(t.query),new At(e,t.targetId,0,t.lastListenSequenceNumber,n,r,I.fromBase64String(t.resumeToken))},t.prototype.Ph=function(t){var e,n=this.kh(t.Ee),r=this.kh(t.lastLimboFreeSnapshotVersion);e=t.target.Ot()?this.Fh.Oi(t.target):this.Fh.Bi(t.target);var i=t.resumeToken.toBase64();return new In(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},t}(),on="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).$h=e,r.Oh=n,r}return i.__extends(e,t),e}(ke),an=function(){function t(e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Tr=s,this.Lh=u,this.Bh=c,this.qh=null,this.Uh=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Qh=null,this.inForeground=!1,this.Wh=null,this.jh=null,this.Kh=Number.NEGATIVE_INFINITY,this.Gh=function(t){return Promise.resolve()},!t.zh())throw new f(l.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.hh=new hn(this,o),this.Hh=n+t.Yh,this.serializer=new rn(a),this.document=i.document,this.Jh=new Ze(this.hh,this.serializer),this.jn=new We,this.Qn=new Xe(this.serializer,this.jn),this.window=i.window,i.window&&i.window.localStorage?this.Xh=i.window.localStorage:(this.Xh=null,!1===c&&be("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Nr=function(t,e){if(t instanceof sn)return Ln.Nr(t.$h,e);throw ye()},t.prototype.start=function(){var t=this;return Ln.Zh(this.Hh,yn,new vn(this.serializer)).then((function(e){return t.to=e,t.eo()})).then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new f(l.FAILED_PRECONDITION,on);return t.so(),t.io(),t.no(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Jh.lh(e)}))})).then((function(e){t.qh=new Le(e,t.Lh)})).then((function(){t.Uh=!0})).catch((function(e){return t.to&&t.to.close(),Promise.reject(e)}))},t.prototype.ro=function(t){var e=this;return this.Gh=function(n){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.ho?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.oo=function(t){var e=this;this.to.ao((function(n){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.uo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Tr.co((function(){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.ho?[4,this.eo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.eo=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return cn(e).put(new Dn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t._o(e).next((function(e){e||(t.isPrimary=!1,t.Tr.lo((function(){return t.Gh(!1)})))}))})).next((function(){return t.do(e)})).next((function(n){return t.isPrimary&&!n?t.fo(e).next((function(){return!1})):!!n&&t.To(e).next((function(){return!0}))}))})).catch((function(e){if(jn(e))return ge("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Tr.lo((function(){return t.Gh(e)})),t.isPrimary=e}))},t.prototype._o=function(t){var e=this;return un(t).get(_n.key).next((function(t){return Ne.resolve(e.Eo(t))}))},t.prototype.Io=function(t){return cn(t).delete(this.clientId)},t.prototype.wo=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o=this;return i.__generator(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.Ro(this.Kh,18e5)?[3,2]:(this.Kh=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Nr(e,Dn.store);return n.Fr().next((function(t){var e=o.Ao(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Ne.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=i.sent(),this.Xh)for(n=0,r=e;n<r.length;n++)this.Xh.removeItem(this.mo(r[n].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.no=function(){var t=this;this.jh=this.Tr.yr("client_metadata_refresh",4e3,(function(){return t.eo().then((function(){return t.wo()})).then((function(){return t.no()}))}))},t.prototype.Eo=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.do=function(t){var e=this;return this.Bh?Ne.resolve(!0):un(t).get(_n.key).next((function(n){if(null!==n&&e.Ro(n.leaseTimestampMs,5e3)&&!e.Po(n.ownerId)){if(e.Eo(n)&&e.networkEnabled)return!0;if(!e.Eo(n)){if(!n.allowTabSynchronization)throw new f(l.FAILED_PRECONDITION,on);return!1}}return!(!e.networkEnabled||!e.inForeground)||cn(t).Fr().next((function(t){return void 0===e.Ao(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&ge("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Vo=function(){return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(e){switch(e.label){case 0:return this.Uh=!1,this.po(),this.jh&&(this.jh.cancel(),this.jh=null),this.yo(),this.bo(),[4,this.runTransaction("shutdown","readwrite",(function(e){return t.fo(e).next((function(){return t.Io(e)}))})).catch((function(t){ge("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)}))];case 1:return e.sent(),this.to.close(),this.vo(),[2]}}))}))},t.prototype.Ao=function(t,e){var n=this;return t.filter((function(t){return n.Ro(t.updateTimeMs,e)&&!n.Po(t.clientId)}))},t.prototype.So=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return cn(e).Fr().next((function(e){return t.Ao(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return t.zh()?[4,Ln.delete(e+t.Yh)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"ho",{get:function(){return this.Uh},enumerable:!0,configurable:!0}),t.prototype.Do=function(t){return ln.Co(t,this.serializer,this.jn,this.hh)},t.prototype.Fo=function(){return this.Jh},t.prototype.No=function(){return this.Qn},t.prototype.ko=function(){return this.jn},t.prototype.runTransaction=function(t,e,n){var r,i=this;return ge("IndexedDbPersistence","Starting transaction:",t),this.to.runTransaction("readonly"===e?"readonly":"readwrite",Rn,(function(o){return r=new sn(o,i.qh?i.qh.next():Le.dr),"readwrite-primary"===e?i._o(r).next((function(t){return!!t||i.do(r)})).next((function(e){if(!e)throw be("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Tr.lo((function(){return i.Gh(!1)})),new f(l.FAILED_PRECONDITION,Se);return n(r)})).next((function(t){return i.To(r).next((function(){return t}))})):i.Mo(r).next((function(){return n(r)}))})).then((function(t){return r.Un(),t}))},t.prototype.Mo=function(t){var e=this;return un(t).get(_n.key).next((function(t){if(null!==t&&e.Ro(t.leaseTimestampMs,5e3)&&!e.Po(t.ownerId)&&!e.Eo(t)&&!(e.Bh||e.allowTabSynchronization&&t.allowTabSynchronization))throw new f(l.FAILED_PRECONDITION,on)}))},t.prototype.To=function(t){var e=new _n(this.clientId,this.allowTabSynchronization,Date.now());return un(t).put(_n.key,e)},t.zh=function(){return Ln.zh()},t.xo=function(t){var e=t.ii.projectId;return t.ii.ln||(e+="."+t.ii.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.fo=function(t){var e=this,n=un(t);return n.get(_n.key).next((function(t){return e.Eo(t)?(ge("IndexedDbPersistence","Releasing primary lease."),n.delete(_n.key)):Ne.resolve()}))},t.prototype.Ro=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(be("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.so=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Wh=function(){t.Tr.co((function(){return t.inForeground="visible"===t.document.visibilityState,t.eo()}))},this.document.addEventListener("visibilitychange",this.Wh),this.inForeground="visible"===this.document.visibilityState)},t.prototype.yo=function(){this.Wh&&(this.document.removeEventListener("visibilitychange",this.Wh),this.Wh=null)},t.prototype.io=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Qh=function(){e.po(),e.Tr.co((function(){return e.Vo()}))},this.window.addEventListener("unload",this.Qh))},t.prototype.bo=function(){this.Qh&&(this.window.removeEventListener("unload",this.Qh),this.Qh=null)},t.prototype.Po=function(t){var e;try{var n=null!==(null===(e=this.Xh)||void 0===e?void 0:e.getItem(this.mo(t)));return ge("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return be("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.po=function(){if(this.Xh)try{this.Xh.setItem(this.mo(this.clientId),String(Date.now()))}catch(t){be("Failed to set zombie client id.",t)}},t.prototype.vo=function(){if(this.Xh)try{this.Xh.removeItem(this.mo(this.clientId))}catch(t){}},t.prototype.mo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function un(t){return an.Nr(t,_n.store)}function cn(t){return an.Nr(t,Dn.store)}an.Yh="main";var hn=function(){function t(t,e){this.db=t,this.$o=new Zn(this,e)}return t.prototype.Oo=function(t){var e=this.Lo(t);return this.db.Fo().Vh(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Lo=function(t){var e=0;return this.Bo(t,(function(t){e++})).next((function(){return e}))},t.prototype.js=function(t,e){return this.db.Fo().js(t,e)},t.prototype.Bo=function(t,e){return this.qo(t,(function(t,n){return e(n)}))},t.prototype.yh=function(t,e,n){return pn(t,n)},t.prototype.vh=function(t,e,n){return pn(t,n)},t.prototype.Ah=function(t,e,n){return this.db.Fo().Ah(t,e,n)},t.prototype.Uo=function(t,e){return pn(t,e)},t.prototype.Qo=function(t,e){return function(t,e){var n=!1;return mn(t).Wo((function(r){return fn(t,r,e).next((function(t){return t&&(n=!0),Ne.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.jo=function(t,e){var n=this,r=this.db.No().Yr(),i=[],o=0;return this.qo(t,(function(s,a){if(a<=e){var u=n.Qo(t,s).next((function(e){if(!e)return o++,r.xn(t,s).next((function(){return r.Mn(s),nn(t).delete([0,je(s.path)])}))}));i.push(u)}})).next((function(){return Ne.vn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Ie(t.Oh);return this.db.Fo().Ih(t,n)},t.prototype.Ko=function(t,e){return pn(t,e)},t.prototype.qo=function(t,e){var n,r=nn(t),i=Le.dr;return r.Ur({index:Nn.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Le.dr&&e(new E(ze(n)),i),i=s,n=o):i=Le.dr})).next((function(){i!==Le.dr&&e(new E(ze(n)),i)}))},t.prototype.Go=function(t){return this.db.No().Zr(t)},t}();function pn(t,e){return nn(t).put(function(t,e){return new Nn(0,je(t.path),e)}(e,t.Oh))}var ln=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.jn=n,this.hh=r,this.zo={}}return t.Co=function(e,n,r,i){return ve(""!==e.uid),new t(e.t()?e.uid:"",n,r,i)},t.prototype.Ho=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gn(t).Ur({index:On.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Yo=function(t,e,n,r){var i=this,o=bn(t),s=gn(t);return s.add({}).next((function(a){ve("number"==typeof a);for(var u=new Te(a,e,n,r),c=i.serializer.Mh(i.userId,u),h=[],p=new qt((function(t,e){return we(t.j(),e.j())})),l=0,f=r;l<f.length;l++){var d=f[l],g=Pn.key(i.userId,d.key.path,a);p=p.add(d.key.path.$()),h.push(s.put(c)),h.push(o.put(g,Pn.PLACEHOLDER))}return p.forEach((function(e){h.push(i.jn.Dr(t,e))})),t.qn((function(){i.zo[a]=u.keys()})),Ne.vn(h).next((function(){return u}))}))},t.prototype.Jo=function(t,e){var n=this;return gn(t).get(e).next((function(t){return t?(ve(t.userId===n.userId),n.serializer.xh(t)):null}))},t.prototype.Xo=function(t,e){var n=this;return this.zo[e]?Ne.resolve(this.zo[e]):this.Jo(t,e).next((function(t){if(t){var r=t.keys();return n.zo[e]=r,r}return null}))},t.prototype.Zo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return gn(t).Ur({index:On.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(ve(e.batchId>=r),o=n.serializer.xh(e)),i.done()})).next((function(){return o}))},t.prototype.ta=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return gn(t).Ur({index:On.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.ea=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gn(t).Fr(On.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.xh(t)}))}))},t.prototype.Gn=function(t,e){var n=this,r=Pn.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return bn(t).Ur({range:i},(function(r,i,s){var a=r[0],u=r[2],c=ze(r[1]);if(a===n.userId&&e.path.isEqual(c))return gn(t).get(u).next((function(t){if(!t)throw ye();ve(t.userId===n.userId),o.push(n.serializer.xh(t))}));s.done()})).next((function(){return o}))},t.prototype.Xn=function(t,e){var n=this,r=new qt(we),i=[];return e.forEach((function(e){var o=Pn.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=bn(t).Ur({range:s},(function(t,i,o){var s=t[0],a=t[2],u=ze(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),Ne.vn(i).next((function(){return n.sa(t,r)}))},t.prototype.nr=function(t,e){var n=this,r=e.path,i=r.length+1,o=Pn.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new qt(we);return bn(t).Ur({range:s},(function(t,e,o){var s=t[0],u=t[2],c=ze(t[1]);s===n.userId&&r.q(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.sa(t,a)}))},t.prototype.sa=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(gn(t).get(e).next((function(t){if(null===t)throw ye();ve(t.userId===n.userId),r.push(n.serializer.xh(t))})))})),Ne.vn(i).next((function(){return r}))},t.prototype.ia=function(t,e){var n=this;return dn(t.$h,this.userId,e).next((function(r){return t.qn((function(){n.na(e.batchId)})),Ne.forEach(r,(function(e){return n.hh.Uo(t,e)}))}))},t.prototype.na=function(t){delete this.zo[t]},t.prototype.ra=function(t){var e=this;return this.Ho(t).next((function(n){if(!n)return Ne.resolve();var r=IDBKeyRange.lowerBound(Pn.prefixForUser(e.userId)),i=[];return bn(t).Ur({range:r},(function(t,n,r){if(t[0]===e.userId){var o=ze(t[1]);i.push(o)}else r.done()})).next((function(){ve(0===i.length)}))}))},t.prototype.Ch=function(t,e){return fn(t,this.userId,e)},t.prototype.ha=function(t){var e=this;return mn(t).get(this.userId).next((function(t){return t||new wn(e.userId,-1,"")}))},t}();function fn(t,e,n){var r=Pn.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return bn(t).Ur({range:o,Dh:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function dn(t,e,n){var r=t.store(On.store),i=t.store(Pn.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ur({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){ve(1===a)})));for(var c=[],h=0,p=n.mutations;h<p.length;h++){var l=p[h],f=Pn.key(e,l.key.path,n.batchId);o.push(i.delete(f)),c.push(l.key)}return Ne.vn(o).next((function(){return c}))}function gn(t){return an.Nr(t,On.store)}function bn(t){return an.Nr(t,Pn.store)}function mn(t){return an.Nr(t,wn.store)}var yn=10,vn=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;ve(n<r&&n>=0&&r<=yn);var o=new Un(e);n<1&&r>=1&&(function(t){t.createObjectStore(_n.store)}(t),function(t){t.createObjectStore(wn.store,{keyPath:wn.keyPath}),t.createObjectStore(On.store,{keyPath:On.keyPath,autoIncrement:!0}).createIndex(On.userMutationsIndex,On.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Pn.store)}(t),kn(t),function(t){t.createObjectStore(Mn.store)}(t));var s=Ne.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Nn.store),t.deleteObjectStore(In.store),t.deleteObjectStore(An.store)}(t),kn(t)),s=s.next((function(){return function(t){var e=t.store(An.store),n=new An(0,0,x.min().C(),0);return e.put(An.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(On.store).Fr().next((function(n){t.deleteObjectStore(On.store),t.createObjectStore(On.store,{keyPath:On.keyPath,autoIncrement:!0}).createIndex(On.userMutationsIndex,On.userMutationsKeyPath,{unique:!0});var r=e.store(On.store),i=n.map((function(t){return r.put(t)}));return Ne.vn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Dn.store,{keyPath:Dn.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Tn.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Mn.store);e.createIndex(Mn.readTimeIndex,Mn.readTimeIndexPath,{unique:!1}),e.createIndex(Mn.collectionReadTimeIndex,Mn.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Mn.store).Ur((function(t,n){e+=Ye(n)})).next((function(){var n=new Tn(e);return t.store(Tn.store).put(Tn.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(wn.store),r=t.store(On.store);return n.Fr().next((function(n){return Ne.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Fr(On.userMutationsIndex,i).next((function(r){return Ne.forEach(r,(function(r){ve(r.userId===n.userId);var i=e.serializer.xh(r);return dn(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Nn.store),n=t.store(Mn.store);return t.store(An.store).get(An.key).next((function(t){var r=[];return n.Ur((function(n,i){var o=new w(n),s=function(t){return[0,je(t)]}(o);r.push(e.get(s).next((function(n){return n?Ne.resolve():function(n){return e.put(new Nn(0,je(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Ne.vn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Sn.store,{keyPath:Sn.keyPath});var n=e.store(Sn.store),r=new Ge,i=function(t){if(r.add(t)){var e=t.L(),i=t.$();return n.put({collectionId:e,parent:je(i)})}};return e.store(Mn.store).Ur({Dh:!0},(function(t,e){var n=new w(t);return i(n.$())})).next((function(){return e.store(Pn.store).Ur({Dh:!0},(function(t,e){var n=ze(t[1]);return i(n.$())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(In.store);return n.Ur((function(t,r){var i=e.serializer.mh(r),o=e.serializer.Ph(i);return n.put(o)}))},t}(),xn=function(t,e){this.seconds=t,this.nanoseconds=e},_n=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};_n.store="owner",_n.key="owner";var wn=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};wn.store="mutationQueues",wn.keyPath="userId";var On=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};On.store="mutations",On.keyPath="batchId",On.userMutationsIndex="userMutationsIndex",On.userMutationsKeyPath=["userId","batchId"];var Pn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,je(e)]},t.key=function(t,e,n){return[t,je(e),n]},t}();Pn.store="documentMutations",Pn.PLACEHOLDER=new Pn;var En=function(t,e){this.path=t,this.readTime=e},Cn=function(t,e){this.path=t,this.version=e},Mn=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Mn.store="remoteDocuments",Mn.readTimeIndex="readTimeIndex",Mn.readTimeIndexPath="readTime",Mn.collectionReadTimeIndex="collectionReadTimeIndex",Mn.collectionReadTimeIndexPath=["parentPath","readTime"];var Tn=function(t){this.byteSize=t};Tn.store="remoteDocumentGlobal",Tn.key="remoteDocumentGlobalKey";var In=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};In.store="targets",In.keyPath="targetId",In.queryTargetsIndexName="queryTargetsIndex",In.queryTargetsKeyPath=["canonicalId","targetId"];var Nn=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Nn.store="targetDocuments",Nn.keyPath=["targetId","path"],Nn.documentTargetsIndex="documentTargetsIndex",Nn.documentTargetsKeyPath=["path","targetId"];var An=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};An.key="targetGlobalKey",An.store="targetGlobal";var Sn=function(t,e){this.collectionId=t,this.parent=e};function kn(t){t.createObjectStore(Nn.store,{keyPath:Nn.keyPath}).createIndex(Nn.documentTargetsIndex,Nn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(In.store,{keyPath:In.keyPath}).createIndex(In.queryTargetsIndexName,In.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(An.store)}Sn.store="collectionParents",Sn.keyPath=["collectionId","parent"];var Dn=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Dn.store="clientMetadata",Dn.keyPath="clientId";var Rn=i.__spreadArrays(i.__spreadArrays(i.__spreadArrays([wn.store,On.store,Pn.store,Mn.store,In.store,_n.store,An.store,Nn.store],[Dn.store]),[Tn.store]),[Sn.store]),Ln=function(){function t(e){this.db=e,12.2===t.oa(a.getUA())&&be("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.Zh=function(e,n,r){return ge("SimpleDb","Opening database:",e),new Ne((function(i,o){var s=indexedDB.open(e,n);s.onsuccess=function(e){i(new t(e.target.result))},s.onblocked=function(){o(new f(l.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;o("VersionError"===e.name?new f(l.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},s.onupgradeneeded=function(t){ge("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion),r.createOrUpgrade(t.target.result,s.transaction,t.oldVersion,yn).next((function(){ge("SimpleDb","Database upgrade to version "+yn+" complete")}))}})).yn()},t.delete=function(t){return ge("SimpleDb","Removing database:",t),zn(window.indexedDB.deleteDatabase(t)).yn()},t.zh=function(){if("undefined"==typeof indexedDB)return!1;if(t.aa())return!0;var e=a.getUA(),n=t.oa(e),r=0<n&&n<10,i=t.ua(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.aa=function(){var t;return"undefined"!=typeof __PRIVATE_process&&"YES"===(null===(t=__PRIVATE_process.__PRIVATE_env)||void 0===t?void 0:t.ca)},t.Nr=function(t,e){return t.store(e)},t.oa=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.ua=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.ao=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,s,a,u;return i.__generator(this,(function(c){switch(c.label){case 0:r="readonly"===t,o=0,s=function(){var t,s,u,c,h;return i.__generator(this,(function(i){switch(i.label){case 0:++o,t=Un.open(a.db,r?"readonly":"readwrite",e),i.label=1;case 1:return i.trys.push([1,3,,4]),s=n(t).catch((function(e){return t.abort(e),Ne.reject(e)})).yn(),u={},s.catch((function(){})),[4,t._a];case 2:return[2,(u.value=(i.sent(),s),u)];case 3:return ge("SimpleDb","Transaction failed with error: %s. Retrying: %s.",(c=i.sent()).message,h="FirebaseError"!==c.name&&o<3),h?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),Vn=function(){function t(t){this.la=t,this.da=!1,this.fa=null}return Object.defineProperty(t.prototype,"Pn",{get:function(){return this.da},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Ta",{get:function(){return this.fa},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.la=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.da=!0},t.prototype.Qr=function(t){this.fa=t},t.prototype.delete=function(){return zn(this.la.delete())},t}(),qn=function(t){function e(e){var n=this;return(n=t.call(this,l.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return i.__extends(e,t),e}(f);function jn(t){return"IndexedDbTransactionError"===t.name}var Un=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.Ea=new Ve,this.transaction.oncomplete=function(){e.Ea.resolve()},this.transaction.onabort=function(){t.error?e.Ea.reject(new qn(t.error)):e.Ea.resolve()},this.transaction.onerror=function(t){var n=Gn(t.target.error);e.Ea.reject(new qn(n))}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"_a",{get:function(){return this.Ea.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.Ea.reject(t),this.aborted||(ge("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Fn(e)},t}(),Fn=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ge("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ge("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),zn(n)},t.prototype.add=function(t){return ge("SimpleDb","ADD",this.store.name,t,t),zn(this.store.add(t))},t.prototype.get=function(t){var e=this;return zn(this.store.get(t)).next((function(n){return void 0===n&&(n=null),ge("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return ge("SimpleDb","DELETE",this.store.name,t),zn(this.store.delete(t))},t.prototype.count=function(){return ge("SimpleDb","COUNT",this.store.name),zn(this.store.count())},t.prototype.Fr=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Ia(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.wa=function(t,e){ge("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Dh=!1;var r=this.cursor(n);return this.Ia(r,(function(t,e,n){return n.delete()}))},t.prototype.Ur=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Ia(r,e)},t.prototype.Wo=function(t){var e=this.cursor({});return new Ne((function(n,r){e.onerror=function(t){var e=Gn(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Ia=function(t,e){var n=[];return new Ne((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Vn(i),s=e(i.primaryKey,i.value,o);if(s instanceof Ne){var a=s.catch((function(t){return o.done(),Ne.reject(t)}));n.push(a)}o.Pn?r():null===o.Ta?i.continue():i.continue(o.Ta)}else r()}})).next((function(){return Ne.vn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Dh?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function zn(t){return new Ne((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Gn(t.target.error);n(e)}}))}var Bn=!1;function Gn(t){var e=Ln.oa(a.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new f("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Bn||(Bn=!0,setTimeout((function(){throw r}),0)),r}}return t}var Wn=function(){function t(t,e,n,r,i){this.Ra=t,this.Er=e,this.Aa=n,this.op=r,this.ma=i,this.Pa=new Ve,this.then=this.Pa.promise.then.bind(this.Pa.promise),this.Pa.promise.catch((function(t){}))}return t.Va=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.ga=setTimeout((function(){return e.pa()}),t)},t.prototype.vr=function(){return this.pa()},t.prototype.cancel=function(t){null!==this.ga&&(this.clearTimeout(),this.Pa.reject(new f(l.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.pa=function(){var t=this;this.Ra.co((function(){return null!==t.ga?(t.clearTimeout(),t.op().then((function(e){return t.Pa.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.ga&&(this.ma(this),clearTimeout(this.ga),this.ga=null)},t}(),Kn=function(){function t(){var t=this;this.ya=Promise.resolve(),this.ba=Promise.resolve(),this.va=!1,this.Sa=[],this.Da=null,this.Ca=!1,this.Fa=[],this.Na=new qe(this,"async_queue_retry"),this.ka=function(){return t.Na.br()};var e=le.nt().window;e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ka)}return Object.defineProperty(t.prototype,"Ma",{get:function(){return this.va},enumerable:!0,configurable:!0}),t.prototype.co=function(t){this.enqueue(t)},t.prototype.xa=function(t){this.$a(),this.Oa(t)},t.prototype.La=function(t){return this.$a(),this.Oa(t)},t.prototype.Ba=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:return this.$a(),this.va?[3,2]:(this.va=!0,(e=le.nt().window)&&e.removeEventListener("visibilitychange",this.ka),[4,this.La(t)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.$a(),this.va?new Promise((function(t){})):this.Oa(t)},t.prototype.lo=function(t){var e=this;this.$a(),this.va||(this.ba=this.ba.then((function(){var n=new Ve,r=function(){return i.__awaiter(e,void 0,void 0,(function(){var e;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t()];case 1:return i.sent(),n.resolve(),this.Na.reset(),[3,3];case 2:if(!jn(e=i.sent()))throw n.resolve(),e;return ge("AsyncQueue","Operation failed with retryable error: "+e),this.Na.gr(r),[3,3];case 3:return[2]}}))}))};return e.co(r),n.promise})))},t.prototype.Oa=function(t){var e=this,n=this.ya.then((function(){return e.Ca=!0,t().catch((function(t){throw e.Da=t,e.Ca=!1,be("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Ca=!1,t}))}));return this.ya=n,n},t.prototype.yr=function(t,e,n){var r=this;this.$a(),this.Fa.indexOf(t)>-1&&(e=0);var i=Wn.Va(this,t,e,n,(function(t){return r.qa(t)}));return this.Sa.push(i),i},t.prototype.$a=function(){this.Da&&ye()},t.prototype.Ua=function(){},t.prototype.Qa=function(){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.ya];case 1:e.sent(),e.label=2;case 2:if(t!==this.ya)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Wa=function(t){for(var e=0,n=this.Sa;e<n.length;e++)if(n[e].Er===t)return!0;return!1},t.prototype.ja=function(t){var e=this;return this.Qa().then((function(){e.Sa.sort((function(t,e){return t.Aa-e.Aa}));for(var n=0,r=e.Sa;n<r.length;n++){var i=r[n];if(i.vr(),"all"!==t&&i.Er===t)break}return e.Qa()}))},t.prototype.Ka=function(t){this.Fa.push(t)},t.prototype.qa=function(t){var e=this.Sa.indexOf(t);this.Sa.splice(e,1)},t}();function Xn(t,e){if(be("AsyncQueue",e+": "+t),jn(t))return new f(l.UNAVAILABLE,e+": "+t);throw t}function Qn(t,e){var n=t[1],r=e[1],i=we(t[0],e[0]);return 0===i?we(n,r):i}var $n=function(){function t(t){this.Ga=t,this.buffer=new qt(Qn),this.za=0}return t.prototype.Ha=function(){return++this.za},t.prototype.Ya=function(t){var e=[t,this.Ha()];if(this.buffer.size<this.Ga)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Qn(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Jn={Ja:!1,Xa:0,Za:0,tu:0},Yn=function(){function t(t,e,n){this.eu=t,this.su=e,this.iu=n}return t.nu=function(e){return new t(e,t.ru,t.hu)},t}();Yn.ou=-1,Yn.au=1048576,Yn.uu=41943040,Yn.ru=10,Yn.hu=1e3,Yn.cu=new Yn(Yn.uu,Yn.ru,Yn.hu),Yn.DISABLED=new Yn(Yn.ou,0,0);var Hn=function(){function t(t,e){this.$o=t,this.Ra=e,this._u=!1,this.lu=null}return t.prototype.start=function(t){this.$o.du.eu!==Yn.ou&&this.fu(t)},t.prototype.stop=function(){this.lu&&(this.lu.cancel(),this.lu=null)},Object.defineProperty(t.prototype,"ho",{get:function(){return null!==this.lu},enumerable:!0,configurable:!0}),t.prototype.fu=function(t){var e=this,n=this._u?3e5:6e4;ge("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.lu=this.Ra.yr("lru_garbage_collection",n,(function(){return i.__awaiter(e,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:this.lu=null,this._u=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Tu(this.$o)];case 2:return n.sent(),[3,7];case 3:return jn(e=n.sent())?(ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,nr(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.fu(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Zn=function(){function t(t,e){this.Eu=t,this.du=e}return t.prototype.Iu=function(t,e){return this.Eu.Oo(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.wu=function(t,e){var n=this;if(0===e)return Ne.resolve(Le.dr);var r=new $n(e);return this.Eu.js(t,(function(t){return r.Ya(t.sequenceNumber)})).next((function(){return n.Eu.Bo(t,(function(t){return r.Ya(t)}))})).next((function(){return r.maxValue}))},t.prototype.Ah=function(t,e,n){return this.Eu.Ah(t,e,n)},t.prototype.jo=function(t,e){return this.Eu.jo(t,e)},t.prototype.Ru=function(t,e){var n=this;return this.du.eu===Yn.ou?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(Jn)):this.Go(t).next((function(r){return r<n.du.eu?(ge("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.du.eu),Jn):n.Au(t,e)}))},t.prototype.Go=function(t){return this.Eu.Go(t)},t.prototype.Au=function(t,e){var n,r,i,o,a,u,c,h=this,p=Date.now();return this.Iu(t,this.du.su).next((function(e){return e>h.du.iu?(ge("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.du.iu+" from "+e),r=h.du.iu):r=e,o=Date.now(),h.wu(t,r)})).next((function(r){return n=r,a=Date.now(),h.Ah(t,n,e)})).next((function(e){return i=e,u=Date.now(),h.jo(t,n)})).next((function(t){return c=Date.now(),de()<=s.LogLevel.DEBUG&&ge("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-p)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-p)+"ms"),Ne.resolve({Ja:!0,Xa:r,Za:i,tu:t})}))},t}(),tr=function(){function t(t,e,n){this.persistence=t,this.mu=e,this.Pu=new Rt(we),this.Vu=new Me((function(t){return t.canonicalId()})),this.gu=x.min(),this.Wn=t.Do(n),this.pu=t.No(),this.Jh=t.Fo(),this.yu=new De(this.pu,this.Wn,this.persistence.ko()),this.mu.bu(this.yu)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.vu=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o=this;return i.__generator(this,(function(i){switch(i.label){case 0:return e=this.Wn,n=this.yu,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var i;return o.Wn.ea(r).next((function(s){return i=s,e=o.persistence.Do(t),n=new De(o.pu,e,o.persistence.ko()),e.ea(r)})).next((function(t){for(var e=[],o=[],s=Xt(),a=0,u=i;a<u.length;a++){var c=u[a];e.push(c.batchId);for(var h=0,p=c.mutations;h<p.length;h++)s=s.add(p[h].key)}for(var l=0,f=t;l<f.length;l++){var d=f[l];o.push(d.batchId);for(var g=0,b=d.mutations;g<b.length;g++)s=s.add(b[g].key)}return n.Yn(r,s).next((function(t){return{Su:t,Du:e,Cu:o}}))}))}))];case 1:return r=i.sent(),[2,(this.Wn=e,this.yu=n,this.mu.bu(this.yu),r)]}}))}))},t.prototype.Fu=function(t){var e,n=this,r=v.now(),i=t.reduce((function(t,e){return t.add(e.key)}),Xt());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return n.yu.Yn(o,i).next((function(i){e=i;for(var s=[],a=0,u=t;a<u.length;a++){var c=u[a],h=c.Pt(e.get(c.key));null!=h&&s.push(new ut(c.key,h,dt(h.proto.mapValue),ot.exists(!0)))}return n.Wn.Yo(o,r,s,t)}))})).then((function(t){var n=t.In(e);return{batchId:t.batchId,Dn:n}}))},t.prototype.Nu=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.pu.Yr({Xr:!0});return e.ku(n,t,i).next((function(){return i.apply(n)})).next((function(){return e.Wn.ra(n)})).next((function(){return e.yu.Yn(n,r)}))}))},t.prototype.Mu=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.Wn.Jo(n,t).next((function(t){return ve(null!==t),r=t.keys(),e.Wn.ia(n,t)})).next((function(){return e.Wn.ra(n)})).next((function(){return e.yu.Yn(n,r)}))}))},t.prototype.ta=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Wn.ta(e)}))},t.prototype._h=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Jh._h(e)}))},t.prototype.xu=function(e){var n=this,r=e.Ee,i=this.Pu;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(o){var s=n.pu.Yr({Xr:!0});i=n.Pu;var a=[];e.as.forEach((function(e,s){var u=i.get(s);if(u){a.push(n.Jh.bh(o,e.Is,s).next((function(){return n.Jh.ph(o,e.Ts,s)})));var c=e.resumeToken;if(c.rt()>0){var h=u.we(c,r).Ie(o.Oh);i=i.Ae(s,h),t.$u(u,h,e)&&a.push(n.Jh.Ih(o,h))}}}));var u=Ft(),c=Xt();if(e.cs.forEach((function(t,e){c=c.add(t)})),a.push(s.getEntries(o,c).next((function(t){e.cs.forEach((function(i,c){var h=t.get(i);c instanceof vt&&c.version.isEqual(x.min())?(s.Mn(i,r),u=u.Ae(i,c)):null==h||c.version.S(h.version)>0||0===c.version.S(h.version)&&h.hasPendingWrites?(s.Nn(c,r),u=u.Ae(i,c)):ge("LocalStore","Ignoring outdated watch update for ",i,". Current version:",h.version," Watch version:",c.version),e._s.has(i)&&a.push(n.persistence.hh.Ko(o,i))}))}))),!r.isEqual(x.min())){var h=n.Jh._h(o).next((function(t){return n.Jh.dh(o,o.Oh,r)}));a.push(h)}return Ne.vn(a).next((function(){return s.apply(o)})).next((function(){return n.yu.Jn(o,u)}))})).then((function(t){return n.Pu=i,t}))},t.$u=function(t,e,n){return ve(e.resumeToken.rt()>0),0===t.resumeToken.rt()||e.Ee.D()-t.Ee.D()>=this.Ou||n.Ts.size+n.Es.size+n.Is.size>0},t.prototype.Lu=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,s,a,u,c=this;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ne.forEach(t,(function(t){return Ne.forEach(t.hr,(function(n){return c.persistence.hh.yh(e,t.targetId,n)})).next((function(){return Ne.forEach(t.or,(function(n){return c.persistence.hh.vh(e,t.targetId,n)}))}))}))}))];case 1:return i.sent(),[3,3];case 2:if(!jn(e=i.sent()))throw e;return ge("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=t;n<r.length;n++)s=(o=r[n]).targetId,o.fromCache||(a=this.Pu.get(s),u=a.Re(a.Ee),this.Pu=this.Pu.Ae(s,u));return[2]}}))}))},t.prototype.Bu=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.Wn.Zo(n,t)}))},t.prototype.qu=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.yu.Kn(n,t)}))},t.prototype.Uu=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.Jh.gh(n,t).next((function(i){return i?Ne.resolve(r=i):e.Jh.oh(n).next((function(i){return r=new At(t,i,0,n.Oh),e.Jh.fh(n,r).next((function(){return r}))}))}))})).then((function(n){var r=e.Pu.get(n.targetId);return(null===r||n.Ee.S(r.Ee)>0)&&(e.Pu=e.Pu.Ae(n.targetId,n),e.Vu.set(t,n.targetId)),n}))},t.prototype.gh=function(t,e){var n=this.Vu.get(e);return void 0!==n?Ne.resolve(this.Pu.get(n)):this.Jh.gh(t,e)},t.prototype.Qu=function(t,e){var n=this,r=this.Pu.get(t);return this.persistence.runTransaction("Release target",e?"readwrite":"readwrite-primary",(function(t){return e?Ne.resolve():n.persistence.hh.removeTarget(t,r)})).then((function(){n.Pu=n.Pu.remove(t),n.Vu.delete(r.target)}))},t.prototype.Wu=function(t,e){var n=this,r=x.min(),i=Xt();return this.persistence.runTransaction("Execute query","readonly",(function(o){return n.gh(o,t.ee()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Jh.Sh(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.mu.Zn(o,t,e?r:x.min(),e?i:Xt())})).next((function(t){return{documents:t,ju:i}}))}))},t.prototype.ku=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=Ne.resolve();return o.forEach((function(r){s=s.next((function(){return n.xn(t,r)})).next((function(t){var o=t,s=e.Rn.get(r);ve(null!==s),(!o||o.version.S(s)<0)&&(o=i.at(r,o,e))&&n.Nn(o,e.wn)}))})),s.next((function(){return r.Wn.ia(t,i)}))},t.prototype.Tu=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Ru(n,e.Pu)}))},t}();tr.Ou=3e8;var er=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).persistence=e,i.Wn=e.Do(r),i.pu=e.No(),i.Jh=e.Fo(),i}return i.__extends(e,t),e.prototype.start=function(){return this.Ku()},e.prototype.Gu=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.Wn.Xo(n,t).next((function(t){return t?e.yu.Yn(n,t):Ne.resolve(null)}))}))},e.prototype.zu=function(t){this.Wn.na(t)},e.prototype.uo=function(t){this.persistence.uo(t)},e.prototype.So=function(){return this.persistence.So()},e.prototype.Hu=function(t){var e=this,n=this.Pu.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.Jh.si(n,t).next((function(t){return t?t.target:null}))}))},e.prototype.Kr=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.pu.Kr(e,t.gu)})).then((function(e){var n=e.Gr;return t.gu=e.readTime,n}))},e.prototype.Ku=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.pu.Hr(t)}))];case 1:return t.gu=n.sent(),[2]}}))}))},e}(tr);function nr(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){if(t.code!==l.FAILED_PRECONDITION||t.message!==Se)throw t;return ge("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var rr=function(){function t(){this.Yu=new qt(ir.Ju),this.Xu=new qt(ir.Zu)}return t.prototype.B=function(){return this.Yu.B()},t.prototype.yh=function(t,e){var n=new ir(t,e);this.Yu=this.Yu.add(n),this.Xu=this.Xu.add(n)},t.prototype.tc=function(t,e){var n=this;t.forEach((function(t){return n.yh(t,e)}))},t.prototype.vh=function(t,e){this.ec(new ir(t,e))},t.prototype.sc=function(t,e){var n=this;t.forEach((function(t){return n.vh(t,e)}))},t.prototype.ic=function(t){var e=this,n=E.EMPTY,r=new ir(n,t),i=new ir(n,t+1),o=[];return this.Xu.Ke([r,i],(function(t){e.ec(t),o.push(t.key)})),o},t.prototype.nc=function(){var t=this;this.Yu.forEach((function(e){return t.ec(e)}))},t.prototype.ec=function(t){this.Yu=this.Yu.delete(t),this.Xu=this.Xu.delete(t)},t.prototype.rc=function(t){var e=E.EMPTY,n=new ir(e,t),r=new ir(e,t+1),i=Xt();return this.Xu.Ke([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Ch=function(t){var e=new ir(t,0),n=this.Yu.ze(e);return null!==n&&t.isEqual(n.key)},t}(),ir=function(){function t(t,e){this.key=t,this.hc=e}return t.Ju=function(t,e){return E.N(t.key,e.key)||we(t.hc,e.hc)},t.Zu=function(t,e){return we(t.hc,e.hc)||E.N(t.key,e.key)},t}();function or(t,e){if(0!==e.length)throw new f(l.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Or(e.length,"argument")+".")}function sr(t,e,n){if(e.length!==n)throw new f(l.INVALID_ARGUMENT,"Function "+t+"() requires "+Or(n,"argument")+", but was called with "+Or(e.length,"argument")+".")}function ar(t,e,n){if(e.length<n)throw new f(l.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Or(n,"argument")+", but was called with "+Or(e.length,"argument")+".")}function ur(t,e,n,r){if(e.length<n||e.length>r)throw new f(l.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Or(e.length,"argument")+".")}function cr(t,e,n,r){gr(t,e,wr(n)+" argument",r)}function hr(t,e,n,r){void 0!==r&&cr(t,e,n,r)}function pr(t,e,n,r){gr(t,e,n+" option",r)}function lr(t,e,n,r){void 0!==r&&pr(t,e,n,r)}function fr(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(mr(u))}var c=mr(r);throw new f(l.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function dr(t,e,n,r){if(!e.some((function(t){return t===r})))throw new f(l.INVALID_ARGUMENT,"Invalid value "+mr(r)+" provided to function "+t+"() for its "+wr(n)+" argument. Acceptable values: "+e.join(", "));return r}function gr(t,e,n,r){if(!("object"===e?br(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=mr(r);throw new f(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function br(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function mr(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ye()}function yr(t,e,n){if(void 0===n)throw new f(l.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+wr(e)+" argument, but it was undefined.")}function vr(t,e,n){M(e,(function(e,r){if(n.indexOf(e)<0)throw new f(l.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function xr(t,e,n,r){var i=mr(r);return new f(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+wr(n)+" argument to be a "+e+", but it was: "+i)}function _r(t,e,n){if(n<=0)throw new f(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+wr(e)+" argument to be a positive number, but it was: "+n+".")}function wr(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Or(t,e){return t+" "+e+(1===t?"":"s")}function Pr(){if("undefined"==typeof Uint8Array)throw new f(l.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Er(){if(!le.nt().oc)throw new f(l.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Cr=function(){function t(t){Er(),this.ac=t}return t.fromBase64String=function(e){sr("Blob.fromBase64String",arguments,1),cr("Blob.fromBase64String","string",1,e),Er();try{return new t(I.fromBase64String(e))}catch(e){throw new f(l.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(sr("Blob.fromUint8Array",arguments,1),Pr(),!(e instanceof Uint8Array))throw xr("Blob.fromUint8Array","Uint8Array",1,e);return new t(I.fromUint8Array(e))},t.prototype.toBase64=function(){return sr("Blob.toBase64",arguments,0),Er(),this.ac.toBase64()},t.prototype.toUint8Array=function(){return sr("Blob.toUint8Array",arguments,0),Pr(),this.ac.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.ac.isEqual(t.ac)},t}(),Mr=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new f(l.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Or(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(cr("FieldPath","string",e,t[e]),0===t[e].length)throw new f(l.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.uc=new P(t)},Tr=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return i.__extends(e,t),e.documentId=function(){return e.cc},e.prototype.isEqual=function(t){if(!(t instanceof e))throw xr("isEqual","FieldPath",1,t);return this.uc.isEqual(t.uc)},e}(Mr);Tr.cc=new Tr(P.J().j());var Ir=new RegExp("[~\\*/\\[\\]]"),Nr=function(){this._c=this},Ar=function(t){function e(e){var n=this;return(n=t.call(this)||this).lc=e,n}return i.__extends(e,t),e.prototype.dc=function(t){if(2!==t.fc)throw t.Tc(1===t.fc?this.lc+"() can only appear at the top level of your update data":this.lc+"() cannot be used with set() unless you pass {merge:true}");return t.Vt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Nr),Sr=function(t){function e(e){var n=this;return(n=t.call(this)||this).lc=e,n}return i.__extends(e,t),e.prototype.dc=function(t){return new rt(t.path,Y.instance)},e.prototype.isEqual=function(t){return t instanceof e},e}(Nr),kr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).lc=e,r.Ec=n,r}return i.__extends(e,t),e.prototype.dc=function(t){var e=new Gr({fc:3,methodName:this.lc,Ic:!0},t.ii,t.serializer,t.ignoreUndefinedProperties),n=this.Ec.map((function(t){return Kr(t,e)})),r=new H(n);return new rt(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Nr),Dr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).lc=e,r.Ec=n,r}return i.__extends(e,t),e.prototype.dc=function(t){var e=new Gr({fc:3,methodName:this.lc,Ic:!0},t.ii,t.serializer,t.ignoreUndefinedProperties),n=this.Ec.map((function(t){return Kr(t,e)})),r=new Z(n);return new rt(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Nr),Rr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).lc=e,r.wc=n,r}return i.__extends(e,t),e.prototype.dc=function(t){var e=new Gr({fc:3,methodName:this.lc},t.ii,t.serializer,t.ignoreUndefinedProperties),n=Kr(this.wc,e),r=new tt(t.serializer,n);return new rt(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Nr),Lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.delete=function(){return or("FieldValue.delete",arguments),new Vr(new Ar("FieldValue.delete"))},e.serverTimestamp=function(){return or("FieldValue.serverTimestamp",arguments),new Vr(new Sr("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ar("FieldValue.arrayUnion",arguments,1),new Vr(new kr("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ar("FieldValue.arrayRemove",arguments,1),new Vr(new Dr("FieldValue.arrayRemove",t))},e.increment=function(t){return cr("FieldValue.increment","number",1,t),sr("FieldValue.increment",arguments,1),new Vr(new Rr("FieldValue.increment",t))},e}(Nr),Vr=function(t){function e(e){var n=this;return(n=t.call(this)||this)._c=e,n.lc=e.lc,n}return i.__extends(e,t),e.prototype.dc=function(t){return this._c.dc(t)},e.prototype.isEqual=function(t){return t instanceof e&&this._c.isEqual(t._c)},e}(Lr),qr=function(){function t(t,e){if(sr("GeoPoint",arguments,2),cr("GeoPoint","number",1,t),cr("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new f(l.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new f(l.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Rc=t,this.Ac=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Rc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.Ac},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.Rc===t.Rc&&this.Ac===t.Ac},t.prototype.p=function(t){return we(this.Rc,t.Rc)||we(this.Ac,t.Ac)},t}(),jr=/^__.*__$/,Ur=function(t,e,n){this.mc=t,this.Pc=e,this.Vc=n},Fr=function(){function t(t,e,n){this.data=t,this.Vt=e,this.fieldTransforms=n}return t.prototype.gc=function(t,e){var n=[];return n.push(null!==this.Vt?new ut(t,this.data,this.Vt,e):new at(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new ct(t,this.fieldTransforms)),n},t}(),zr=function(){function t(t,e,n){this.data=t,this.Vt=e,this.fieldTransforms=n}return t.prototype.gc=function(t,e){var n=[new ut(t,this.data,this.Vt,e)];return this.fieldTransforms.length>0&&n.push(new ct(t,this.fieldTransforms)),n},t}();function Br(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}var Gr=function(){function t(t,e,n,r,i,o){this.settings=t,this.ii=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.pc(),this.fieldTransforms=i||[],this.Vt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fc",{get:function(){return this.settings.fc},enumerable:!0,configurable:!0}),t.prototype.yc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.ii,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Vt)},t.prototype.bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.yc({path:n,Ic:!1});return r.vc(t),r},t.prototype.Sc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.yc({path:n,Ic:!1});return r.pc(),r},t.prototype.Dc=function(t){return this.yc({path:void 0,Ic:!0})},t.prototype.Tc=function(t){var e=!this.path||this.path.B()?"":" (found in field "+this.path.toString()+")";return new f(l.INVALID_ARGUMENT,"Function "+this.settings.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.Vt.find((function(e){return t.q(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.q(e.field)}))},t.prototype.pc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.vc(this.path.get(t))},t.prototype.vc=function(t){if(0===t.length)throw this.Tc("Document fields must not be empty");if(Br(this.fc)&&jr.test(t))throw this.Tc('Document fields cannot begin and end with "__"')},t}(),Wr=function(){function t(t,e,n){this.ii=t,this.ignoreUndefinedProperties=e,this.serializer=n||le.nt().Cc(t)}return t.prototype.Fc=function(t,e,n){void 0===n&&(n={});var r=this.Nc(n.merge||n.mergeFields?2:0,t);$r("Data must be an object, but it was:",r,e);var i,o,s=Xr(e,r);if(n.merge)i=new nt(r.Vt),o=r.fieldTransforms;else if(n.mergeFields){for(var a=[],u=0,c=n.mergeFields;u<c.length;u++){var h=c[u],p=void 0;if(h instanceof Mr)p=h.uc;else{if("string"!=typeof h)throw ye();p=Yr(t,h)}if(!r.contains(p))throw new f(l.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Hr(a,p)||a.push(p)}i=new nt(a),o=r.fieldTransforms.filter((function(t){return i.dt(t.field)}))}else i=null,o=r.fieldTransforms;return new Fr(new lt(s),i,o)},t.prototype.kc=function(t,e){var n=this.Nc(1,t);$r("Data must be an object, but it was:",n,e);var r=[],i=new ft;M(e,(function(e,o){var s=Yr(t,e),a=n.Sc(s);if(o instanceof Nr&&o._c instanceof Ar)r.push(s);else{var u=Kr(o,a);null!=u&&(r.push(s),i.set(s,u))}}));var o=new nt(r);return new zr(i.yt(),o,n.fieldTransforms)},t.prototype.Mc=function(t,e,n,r){var i=this.Nc(1,t),o=[Jr(t,e)],s=[n];if(r.length%2!=0)throw new f(l.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(Jr(t,r[a])),s.push(r[a+1]);for(var u=[],c=new ft,h=o.length-1;h>=0;--h)if(!Hr(u,o[h])){var p=o[h],d=s[h],g=i.Sc(p);if(d instanceof Nr&&d._c instanceof Ar)u.push(p);else{var b=Kr(d,g);null!=b&&(u.push(p),c.set(p,b))}}var m=new nt(u);return new zr(c.yt(),m,i.fieldTransforms)},t.prototype.Nc=function(t,e){return new Gr({fc:t,methodName:e,path:P.G,Ic:!1},this.ii,this.serializer,this.ignoreUndefinedProperties)},t.prototype.xc=function(t,e,n){return void 0===n&&(n=!1),Kr(e,this.Nc(n?4:3,t))},t}();function Kr(t,e){if(Qr(t))return $r("Unsupported field value:",e,t),Xr(t,e);if(t instanceof Nr)return function(t,e){if(!Br(e.fc))throw e.Tc(t.lc+"() can only be used with update() and set()");if(!e.path)throw e.Tc(t.lc+"() is not currently supported inside arrays");var n=t.dc(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Vt.push(e.path),t instanceof Array){if(e.settings.Ic&&4!==e.fc)throw e.Tc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Kr(o[i],e.Dc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return e.serializer.ai(t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=v.fromDate(t);return{timestampValue:e.serializer.C(n)}}if(t instanceof v){var r=new v(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:e.serializer.C(r)}}if(t instanceof qr)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Cr)return{bytesValue:e.serializer.ui(t)};if(t instanceof Ur){var i=e.ii,o=t.mc;if(!o.isEqual(i))throw e.Tc("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:e.serializer._i(t.Pc.path,t.mc)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Tc("Unsupported field value: "+mr(t))}(t,e)}function Xr(t,e){var n={};return T(t)?e.path&&e.path.length>0&&e.Vt.push(e.path):M(t,(function(t,r){var i=Kr(r,e.bc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Qr(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof v||t instanceof qr||t instanceof Cr||t instanceof Ur||t instanceof Nr)}function $r(t,e,n){if(!Qr(n)||!br(n)){var r=mr(n);throw e.Tc("an object"===r?t+" a custom object":t+" "+r)}}function Jr(t,e){if(e instanceof Mr)return e.uc;if("string"==typeof e)return Yr(t,e);throw new f(l.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Yr(t,e){try{return function(t){if(t.search(Ir)>=0)throw new f(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Tr.bind.apply(Tr,i.__spreadArrays([void 0],t.split("."))))}catch(i){throw new f(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).uc}catch(e){var n=(r=e)instanceof Error?r.message:r.toString();throw new f(l.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}var r}function Hr(t,e){return t.some((function(t){return t.isEqual(e)}))}var Zr=function(){function t(t,e,n,r,i,o){this.Tr=t,this.$c=n,this.Oc=r,this.Lc=i,this.listener=o,this.state=0,this.Bc=0,this.qc=null,this.stream=null,this.Na=new qe(t,e)}return t.prototype.Uc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Qc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Wc()},t.prototype.stop=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Uc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.jc=function(){this.state=0,this.Na.reset()},t.prototype.Kc=function(){var t=this;this.Qc()&&null===this.qc&&(this.qc=this.Tr.yr(this.$c,6e4,(function(){return t.Gc()})))},t.prototype.zc=function(t){this.Hc(),this.stream.send(t)},t.prototype.Gc=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.Qc()?[2,this.close(0)]:[2]}))}))},t.prototype.Hc=function(){this.qc&&(this.qc.cancel(),this.qc=null)},t.prototype.close=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return this.Hc(),this.Na.cancel(),this.Bc++,3!==t?this.Na.reset():e&&e.code===l.RESOURCE_EXHAUSTED?(be(e.toString()),be("Using maximum backoff delay to prevent overloading the backend."),this.Na.Vr()):e&&e.code===l.UNAUTHENTICATED&&this.Lc._(),null!==this.stream&&(this.Yc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Jc(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Yc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.Xc(this.Bc),n=this.Bc;this.Lc.getToken().then((function(e){t.Bc===n&&t.Zc(e)}),(function(n){e((function(){var e=new f(l.UNKNOWN,"Fetching auth token failed: "+n.message);return t.t_(e)}))}))},t.prototype.Zc=function(t){var e=this,n=this.Xc(this.Bc);this.stream=this.e_(t),this.stream.s_((function(){n((function(){return e.state=2,e.listener.s_()}))})),this.stream.Jc((function(t){n((function(){return e.t_(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Wc=function(){var t=this;this.state=4,this.Na.gr((function(){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.t_=function(t){return ge("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.Xc=function(t){var e=this;return function(n){e.Tr.co((function(){return e.Bc===t?n():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),ti=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return i.__extends(e,t),e.prototype.e_=function(t){return this.Oc.i_("Listen",t)},e.prototype.onMessage=function(t){this.Na.reset();var e=this.serializer.pi(t),n=this.serializer.bi(t);return this.listener.n_(e,n)},e.prototype.r_=function(t){var e={};e.database=this.serializer.wi,e.addTarget=this.serializer.ee(t);var n=this.serializer.zi(t);n&&(e.labels=n),this.zc(e)},e.prototype.h_=function(t){var e={};e.database=this.serializer.wi,e.removeTarget=t,this.zc(e)},e}(Zr),ei=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.o_=!1,s.lastStreamToken=I.ht,s}return i.__extends(e,t),Object.defineProperty(e.prototype,"a_",{get:function(){return this.o_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.o_=!1,this.lastStreamToken=I.ht,t.prototype.start.call(this)},e.prototype.Yc=function(){this.o_&&this.u_([])},e.prototype.e_=function(t){return this.Oc.i_("Write",t)},e.prototype.onMessage=function(t){if(ve(!!t.streamToken),this.lastStreamToken=this.serializer.ci(t.streamToken),this.o_){this.Na.reset();var e=this.serializer.$i(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.c_(n,e)}return ve(!t.writeResults||0===t.writeResults.length),this.o_=!0,this.listener.__()},e.prototype.l_=function(){var t={};t.database=this.serializer.wi,this.zc(t)},e.prototype.u_=function(t){var e=this,n={streamToken:this.serializer.ui(this.lastStreamToken),writes:t.map((function(t){return e.serializer.vi(t)}))};this.zc(n)},e}(Zr),ni=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Oc=e,i.credentials=n,i.serializer=r,i.f_=!1,i}return i.__extends(e,t),e.prototype.T_=function(){if(this.f_)throw new f(l.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.E_=function(t,e){var n=this;return this.T_(),this.credentials.getToken().then((function(r){return n.Oc.E_(t,e,r)})).catch((function(t){throw t.code===l.UNAUTHENTICATED&&n.credentials._(),t}))},e.prototype.I_=function(t,e){var n=this;return this.T_(),this.credentials.getToken().then((function(r){return n.Oc.I_(t,e,r)})).catch((function(t){throw t.code===l.UNAUTHENTICATED&&n.credentials._(),t}))},e}((function(){this.d_=void 0})),ri=function(){function t(t){this.w_=t,this.R_=new Map,this.mutations=[],this.A_=!1,this.m_=null,this.P_=new Set}return t.prototype.V_=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:if(this.g_(),this.mutations.length>0)throw new f(l.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a;return i.__generator(this,(function(i){switch(i.label){case 0:return n=xe(t),r={database:n.serializer.wi,documents:e.map((function(t){return n.serializer.fi(t)}))},[4,n.I_("BatchGetDocuments",r)];case 1:return o=i.sent(),s=new Map,o.forEach((function(t){var e=n.serializer.gi(t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());ve(!!e),a.push(e)})),a)]}}))}))}(this.w_,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof vt||t instanceof yt?n.p_(t):ye()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.gc(t,this.Rt(t))),this.P_.add(t)},t.prototype.update=function(t,e){try{this.write(e.gc(t,this.y_(t)))}catch(t){this.m_=t}this.P_.add(t)},t.prototype.delete=function(t){this.write([new ht(t,this.Rt(t))]),this.P_.add(t)},t.prototype.commit=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){switch(n.label){case 0:if(this.g_(),this.m_)throw this.m_;return t=this.R_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=new E(w.K(n));e.mutations.push(new pt(r,e.Rt(r)))})),[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r;return i.__generator(this,(function(i){switch(i.label){case 0:return n=xe(t),r={database:n.serializer.wi,writes:e.map((function(t){return n.serializer.vi(t)}))},[4,n.E_("Commit",r)];case 1:return i.sent(),[2]}}))}))}(this.w_,this.mutations)];case 1:return n.sent(),this.A_=!0,[2]}}))}))},t.prototype.p_=function(t){var e;if(t instanceof yt)e=t.version;else{if(!(t instanceof vt))throw ye();e=x.min()}var n=this.R_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new f(l.ABORTED,"Document version changed between two reads.")}else this.R_.set(t.key.toString(),e)},t.prototype.Rt=function(t){var e=this.R_.get(t.toString());return!this.P_.has(t)&&e?ot.updateTime(e):ot.ft()},t.prototype.y_=function(t){var e=this.R_.get(t.toString());if(!this.P_.has(t)&&e){if(e.isEqual(x.min()))throw new f(l.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ot.updateTime(e)}return ot.exists(!0)},t.prototype.write=function(t){this.g_(),this.mutations=this.mutations.concat(t)},t.prototype.g_=function(){},t}(),ii=function(){function t(t,e){this.Ra=t,this.b_=e,this.state="Unknown",this.v_=0,this.S_=null,this.D_=!0}return t.prototype.C_=function(){var t=this;0===this.v_&&(this.F_("Unknown"),this.S_=this.Ra.yr("online_state_timeout",1e4,(function(){return t.S_=null,t.N_("Backend didn't respond within 10 seconds."),t.F_("Offline"),Promise.resolve()})))},t.prototype.k_=function(t){"Online"===this.state?this.F_("Unknown"):(this.v_++,this.v_>=1&&(this.M_(),this.N_("Connection failed 1 times. Most recent error: "+t.toString()),this.F_("Offline")))},t.prototype.set=function(t){this.M_(),this.v_=0,"Online"===t&&(this.D_=!1),this.F_(t)},t.prototype.F_=function(t){t!==this.state&&(this.state=t,this.b_(t))},t.prototype.N_=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.D_?(be(e),this.D_=!1):ge("OnlineStateTracker",e)},t.prototype.M_=function(){null!==this.S_&&(this.S_.cancel(),this.S_=null)},t}(),oi=function(){function t(t,e,n,r,o){var s=this;this.x_=t,this.w_=e,this.Ra=n,this.O_=[],this.L_=new Map,this.B_=null,this.networkEnabled=!1,this.isPrimary=!1,this.q_=!1,this.U_=o,this.U_.Q_((function(t){n.co((function(){return i.__awaiter(s,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.W_()?(ge("RemoteStore","Restarting streams for network reachability change."),[4,this.j_()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.K_=new ii(n,r),this.G_=function(t,e,n){var r=xe(t);return new ti(e,r.Oc,r.credentials,r.serializer,n)}(this.w_,n,{s_:this.z_.bind(this),Jc:this.H_.bind(this),n_:this.Y_.bind(this)}),this.J_=function(t,e,n){var r=xe(t);return new ei(e,r.Oc,r.credentials,r.serializer,n)}(this.w_,n,{s_:this.X_.bind(this),Jc:this.Z_.bind(this),__:this.tl.bind(this),c_:this.c_.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return this.networkEnabled=!0,this.el()},t.prototype.el=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.W_()?(this.sl()?this.il():this.K_.set("Unknown"),[4,this.nl()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.disableNetwork=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.rl()];case 1:return t.sent(),this.K_.set("Offline"),[2]}}))}))},t.prototype.rl=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,this.J_.stop()];case 1:return t.sent(),[4,this.G_.stop()];case 2:return t.sent(),this.O_.length>0&&(ge("RemoteStore","Stopping write stream with "+this.O_.length+" pending writes"),this.O_=[]),this.hl(),[2]}}))}))},t.prototype.Vo=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return ge("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.rl()];case 1:return t.sent(),this.U_.Vo(),this.K_.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.L_.has(t.targetId)||(this.L_.set(t.targetId,t),this.sl()?this.il():this.G_.Qc()&&this.ol(t))},t.prototype.al=function(t){this.L_.delete(t),this.G_.Qc()&&this.ul(t),0===this.L_.size&&(this.G_.Qc()?this.G_.Kc():this.W_()&&this.K_.set("Unknown"))},t.prototype.si=function(t){return this.L_.get(t)||null},t.prototype.ei=function(t){return this.cl.ei(t)},t.prototype.ol=function(t){this.B_.Ns(t.targetId),this.G_.r_(t)},t.prototype.ul=function(t){this.B_.Ns(t),this.G_.h_(t)},t.prototype.il=function(){this.B_=new oe(this),this.G_.start(),this.K_.C_()},t.prototype.sl=function(){return this.W_()&&!this.G_.Uc()&&this.L_.size>0},t.prototype.W_=function(){return!this.q_&&this.isPrimary&&this.networkEnabled},t.prototype.hl=function(){this.B_=null},t.prototype.z_=function(){return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(e){return this.L_.forEach((function(e,n){t.ol(e)})),[2]}))}))},t.prototype.H_=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.hl(),this.sl()?(this.K_.k_(t),this.il()):this.K_.set("Unknown"),[2]}))}))},t.prototype.Y_=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:if(this.K_.set("Online"),!(t instanceof re&&2===t.state&&t.cause))return[3,6];i.label=1;case 1:return i.trys.push([1,3,,5]),[4,this._l(t)];case 2:return i.sent(),[3,5];case 3:return n=i.sent(),ge("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.ll(n)];case 4:return i.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof ee?this.B_.qs(t):t instanceof ne?this.B_.Hs(t):this.B_.Ws(t),e.isEqual(x.min()))return[3,13];i.label=7;case 7:return i.trys.push([7,11,,13]),[4,this.x_._h()];case 8:return r=i.sent(),e.S(r)>=0?[4,this.dl(e)]:[3,10];case 9:i.sent(),i.label=10;case 10:return[3,13];case 11:return ge("RemoteStore","Failed to raise snapshot:",o=i.sent()),[4,this.ll(o)];case 12:return i.sent(),[3,13];case 13:return[2]}}))}))},t.prototype.ll=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(r){switch(r.label){case 0:if(!jn(t))throw t;return this.q_=!0,[4,this.rl()];case 1:return r.sent(),this.K_.set("Offline"),e||(e=function(){return n.x_._h()}),this.Ra.lo((function(){return i.__awaiter(n,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return ge("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.q_=!1,[4,this.el()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.fl=function(t){var e=this;return t().catch((function(n){return e.ll(n,t)}))},t.prototype.dl=function(t){var e=this,n=this.B_.Xs(t);return n.as.forEach((function(n,r){if(n.resumeToken.rt()>0){var i=e.L_.get(r);i&&e.L_.set(r,i.we(n.resumeToken,t))}})),n.us.forEach((function(t){var n=e.L_.get(t);if(n){e.L_.set(t,n.we(I.ht,n.Ee)),e.ul(t);var r=new At(n.target,t,1,n.sequenceNumber);e.ol(r)}})),this.cl.xu(n)},t.prototype._l=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:e=t.cause,n=0,r=t.targetIds,i.label=1;case 1:return n<r.length?this.L_.has(o=r[n])?[4,this.cl.Tl(o,e)]:[3,3]:[3,5];case 2:i.sent(),this.L_.delete(o),this.B_.removeTarget(o),i.label=3;case 3:i.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},t.prototype.nl=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e,n;return i.__generator(this,(function(r){switch(r.label){case 0:t=this.O_.length>0?this.O_[this.O_.length-1].batchId:-1,r.label=1;case 1:if(!this.El())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,this.x_.Bu(t)];case 3:return null===(e=r.sent())?(0===this.O_.length&&this.J_.Kc(),[3,7]):(t=e.batchId,this.Il(e),[3,6]);case 4:return n=r.sent(),[4,this.ll(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.wl()&&this.Rl(),[2]}}))}))},t.prototype.El=function(){return this.W_()&&this.O_.length<10},t.prototype.Al=function(){return this.O_.length},t.prototype.Il=function(t){this.O_.push(t),this.J_.Qc()&&this.J_.a_&&this.J_.u_(t.mutations)},t.prototype.wl=function(){return this.W_()&&!this.J_.Uc()&&this.O_.length>0},t.prototype.Rl=function(){this.J_.start()},t.prototype.X_=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.J_.l_(),[2]}))}))},t.prototype.tl=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e;return i.__generator(this,(function(n){for(t=0,e=this.O_;t<e.length;t++)this.J_.u_(e[t].mutations);return[2]}))}))},t.prototype.c_=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o=this;return i.__generator(this,(function(i){switch(i.label){case 0:return n=this.O_.shift(),r=Ie.from(n,t,e),[4,this.fl((function(){return o.cl.ml(r)}))];case 1:return i.sent(),[4,this.nl()];case 2:return i.sent(),[2]}}))}))},t.prototype.Z_=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return t&&this.J_.a_?[4,this.Pl(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.wl()&&this.Rl(),[2]}}))}))},t.prototype.Pl=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return i.__generator(this,(function(i){switch(i.label){case 0:return kt(n=t.code)&&n!==l.ABORTED?(e=this.O_.shift(),this.J_.jc(),[4,this.fl((function(){return r.cl.Vl(e.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,this.nl()];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.gl=function(){return new ri(this.w_)},t.prototype.j_=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.rl()];case 1:return t.sent(),this.K_.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.pl=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.W_()?(ge("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.j_()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.yl=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:[4,this.rl()];case 3:e.sent(),this.K_.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();function si(t,e){return"firestore_clients_"+t+"_"+e}function ai(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.t()&&(r+="_"+e.uid),r}function ui(t,e){return"firestore_targets_"+t+"_"+e}var ci=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.bl=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new f(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(be("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.vl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),hi=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.bl=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new f(r.error.code,r.error.message)),i?new t(e,r.state,o):(be("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.vl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),pi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.bl=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=$t(),s=0;i&&s<r.activeTargetIds.length;++s)i=S(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(be("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),li=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.bl=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(be("SharedClientState","Failed to parse online state: "+e),null)},t}(),fi=function(){function t(){this.activeTargetIds=$t()}return t.prototype.Sl=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Dl=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.vl=function(){var t={activeTargetIds:this.activeTargetIds.W(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),di=function(){function t(e,n,r,i,o){if(this.Tr=e,this.platform=n,this.persistenceKey=r,this.Cl=i,this.cl=null,this.b_=null,this.ur=null,this.Fl=this.Nl.bind(this),this.kl=new Rt(we),this.ho=!1,this.Ml=[],!t.zh(this.platform))throw new f(l.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.xl=si(this.persistenceKey,this.Cl),this.$l=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.kl=this.kl.Ae(this.Cl,new fi),this.Ol=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Ll=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.Bl=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.ql=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.Fl)}return t.zh=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,o,s,a,u,c,h,p=this;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.cl.So()];case 1:for(t=i.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Cl&&(o=this.getItem(si(this.persistenceKey,r)))&&(s=pi.bl(r,o))&&(this.kl=this.kl.Ae(s.clientId,s));for(this.Ul(),(a=this.storage.getItem(this.ql))&&(u=this.Ql(a))&&this.Wl(u),c=0,h=this.Ml;c<h.length;c++)this.Nl(h[c]);return this.Ml=[],this.platform.window.addEventListener("unload",(function(){return p.Vo()})),this.ho=!0,[2]}}))}))},t.prototype.lr=function(t){this.setItem(this.$l,JSON.stringify(t))},t.prototype.jl=function(){return this.Kl(this.kl)},t.prototype.Gl=function(t){var e=!1;return this.kl.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.zl=function(t){this.Hl(t,"pending")},t.prototype.Yl=function(t,e,n){this.Hl(t,e,n),this.Jl(t)},t.prototype.Xl=function(t){var e="not-current";if(this.Gl(t)){var n=this.storage.getItem(ui(this.persistenceKey,t));if(n){var r=hi.bl(t,n);r&&(e=r.state)}}return this.Zl.Sl(t),this.Ul(),e},t.prototype.td=function(t){this.Zl.Dl(t),this.Ul()},t.prototype.ed=function(t){return this.Zl.activeTargetIds.has(t)},t.prototype.sd=function(t){this.removeItem(ui(this.persistenceKey,t))},t.prototype.nd=function(t,e,n){this.rd(t,e,n)},t.prototype.vu=function(t,e,n){var r=this;e.forEach((function(t){r.Jl(t)})),this.currentUser=t,n.forEach((function(t){r.zl(t)}))},t.prototype.hd=function(t){this.od(t)},t.prototype.Vo=function(){this.ho&&(this.platform.window.removeEventListener("storage",this.Fl),this.removeItem(this.xl),this.ho=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ge("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ge("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ge("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Nl=function(t){var e=this;if(t.storageArea===this.storage){if(ge("SharedClientState","EVENT",t.key,t.newValue),t.key===this.xl)return void be("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Tr.lo((function(){return i.__awaiter(e,void 0,void 0,(function(){var e,n,r,o,s,a;return i.__generator(this,(function(i){if(this.ho){if(null!==t.key)if(this.Ol.test(t.key)){if(null==t.newValue)return e=this.ad(t.key),[2,this.ud(e,null)];if(n=this._d(t.key,t.newValue))return[2,this.ud(n.clientId,n)]}else if(this.Ll.test(t.key)){if(null!==t.newValue&&(r=this.ld(t.key,t.newValue)))return[2,this.dd(r)]}else if(this.Bl.test(t.key)){if(null!==t.newValue&&(o=this.fd(t.key,t.newValue)))return[2,this.Td(o)]}else if(t.key===this.ql){if(null!==t.newValue&&(s=this.Ql(t.newValue)))return[2,this.Wl(s)]}else t.key===this.$l&&(a=function(t){var e=Le.dr;if(null!=t)try{var n=JSON.parse(t);ve("number"==typeof n),e=n}catch(t){be("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==Le.dr&&this.ur(a)}else this.Ml.push(t);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Zl",{get:function(){return this.kl.get(this.Cl)},enumerable:!0,configurable:!0}),t.prototype.Ul=function(){this.setItem(this.xl,this.Zl.vl())},t.prototype.Hl=function(t,e,n){var r=new ci(this.currentUser,t,e,n),i=ai(this.persistenceKey,this.currentUser,t);this.setItem(i,r.vl())},t.prototype.Jl=function(t){var e=ai(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.od=function(t){this.storage.setItem(this.ql,JSON.stringify({clientId:this.Cl,onlineState:t}))},t.prototype.rd=function(t,e,n){var r=ui(this.persistenceKey,t),i=new hi(t,e,n);this.setItem(r,i.vl())},t.prototype.ad=function(t){var e=this.Ol.exec(t);return e?e[1]:null},t.prototype._d=function(t,e){var n=this.ad(t);return pi.bl(n,e)},t.prototype.ld=function(t,e){var n=this.Ll.exec(t),r=Number(n[1]);return ci.bl(new p(void 0!==n[2]?n[2]:null),r,e)},t.prototype.fd=function(t,e){var n=this.Bl.exec(t),r=Number(n[1]);return hi.bl(r,e)},t.prototype.Ql=function(t){return li.bl(t)},t.prototype.dd=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.cl.Ed(t.batchId,t.state,t.error)]:(ge("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Td=function(t){return this.cl.Id(t.targetId,t.state,t.error)},t.prototype.ud=function(t,e){var n=this,r=e?this.kl.Ae(t,e):this.kl.remove(t),i=this.Kl(this.kl),o=this.Kl(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.cl.wd(s,a).then((function(){n.kl=r}))},t.prototype.Wl=function(t){this.kl.get(t.clientId)&&this.b_(t.onlineState)},t.prototype.Kl=function(t){var e=$t();return t.forEach((function(t,n){e=e.He(n.activeTargetIds)})),e},t}(),gi=function(){function t(){this.Rd=new fi,this.Ad={},this.cl=null,this.b_=null,this.ur=null}return t.prototype.zl=function(t){},t.prototype.Yl=function(t,e,n){},t.prototype.Xl=function(t){return this.Rd.Sl(t),this.Ad[t]||"not-current"},t.prototype.nd=function(t,e,n){this.Ad[t]=e},t.prototype.td=function(t){this.Rd.Dl(t)},t.prototype.ed=function(t){return this.Rd.activeTargetIds.has(t)},t.prototype.sd=function(t){delete this.Ad[t]},t.prototype.jl=function(){return this.Rd.activeTargetIds},t.prototype.Gl=function(t){return this.Rd.activeTargetIds.has(t)},t.prototype.start=function(){return this.Rd=new fi,Promise.resolve()},t.prototype.vu=function(t,e,n){},t.prototype.hd=function(t){},t.prototype.Vo=function(){},t.prototype.lr=function(t){},t}(),bi=function(t){this.key=t},mi=function(t){this.key=t},yi=function(){function t(t,e){this.query=t,this.md=e,this.Pd=null,this.fs=!1,this.Vd=Xt(),this.ns=Xt(),this.gd=new Jt(t.se.bind(t))}return Object.defineProperty(t.prototype,"pd",{get:function(){return this.md},enumerable:!0,configurable:!0}),t.prototype.yd=function(t,e){var n=this,r=e?e.bd:new Yt,i=e?e.gd:this.gd,o=e?e.ns:this.ns,s=i,a=!1,u=this.query.oe()&&i.size===this.query.limit?i.last():null,c=this.query.ae()&&i.size===this.query.limit?i.first():null;if(t.pe((function(t,e){var h=i.get(t),p=e instanceof yt?e:null;p&&(p=n.query.matches(p)?p:null);var l=!!h&&n.ns.has(h.key),f=!!p&&(p.At||n.ns.has(p.key)&&p.hasCommittedMutations),d=!1;h&&p?h.data().isEqual(p.data())?l!==f&&(r.track({type:3,doc:p}),d=!0):n.vd(h,p)||(r.track({type:2,doc:p}),d=!0,(u&&n.query.se(p,u)>0||c&&n.query.se(p,c)<0)&&(a=!0)):!h&&p?(r.track({type:0,doc:p}),d=!0):h&&!p&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(p?(s=s.add(p),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),this.query.oe()||this.query.ae())for(;s.size>this.query.limit;){var h=this.query.oe()?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{gd:s,bd:r,Sd:a,ns:o}},t.prototype.vd=function(t,e){return t.At&&e.hasCommittedMutations&&!e.At},t.prototype.Ln=function(t,e,n){var r=this,i=this.gd;this.gd=t.gd,this.ns=t.ns;var o=t.bd.es();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return n(t)-n(e)}(t.type,e.type)||r.query.se(t.doc,e.doc)})),this.Dd(n);var s=e?this.Cd():[],a=0===this.Vd.size&&this.fs?1:0,u=a!==this.Pd;return this.Pd=a,0!==o.length||u?{snapshot:new Ht(this.query,t.gd,i,o,t.ns,0===a,u,!1),Fd:s}:{Fd:s}},t.prototype.Nd=function(t){return this.fs&&"Offline"===t?(this.fs=!1,this.Ln({gd:this.gd,bd:new Yt,ns:this.ns,Sd:!1},!1)):{Fd:[]}},t.prototype.kd=function(t){return!this.md.has(t)&&!!this.gd.has(t)&&!this.gd.get(t).At},t.prototype.Dd=function(t){var e=this;t&&(t.Ts.forEach((function(t){return e.md=e.md.add(t)})),t.Es.forEach((function(t){})),t.Is.forEach((function(t){return e.md=e.md.delete(t)})),this.fs=t.fs)},t.prototype.Cd=function(){var t=this;if(!this.fs)return[];var e=this.Vd;this.Vd=Xt(),this.gd.forEach((function(e){t.kd(e.key)&&(t.Vd=t.Vd.add(e.key))}));var n=[];return e.forEach((function(e){t.Vd.has(e)||n.push(new mi(e))})),this.Vd.forEach((function(t){e.has(t)||n.push(new bi(t))})),n},t.prototype.Md=function(t){this.md=t.ju,this.Vd=Xt();var e=this.yd(t.documents);return this.Ln(e,!0)},t.prototype.xd=function(){return Ht.os(this.query,this.gd,this.ns,0===this.Pd)},t}(),vi=function(){function t(t,e,n,r){this.Ra=t,this.w_=e,this.updateFunction=n,this.Pa=r,this.$d=5,this.Na=new qe(this.Ra,"transaction_retry")}return t.prototype.Od=function(){this.Ld()},t.prototype.Ld=function(){var t=this;this.Na.gr((function(){return i.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return i.__generator(this,(function(r){return t=new ri(this.w_),(e=this.Bd(t))&&e.then((function(e){n.Ra.co((function(){return t.commit().then((function(){n.Pa.resolve(e)})).catch((function(t){n.qd(t)}))}))})).catch((function(t){n.qd(t)})),[2]}))}))}))},t.prototype.Bd=function(t){try{var e=this.updateFunction(t);return!N(e)&&e.catch&&e.then?e:(this.Pa.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Pa.reject(t),null}},t.prototype.qd=function(t){var e=this;this.$d>0&&this.Ud(t)?(this.$d-=1,this.Ra.co((function(){return e.Ld(),Promise.resolve()}))):this.Pa.reject(t)},t.prototype.Ud=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!kt(e)}return!1},t}(),xi=function(t,e,n){this.query=t,this.targetId=e,this.view=n},_i=function(t){this.key=t,this.Qd=!1},wi=function(){function t(t,e,n,r,i,o){this.x_=t,this.Wd=e,this.w_=n,this.jd=r,this.currentUser=i,this.Kd=o,this.Gd=null,this.zd=new Me((function(t){return t.canonicalId()})),this.Hd=new Map,this.Yd=[],this.Jd=new Rt(E.N),this.Xd=new Map,this.Zd=new rr,this.tf={},this.ef=new Map,this.sf=He.rh(),this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"if",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){this.Gd=t},t.prototype.listen=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return this.nf("listen()"),(n=this.zd.get(t))?(this.jd.Xl(n.targetId),e=n.view.xd(),[3,4]):[3,1];case 1:return[4,this.x_.Uu(t.ee())];case 2:return r=i.sent(),o=this.jd.Xl(r.targetId),[4,this.rf(t,r.targetId,"current"===o)];case 3:e=i.sent(),this.if&&this.Wd.listen(r),i.label=4;case 4:return[2,e]}}))}))},t.prototype.rf=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,s,a,u,c;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.x_.Wu(t,!0)];case 1:return r=i.sent(),o=new yi(t,r.ju),s=o.yd(r.documents),a=te.ds(e,n&&"Offline"!==this.onlineState),u=o.Ln(s,this.if,a),this.hf(e,u.Fd),c=new xi(t,e,o),[2,(this.zd.set(t,c),this.Hd.has(e)?this.Hd.get(e).push(t):this.Hd.set(e,[t]),u.snapshot)]}}))}))},t.prototype.al=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.nf("unlisten()"),e=this.zd.get(t),(n=this.Hd.get(e.targetId)).length>1?[2,(this.Hd.set(e.targetId,n.filter((function(e){return!e.isEqual(t)}))),void this.zd.delete(t))]:this.if?(this.jd.td(e.targetId),this.jd.Gl(e.targetId)?[3,2]:[4,this.x_.Qu(e.targetId,!1).then((function(){r.jd.sd(e.targetId),r.Wd.al(e.targetId),r.af(e.targetId)})).catch(nr)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.af(e.targetId),[4,this.x_.Qu(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:this.nf("write()"),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,this.x_.Fu(t)];case 2:return n=i.sent(),this.jd.zl(n.batchId),this.uf(n.batchId,e),[4,this.cf(n.Dn)];case 3:return i.sent(),[4,this.Wd.nl()];case 4:return i.sent(),[3,6];case 5:return r=i.sent(),o=Xn(r,"Failed to persist write"),e.reject(o),[3,6];case 6:return[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new vi(t,this.w_,e,n).Od()},t.prototype.xu=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:this.nf("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.x_.xu(t)];case 2:return e=r.sent(),t.as.forEach((function(t,e){var r=n.Xd.get(e);r&&(ve(t.Ts.size+t.Es.size+t.Is.size<=1),t.Ts.size>0?r.Qd=!0:t.Es.size>0?ve(r.Qd):t.Is.size>0&&(ve(r.Qd),r.Qd=!1))})),[4,this.cf(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,nr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Nd=function(t,e){this.nf("applyOnlineStateChange()");var n=[];this.zd.forEach((function(e,r){var i=r.view.Nd(t);i.snapshot&&n.push(i.snapshot)})),this.Gd._f(t),this.Gd.n_(n),this.onlineState=t},t.prototype.Tl=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a,u=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.nf("rejectListens()"),this.jd.nd(t,"rejected",e),n=this.Xd.get(t),(r=n&&n.key)?(o=(o=new Rt(E.N)).Ae(r,new vt(r,x.min())),s=Xt().add(r),a=new Zt(x.min(),new Map,new qt(we),o,s),[4,this.xu(a)]):[3,2];case 1:return i.sent(),this.Jd=this.Jd.remove(r),this.Xd.delete(t),this.lf(),[3,4];case 2:return[4,this.x_.Qu(t,!1).then((function(){return u.af(t,e)})).catch(nr)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))},t.prototype.ml=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:this.nf("applySuccessfulWrite()"),e=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.x_.Nu(t)];case 2:return n=r.sent(),this.df(e,null),this.ff(e),this.jd.Yl(e,"acknowledged"),[4,this.cf(n)];case 3:return r.sent(),[3,6];case 4:return[4,nr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Vl=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n;return i.__generator(this,(function(r){switch(r.label){case 0:this.nf("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.x_.Mu(t)];case 2:return n=r.sent(),this.df(t,e),this.ff(t),this.jd.Yl(t,"rejected",e),[4,this.cf(n)];case 3:return r.sent(),[3,6];case 4:return[4,nr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Tf=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:this.Wd.W_()||ge("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.x_.ta()];case 2:return-1===(e=i.sent())?[2,void t.resolve()]:((n=this.ef.get(e)||[]).push(t),this.ef.set(e,n),[3,4]);case 3:return r=i.sent(),o=Xn(r,"Initialization of waitForPendingWrites() operation failed"),t.reject(o),[3,4];case 4:return[2]}}))}))},t.prototype.ff=function(t){(this.ef.get(t)||[]).forEach((function(t){t.resolve()})),this.ef.delete(t)},t.prototype.Ef=function(t){this.ef.forEach((function(e){e.forEach((function(e){e.reject(new f(l.CANCELLED,t))}))})),this.ef.clear()},t.prototype.uf=function(t,e){var n=this.tf[this.currentUser.s()];n||(n=new Rt(we)),n=n.Ae(t,e),this.tf[this.currentUser.s()]=n},t.prototype.df=function(t,e){var n=this.tf[this.currentUser.s()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.tf[this.currentUser.s()]=n}},t.prototype.af=function(t,e){var n=this;void 0===e&&(e=null),this.jd.td(t);for(var r=0,i=this.Hd.get(t);r<i.length;r++){var o=i[r];this.zd.delete(o),e&&this.Gd.If(o,e)}this.Hd.delete(t),this.if&&this.Zd.ic(t).forEach((function(t){n.Zd.Ch(t)||n.wf(t)}))},t.prototype.wf=function(t){var e=this.Jd.get(t);null!==e&&(this.Wd.al(e),this.Jd=this.Jd.remove(t),this.Xd.delete(e),this.lf())},t.prototype.hf=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof bi?(this.Zd.yh(i.key,t),this.Rf(i)):i instanceof mi?(ge("SyncEngine","Document no longer in limbo: "+i.key),this.Zd.vh(i.key,t),this.Zd.Ch(i.key)||this.wf(i.key)):ye()}},t.prototype.Rf=function(t){var e=t.key;this.Jd.get(e)||(ge("SyncEngine","New document in limbo: "+e),this.Yd.push(e),this.lf())},t.prototype.lf=function(){for(;this.Yd.length>0&&this.Jd.size<this.Kd;){var t=this.Yd.shift(),e=this.sf.next();this.Xd.set(e,new _i(t)),this.Jd=this.Jd.Ae(t,e),this.Wd.listen(new At(wt.Wt(t.path).ee(),e,2,Le.dr))}},t.prototype.Af=function(){return this.Jd},t.prototype.mf=function(){return this.Yd},t.prototype.cf=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s=this;return i.__generator(this,(function(i){switch(i.label){case 0:return n=[],r=[],o=[],this.zd.forEach((function(i,a){o.push(Promise.resolve().then((function(){var e=a.view.yd(t);return e.Sd?s.x_.Wu(a.query,!1).then((function(t){return a.view.yd(t.documents,e)})):e})).then((function(t){var i=e&&e.as.get(a.targetId),o=a.view.Ln(t,s.if,i);if(s.hf(a.targetId,o.Fd),o.snapshot){s.if&&s.jd.nd(a.targetId,o.snapshot.fromCache?"not-current":"current"),n.push(o.snapshot);var u=Re.ar(a.targetId,o.snapshot);r.push(u)}})))})),[4,Promise.all(o)];case 1:return i.sent(),this.Gd.n_(n),[4,this.x_.Lu(r)];case 2:return i.sent(),[2]}}))}))},t.prototype.nf=function(t){},t.prototype.pl=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(t)?[3,3]:[4,this.x_.vu(t)];case 1:return e=n.sent(),this.currentUser=t,this.Ef("'waitForPendingWrites' promise is rejected due to a user change."),this.jd.vu(t,e.Du,e.Cu),[4,this.cf(e.Su)];case 2:n.sent(),n.label=3;case 3:return[4,this.Wd.pl()];case 4:return n.sent(),[2]}}))}))},t.prototype.enableNetwork=function(){return this.Wd.enableNetwork()},t.prototype.disableNetwork=function(){return this.Wd.disableNetwork()},t.prototype.ei=function(t){var e=this.Xd.get(t);if(e&&e.Qd)return Xt().add(e.key);var n=Xt(),r=this.Hd.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=this.zd.get(o[i]);n=n.He(s.view.pd)}return n},t}(),Oi=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,o,s)||this).x_=e,a.Pf=void 0,a}return i.__extends(e,t),Object.defineProperty(e.prototype,"if",{get:function(){return!0===this.Pf},enumerable:!0,configurable:!0}),e.prototype.enableNetwork=function(){return this.x_.uo(!0),t.prototype.enableNetwork.call(this)},e.prototype.disableNetwork=function(){return this.x_.uo(!1),t.prototype.disableNetwork.call(this)},e.prototype.Vf=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,this.x_.Wu(t.query,!0)];case 1:return e=r.sent(),n=t.view.Md(e),[2,(this.Pf&&this.hf(t.targetId,n.Fd),n)]}}))}))},e.prototype.Nd=function(e,n){this.if&&0===n&&(t.prototype.Nd.call(this,e,n),this.jd.hd(e)),this.if||1!==n||t.prototype.Nd.call(this,e,n)},e.prototype.Ed=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r;return i.__generator(this,(function(i){switch(i.label){case 0:return this.nf("applyBatchState()"),[4,this.x_.Gu(t)];case 1:return null===(r=i.sent())?[3,6]:"pending"!==e?[3,3]:[4,this.Wd.nl()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.df(t,n||null),this.x_.zu(t)):ye(),i.label=4;case 4:return[4,this.cf(r)];case 5:return i.sent(),[3,7];case 6:ge("SyncEngine","Cannot apply mutation batch with id: "+t),i.label=7;case 7:return[2]}}))}))},e.prototype.yl=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,s,a,u=this;return i.__generator(this,(function(i){switch(i.label){case 0:return!0!==t||!0===this.Pf?[3,3]:(e=this.jd.jl(),[4,this.gf(e.W(),!0)]);case 1:return n=i.sent(),this.Pf=!0,[4,this.Wd.yl(!0)];case 2:for(i.sent(),r=0,o=n;r<o.length;r++)this.Wd.listen(o[r]);return[3,7];case 3:return!1!==t||!1===this.Pf?[3,7]:(s=[],a=Promise.resolve(),this.Hd.forEach((function(t,e){u.jd.ed(e)?s.push(e):a=a.then((function(){return u.af(e),u.x_.Qu(e,!0)})),u.Wd.al(e)})),[4,a]);case 4:return i.sent(),[4,this.gf(s,!1)];case 5:return i.sent(),this.pf(),this.Pf=!1,[4,this.Wd.yl(!1)];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))},e.prototype.pf=function(){var t=this;this.Xd.forEach((function(e,n){t.Wd.al(n)})),this.Zd.nc(),this.Xd=new Map,this.Jd=new Rt(E.N)},e.prototype.gf=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,s,a,u,c,h,p,l,f;return i.__generator(this,(function(i){switch(i.label){case 0:e=[],n=[],r=0,o=t,i.label=1;case 1:return r<o.length?(a=void 0,(u=this.Hd.get(s=o[r]))&&0!==u.length?[4,this.x_.Uu(u[0].ee())]:[3,7]):[3,13];case 2:a=i.sent(),c=0,h=u,i.label=3;case 3:return c<h.length?(p=this.zd.get(h[c]),[4,this.Vf(p)]):[3,6];case 4:(l=i.sent()).snapshot&&n.push(l.snapshot),i.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,this.x_.Hu(s)];case 8:return f=i.sent(),[4,this.x_.Uu(f)];case 9:return a=i.sent(),[4,this.rf(this.yf(f),s,!1)];case 10:i.sent(),i.label=11;case 11:e.push(a),i.label=12;case 12:return r++,[3,1];case 13:return[2,(this.Gd.n_(n),e)]}}))}))},e.prototype.yf=function(t){return new wt(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},e.prototype.So=function(){return this.x_.So()},e.prototype.Id=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return this.Pf?(ge("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.Hd.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.x_.Kr()];case 3:return r=i.sent(),o=Zt.ls(t,"current"===e),[4,this.cf(r,o)];case 4:return i.sent(),[3,8];case 5:return[4,this.x_.Qu(t,!0)];case 6:return i.sent(),this.af(t,n),[3,8];case 7:ye(),i.label=8;case 8:return[2]}}))}))},e.prototype.wd=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a,u,c,h,p,l=this;return i.__generator(this,(function(f){switch(f.label){case 0:if(!this.Pf)return[3,10];n=0,r=t,f.label=1;case 1:return n<r.length?this.Hd.has(o=r[n])?(ge("SyncEngine","Adding an already active target "+o),[3,5]):[4,this.x_.Hu(o)]:[3,6];case 2:return s=f.sent(),[4,this.x_.Uu(s)];case 3:return a=f.sent(),[4,this.rf(this.yf(s),a.targetId,!1)];case 4:f.sent(),this.Wd.listen(a),f.label=5;case 5:return n++,[3,1];case 6:u=function(t){return i.__generator(this,(function(e){switch(e.label){case 0:return c.Hd.has(t)?[4,c.x_.Qu(t,!1).then((function(){l.Wd.al(t),l.af(t)})).catch(nr)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},c=this,h=0,p=e,f.label=7;case 7:return h<p.length?[5,u(p[h])]:[3,10];case 8:f.sent(),f.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))},e}(wi),Pi=function(){this.bf=void 0,this.vf=[]},Ei=function(){function t(t){this.cl=t,this.Sf=new Me((function(t){return t.canonicalId()})),this.onlineState="Unknown",this.Df=new Set,this.cl.subscribe(this)}return t.prototype.listen=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,s,a;return i.__generator(this,(function(i){switch(i.label){case 0:if(n=!1,(r=this.Sf.get(e=t.query))||(n=!0,r=new Pi),!n)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),o=r,[4,this.cl.listen(e)];case 2:return o.bf=i.sent(),[3,4];case 3:return s=i.sent(),a=Xn(s,"Initialization of query '"+t.query+"' failed"),[2,void t.onError(a)];case 4:return this.Sf.set(e,r),r.vf.push(t),t.Nd(this.onlineState),r.bf&&t.Cf(r.bf)&&this.Ff(),[2]}}))}))},t.prototype.al=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o;return i.__generator(this,(function(i){return n=!1,(r=this.Sf.get(e=t.query))&&(o=r.vf.indexOf(t))>=0&&(r.vf.splice(o,1),n=0===r.vf.length),n?[2,(this.Sf.delete(e),this.cl.al(e))]:[2]}))}))},t.prototype.n_=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=this.Sf.get(i.query);if(o){for(var s=0,a=o.vf;s<a.length;s++)a[s].Cf(i)&&(e=!0);o.bf=i}}e&&this.Ff()},t.prototype.If=function(t,e){var n=this.Sf.get(t);if(n)for(var r=0,i=n.vf;r<i.length;r++)i[r].onError(e);this.Sf.delete(t)},t.prototype._f=function(t){this.onlineState=t;var e=!1;this.Sf.forEach((function(n,r){for(var i=0,o=r.vf;i<o.length;i++)o[i].Nd(t)&&(e=!0)})),e&&this.Ff()},t.prototype.Nf=function(t){this.Df.add(t),t.next()},t.prototype.kf=function(t){this.Df.delete(t)},t.prototype.Ff=function(){this.Df.forEach((function(t){t.next()}))},t}(),Ci=function(){function t(t,e,n){this.query=t,this.Mf=e,this.xf=!1,this.$f=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Cf=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ht(t.query,t.docs,t.ss,e,t.ns,t.fromCache,t.rs,!0)}var o=!1;return this.xf?this.Of(t)&&(this.Mf.next(t),o=!0):this.Lf(t,this.onlineState)&&(this.Bf(t),o=!0),this.$f=t,o},t.prototype.onError=function(t){this.Mf.error(t)},t.prototype.Nd=function(t){this.onlineState=t;var e=!1;return this.$f&&!this.xf&&this.Lf(this.$f,t)&&(this.Bf(this.$f),e=!0),e},t.prototype.Lf=function(t,e){return!t.fromCache||!(this.options.qf&&"Offline"!==e||t.docs.B()&&"Offline"!==e)},t.prototype.Of=function(t){return t.docChanges.length>0||!!(t.rs||this.$f&&this.$f.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.Bf=function(t){t=Ht.os(t.query,t.docs,t.ns,t.fromCache),this.xf=!0,this.Mf.next(t)},t}(),Mi=function(){function t(){}return t.prototype.bu=function(t){this.Uf=t},t.prototype.Zn=function(t,e,n,r){var i=this;return e.te()||n.isEqual(x.min())?this.Qf(t,e):this.Uf.Yn(t,r).next((function(o){var a=i.Wf(e,o);return(e.oe()||e.ae())&&i.Sd(e.Bt,a,r,n)?i.Qf(t,e):(de()<=s.LogLevel.DEBUG&&ge("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),i.Uf.Zn(t,e,n).next((function(t){return a.forEach((function(e){t=t.Ae(e.key,e)})),t})))}))},t.prototype.Wf=function(t,e){var n=new qt((function(e,n){return t.se(e,n)}));return e.forEach((function(e,r){r instanceof yt&&t.matches(r)&&(n=n.add(r))})),n},t.prototype.Sd=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.S(r)>0)},t.prototype.Qf=function(t,e){return de()<=s.LogLevel.DEBUG&&ge("IndexFreeQueryEngine","Using full collection scan to execute query:",e.toString()),this.Uf.Zn(t,e,x.min())},t}(),Ti=function(){function t(t,e){this.jn=t,this.hh=e,this.Wn=[],this.jf=1,this.Kf=new qt(ir.Ju)}return t.prototype.Ho=function(t){return Ne.resolve(0===this.Wn.length)},t.prototype.Yo=function(t,e,n,r){var i=this.jf;this.jf++;var o=new Te(i,e,n,r);this.Wn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Kf=this.Kf.add(new ir(u.key,i)),this.jn.Dr(t,u.key.path.$())}return Ne.resolve(o)},t.prototype.Jo=function(t,e){return Ne.resolve(this.Gf(e))},t.prototype.Zo=function(t,e){var n=this.zf(e+1),r=n<0?0:n;return Ne.resolve(this.Wn.length>r?this.Wn[r]:null)},t.prototype.ta=function(){return Ne.resolve(0===this.Wn.length?-1:this.jf-1)},t.prototype.ea=function(t){return Ne.resolve(this.Wn.slice())},t.prototype.Gn=function(t,e){var n=this,r=new ir(e,0),i=new ir(e,Number.POSITIVE_INFINITY),o=[];return this.Kf.Ke([r,i],(function(t){var e=n.Gf(t.hc);o.push(e)})),Ne.resolve(o)},t.prototype.Xn=function(t,e){var n=this,r=new qt(we);return e.forEach((function(t){var e=new ir(t,0),i=new ir(t,Number.POSITIVE_INFINITY);n.Kf.Ke([e,i],(function(t){r=r.add(t.hc)}))})),Ne.resolve(this.Hf(r))},t.prototype.nr=function(t,e){var n=e.path,r=n.length+1,i=n;E.et(i)||(i=i.child(""));var o=new ir(new E(i),0),s=new qt(we);return this.Kf.Ge((function(t){var e=t.key.path;return!!n.q(e)&&(e.length===r&&(s=s.add(t.hc)),!0)}),o),Ne.resolve(this.Hf(s))},t.prototype.Hf=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Gf(t);null!==r&&n.push(r)})),n},t.prototype.ia=function(t,e){var n=this;ve(0===this.Yf(e.batchId,"removed")),this.Wn.shift();var r=this.Kf;return Ne.forEach(e.mutations,(function(i){var o=new ir(i.key,e.batchId);return r=r.delete(o),n.hh.Uo(t,i.key)})).next((function(){n.Kf=r}))},t.prototype.na=function(t){},t.prototype.Ch=function(t,e){var n=new ir(e,0),r=this.Kf.ze(n);return Ne.resolve(e.isEqual(r&&r.key))},t.prototype.ra=function(t){return Ne.resolve()},t.prototype.Yf=function(t,e){return this.zf(t)},t.prototype.zf=function(t){return 0===this.Wn.length?0:t-this.Wn[0].batchId},t.prototype.Gf=function(t){var e=this.zf(t);return e<0||e>=this.Wn.length?null:this.Wn[e]},t}(),Ii=function(){function t(t,e){this.jn=t,this.Jf=e,this.docs=new Rt(E.N),this.size=0}return t.prototype.Nn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Jf(e);return this.docs=this.docs.Ae(r,{$r:e,size:s,readTime:n}),this.size+=s-o,this.jn.Dr(t,r.path.$())},t.prototype.Mn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.xn=function(t,e){var n=this.docs.get(e);return Ne.resolve(n?n.$r:null)},t.prototype.getEntries=function(t,e){var n=this,r=zt();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ae(t,e?e.$r:null)})),Ne.resolve(r)},t.prototype.Zn=function(t,e,n){for(var r=Gt(),i=new E(e.path.child("")),o=this.docs.ve(i);o.ke();){var s=o.Ne(),a=s.value,u=a.$r,c=a.readTime;if(!e.path.q(s.key.path))break;c.S(n)<=0||u instanceof yt&&e.matches(u)&&(r=r.Ae(u.key,u))}return Ne.resolve(r)},t.prototype.Xf=function(t,e){return Ne.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Yr=function(e){return new t.Jr(this)},t.prototype.Zr=function(t){return Ne.resolve(this.size)},t}();Ii.Jr=function(t){function e(e){var n=this;return(n=t.call(this)||this).th=e,n}return i.__extends(e,t),e.prototype.Ln=function(t){var e=this,n=[];return this.Dn.forEach((function(r,i){i?n.push(e.th.Nn(t,i,e.readTime)):e.th.Mn(r)})),Ne.vn(n)},e.prototype.$n=function(t,e){return this.th.xn(t,e)},e.prototype.On=function(t,e){return this.th.getEntries(t,e)},e}(Ae);var Ni=function(){function t(t){this.persistence=t,this.Zf=new Me((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=x.min(),this.highestTargetId=0,this.tT=0,this.eT=new rr,this.targetCount=0,this.sT=He.nh()}return t.prototype.js=function(t,e){return this.Zf.forEach((function(t,n){return e(n)})),Ne.resolve()},t.prototype._h=function(t){return Ne.resolve(this.lastRemoteSnapshotVersion)},t.prototype.lh=function(t){return Ne.resolve(this.tT)},t.prototype.oh=function(t){return this.highestTargetId=this.sT.next(),Ne.resolve(this.highestTargetId)},t.prototype.dh=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.tT&&(this.tT=e),Ne.resolve()},t.prototype.Th=function(t){this.Zf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.sT=new He(e),this.highestTargetId=e),t.sequenceNumber>this.tT&&(this.tT=t.sequenceNumber)},t.prototype.fh=function(t,e){return this.Th(e),this.targetCount+=1,Ne.resolve()},t.prototype.Ih=function(t,e){return this.Th(e),Ne.resolve()},t.prototype.wh=function(t,e){return this.Zf.delete(e.target),this.eT.ic(e.targetId),this.targetCount-=1,Ne.resolve()},t.prototype.Ah=function(t,e,n){var r=this,i=0,o=[];return this.Zf.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Zf.delete(s),o.push(r.Rh(t,a.targetId)),i++)})),Ne.vn(o).next((function(){return i}))},t.prototype.Vh=function(t){return Ne.resolve(this.targetCount)},t.prototype.gh=function(t,e){var n=this.Zf.get(e)||null;return Ne.resolve(n)},t.prototype.ph=function(t,e,n){return this.eT.tc(e,n),Ne.resolve()},t.prototype.bh=function(t,e,n){this.eT.sc(e,n);var r=this.persistence.hh,i=[];return r&&e.forEach((function(e){i.push(r.Uo(t,e))})),Ne.vn(i)},t.prototype.Rh=function(t,e){return this.eT.ic(e),Ne.resolve()},t.prototype.Sh=function(t,e){var n=this.eT.rc(e);return Ne.resolve(n)},t.prototype.Ch=function(t,e){return Ne.resolve(this.eT.Ch(e))},t}(),Ai=function(){function t(t){var e=this;this.iT={},this.qh=new Le(0),this.Uh=!1,this.Uh=!0,this.hh=t(this),this.Jh=new Ni(this),this.jn=new Be,this.Qn=new Ii(this.jn,(function(t){return e.hh.nT(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Vo=function(){return this.Uh=!1,Promise.resolve()},Object.defineProperty(t.prototype,"ho",{get:function(){return this.Uh},enumerable:!0,configurable:!0}),t.prototype.oo=function(){},t.prototype.ko=function(){return this.jn},t.prototype.Do=function(t){var e=this.iT[t.s()];return e||(e=new Ti(this.jn,this.hh),this.iT[t.s()]=e),e},t.prototype.Fo=function(){return this.Jh},t.prototype.No=function(){return this.Qn},t.prototype.runTransaction=function(t,e,n){var r=this;ge("MemoryPersistence","Starting transaction:",t);var i=new Si(this.qh.next());return this.hh.rT(),n(i).next((function(t){return r.hh.hT(i).next((function(){return t}))})).yn().then((function(t){return i.Un(),t}))},t.prototype.oT=function(t,e){return Ne.Sn(Object.values(this.iT).map((function(n){return function(){return n.Ch(t,e)}})))},t}(),Si=function(t){function e(e){var n=this;return(n=t.call(this)||this).Oh=e,n}return i.__extends(e,t),e}(ke),ki=function(){function t(t){this.persistence=t,this.aT=new rr,this.uT=null}return t.cT=function(e){return new t(e)},Object.defineProperty(t.prototype,"_T",{get:function(){if(this.uT)return this.uT;throw ye()},enumerable:!0,configurable:!0}),t.prototype.yh=function(t,e,n){return this.aT.yh(n,e),this._T.delete(n),Ne.resolve()},t.prototype.vh=function(t,e,n){return this.aT.vh(n,e),this._T.add(n),Ne.resolve()},t.prototype.Uo=function(t,e){return this._T.add(e),Ne.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.aT.ic(e.targetId).forEach((function(t){return n._T.add(t)}));var r=this.persistence.Fo();return r.Sh(t,e.targetId).next((function(t){t.forEach((function(t){return n._T.add(t)}))})).next((function(){return r.wh(t,e)}))},t.prototype.rT=function(){this.uT=new Set},t.prototype.hT=function(t){var e=this,n=this.persistence.No().Yr();return Ne.forEach(this._T,(function(r){return e.lT(t,r).next((function(t){t||n.Mn(r)}))})).next((function(){return e.uT=null,n.apply(t)}))},t.prototype.Ko=function(t,e){var n=this;return this.lT(t,e).next((function(t){t?n._T.delete(e):n._T.add(e)}))},t.prototype.nT=function(t){return 0},t.prototype.lT=function(t,e){var n=this;return Ne.Sn([function(){return Ne.resolve(n.aT.Ch(e))},function(){return n.persistence.Fo().Ch(t,e)},function(){return n.persistence.oT(t,e)}])},t}(),Di="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Ri=function(){function t(){}return t.prototype.initialize=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e=this;return i.__generator(this,(function(n){switch(n.label){case 0:return this.jd=this.dT(t),this.persistence=this.fT(t),[4,this.persistence.start()];case 1:return n.sent(),this.TT=this.ET(t),this.x_=this.IT(t),this.Wd=this.wT(t),this.cl=this.RT(t),this.AT=this.mT(t),this.jd.b_=function(t){return e.cl.Nd(t,1)},this.Wd.cl=this.cl,[4,this.x_.start()];case 2:return n.sent(),[4,this.jd.start()];case 3:return n.sent(),[4,this.Wd.start()];case 4:return n.sent(),[4,this.Wd.yl(this.cl.if)];case 5:return n.sent(),[2]}}))}))},t.prototype.mT=function(t){return new Ei(this.cl)},t.prototype.ET=function(t){return null},t.prototype.IT=function(t){return new tr(this.persistence,new Mi,t.PT)},t.prototype.fT=function(t){if(t.gT.VT)throw new f(l.FAILED_PRECONDITION,Di);return new Ai(ki.cT)},t.prototype.wT=function(t){var e=this;return new oi(this.x_,t.w_,t.Ra,(function(t){return e.cl.Nd(t,0)}),t.platform.pT())},t.prototype.dT=function(t){return new gi},t.prototype.RT=function(t){return new wi(this.x_,this.Wd,t.w_,this.jd,t.PT,t.Kd)},t.prototype.clearPersistence=function(t){throw new f(l.FAILED_PRECONDITION,Di)},t}(),Li=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.initialize=function(e){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,this.persistence.ro((function(t){return i.__awaiter(n,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return[4,this.cl.yl(t)];case 1:return e.sent(),this.TT&&(t&&!this.TT.ho?this.TT.start(this.x_):t||this.TT.stop()),[2]}}))}))}))];case 2:return r.sent(),[2]}}))}))},e.prototype.IT=function(t){return new er(this.persistence,new Mi,t.PT)},e.prototype.RT=function(t){var e=new Oi(this.x_,this.Wd,t.w_,this.jd,t.PT,t.Kd);return this.jd instanceof di&&(this.jd.cl=e),e},e.prototype.ET=function(t){return new Hn(this.persistence.hh.$o,t.Ra)},e.prototype.fT=function(t){var e=an.xo(t.yT),n=t.platform.Cc(t.yT.ii);return new an(t.gT.synchronizeTabs,e,t.clientId,t.platform,Yn.nu(t.gT.cacheSizeBytes),t.Ra,n,this.jd,t.gT.Bh)},e.prototype.dT=function(t){if(t.gT.VT&&t.gT.synchronizeTabs){if(!di.zh(t.platform))throw new f(l.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var e=an.xo(t.yT);return new di(t.Ra,t.platform,e,t.clientId,t.PT)}return new gi},e.prototype.clearPersistence=function(t){var e=an.xo(t);return an.clearPersistence(e)},e}(Ri),Vi=function(){function t(t,e,n,r){this.platform=t,this.yT=e,this.credentials=n,this.Ra=r,this.clientId=_e.cn()}return t.prototype.start=function(t,e){var n=this;this.T_();var r=new Ve,i=new Ve,o=!1;return this.credentials.l((function(s){if(!o)return o=!0,ge("FirestoreClient","Initializing. user=",s.uid),n.bT(t,e,s,i).then(r.resolve,r.reject);n.Ra.lo((function(){return n.pl(s)}))})),this.Ra.co((function(){return r.promise})),i.promise},t.prototype.enableNetwork=function(){var t=this;return this.T_(),this.Ra.enqueue((function(){return t.cl.enableNetwork()}))},t.prototype.bT=function(t,e,n,r){return i.__awaiter(this,void 0,void 0,(function(){var o,s,a,u,c=this;return i.__generator(this,(function(h){switch(h.label){case 0:return h.trys.push([0,3,,4]),[4,this.platform.vT(this.yT)];case 1:return o=h.sent(),s=this.platform.Cc(this.yT.ii),a=function(t,e,n){return new ni(t,e,n)}(o,this.credentials,s),[4,t.initialize({Ra:this.Ra,yT:this.yT,platform:this.platform,w_:a,clientId:this.clientId,PT:n,Kd:100,gT:e})];case 2:return h.sent(),this.persistence=t.persistence,this.jd=t.jd,this.x_=t.x_,this.Wd=t.Wd,this.cl=t.cl,this.TT=t.TT,this.ST=t.AT,this.persistence.oo((function(){return i.__awaiter(c,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),r.resolve(),[3,4];case 3:if(u=h.sent(),r.reject(u),!this.DT(u))throw u;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),this.bT(new Ri,{VT:!1},n,r))];case 4:return[2]}}))}))},t.prototype.DT=function(t){return"FirebaseError"===t.name?t.code===l.FAILED_PRECONDITION||t.code===l.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.T_=function(){if(this.Ra.Ma)throw new f(l.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.pl=function(t){return this.Ra.Ua(),ge("FirestoreClient","Credential Changed. Current user: "+t.uid),this.cl.pl(t)},t.prototype.disableNetwork=function(){var t=this;return this.T_(),this.Ra.enqueue((function(){return t.cl.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Ra.Ba((function(){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.TT&&this.TT.stop(),[4,this.Wd.Vo()];case 1:return t.sent(),[4,this.jd.Vo()];case 2:return t.sent(),[4,this.persistence.Vo()];case 3:return t.sent(),this.credentials.T(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.T_();var e=new Ve;return this.Ra.co((function(){return t.cl.Tf(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.T_();var i=new Ci(t,e,n);return this.Ra.co((function(){return r.ST.listen(i)})),i},t.prototype.al=function(t){var e=this;this.CT||this.Ra.co((function(){return e.ST.al(t)}))},t.prototype.FT=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return this.T_(),e=new Ve,[4,this.Ra.enqueue((function(){return i.__awaiter(n,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.x_.qu(t)];case 1:return(n=i.sent())instanceof yt?e.resolve(n):n instanceof vt?e.resolve(null):e.reject(new f(l.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=i.sent(),o=Xn(r,"Failed to get document '"+t+" from cache"),e.reject(o),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.NT=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return this.T_(),e=new Ve,[4,this.Ra.enqueue((function(){return i.__awaiter(n,void 0,void 0,(function(){var n,r,o,s,a,u;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.x_.Wu(t,!0)];case 1:return n=i.sent(),r=new yi(t,n.ju),o=r.yd(n.documents),s=r.Ln(o,!1),e.resolve(s.snapshot),[3,3];case 2:return a=i.sent(),u=Xn(a,"Failed to execute query '"+t+" against cache"),e.reject(u),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.T_();var n=new Ve;return this.Ra.co((function(){return e.cl.write(t,n)})),n.promise},t.prototype.ii=function(){return this.yT.ii},t.prototype.Nf=function(t){var e=this;this.T_(),this.Ra.co((function(){return e.ST.Nf(t),Promise.resolve()}))},t.prototype.kf=function(t){var e=this;this.CT||this.Ra.co((function(){return e.ST.kf(t),Promise.resolve()}))},Object.defineProperty(t.prototype,"CT",{get:function(){return this.Ra.Ma},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.T_();var n=new Ve;return this.Ra.co((function(){return e.cl.runTransaction(e.Ra,t,n),Promise.resolve()})),n.promise},t}(),qi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.kT(this.observer.next,t)},t.prototype.error=function(t){this.kT(this.observer.error,t)},t.prototype.MT=function(){this.muted=!0},t.prototype.kT=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function ji(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Ui=function(){function t(t,e,n,r){this.ii=t,this.timestampsInSnapshots=e,this.xT=n,this.$T=r}return t.prototype.OT=function(t){switch(L(t)){case 0:return null;case 1:return t.booleanValue;case 2:return B(t.integerValue||t.doubleValue);case 3:return this.LT(t.timestampValue);case 4:return this.BT(t);case 5:return t.stringValue;case 6:return new Cr(G(t.bytesValue));case 7:return this.qT(t.referenceValue);case 8:return this.UT(t.geoPointValue);case 9:return this.QT(t.arrayValue);case 10:return this.WT(t.mapValue);default:throw ye()}},t.prototype.WT=function(t){var e=this,n={};return M(t.fields||{},(function(t,r){n[t]=e.OT(r)})),n},t.prototype.UT=function(t){return new qr(B(t.latitude),B(t.longitude))},t.prototype.QT=function(t){var e=this;return(t.values||[]).map((function(t){return e.OT(t)}))},t.prototype.BT=function(t){switch(this.xT){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return k(n)?t(n):n}(t);return null==e?null:this.OT(e);case"estimate":return this.LT(D(t));default:return null}},t.prototype.LT=function(t){var e=z(t),n=new v(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.qT=function(t){var e=w.K(t);ve(pe(e));var n=new Ce(e.get(1),e.get(3)),r=new E(e.M(5));return n.isEqual(this.ii)||be("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.ii.projectId+"/"+this.ii.database+") instead."),this.$T(r)},t}(),Fi=Yn.ou,zi=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new f(l.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else pr("settings","non-empty string","host",t.host),this.host=t.host,lr("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(vr("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),lr("settings","object","credentials",t.credentials),this.credentials=t.credentials,lr("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),lr("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?be("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&be("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,lr("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Yn.uu;else{if(t.cacheSizeBytes!==Fi&&t.cacheSizeBytes<Yn.au)throw new f(l.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Yn.au);this.cacheSizeBytes=t.cacheSizeBytes}lr("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Bi=function(){function t(e,n,r){var o=this;if(void 0===r&&(r=new Ri),this.jT=null,this.KT=new Kn,this.INTERNAL={delete:function(){return i.__awaiter(o,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.GT(),[4,this.zT.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var s=e;this.jT=s,this.mc=t.HT(s),this.YT=s.name,this.JT=new b(n)}else{var a=e;if(!a.projectId)throw new f(l.INVALID_ARGUMENT,"Must provide projectId");this.mc=new Ce(a.projectId,a.database),this.YT="[DEFAULT]",this.JT=new g}this.XT=r,this.ZT=new zi({})}return Object.defineProperty(t.prototype,"tE",{get:function(){return this.eE||(this.eE=new Wr(this.mc,this.ZT.ignoreUndefinedProperties)),this.eE},enumerable:!0,configurable:!0}),t.prototype.settings=function(t){sr("Firestore.settings",arguments,1),cr("Firestore.settings","object",1,t);var e=new zi(t);if(this.zT&&!this.ZT.isEqual(e))throw new f(l.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.ZT=e,void 0!==e.credentials&&(this.JT=function(t){if(!t)return new g;switch(t.type){case"gapi":var e=t.sE;return ve(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new y(e,t.V||"0");case"provider":return t.sE;default:throw new f(l.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.GT(),this.zT.enableNetwork()},t.prototype.disableNetwork=function(){return this.GT(),this.zT.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.zT)throw new f(l.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&be("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new f(l.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.iE(this.XT,{VT:!0,cacheSizeBytes:this.ZT.cacheSizeBytes,synchronizeTabs:r,Bh:i})},t.prototype.clearPersistence=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){if(void 0!==this.zT&&!this.zT.CT)throw new f(l.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return t=new Ve,[2,(this.KT.xa((function(){return i.__awaiter(e,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.nE(),[4,this.XT.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"rE",{get:function(){return this.GT(),this.zT.CT},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.GT(),this.zT.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){return this.GT(),ji(t)?this.hE(t):(cr("Firestore.onSnapshotsInSync","function",1,t),this.hE({next:t}))},t.prototype.hE=function(t){var e=this,n=new qi({next:function(){t.next&&t.next()},error:function(t){throw ye()}});return this.zT.Nf(n),function(){n.MT(),e.zT.kf(n)}},t.prototype.GT=function(){return this.zT||this.iE(new Ri,{VT:!1}),this.zT},t.prototype.nE=function(){return new Ee(this.mc,this.YT,this.ZT.host,this.ZT.ssl,this.ZT.forceLongPolling)},t.prototype.iE=function(t,e){var n=this.nE();return this.zT=new Vi(le.nt(),n,this.JT,this.KT),this.zT.start(t,e)},t.HT=function(t){if(!Object.prototype.hasOwnProperty.call(t.options,"projectId"))throw new f(l.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e=t.options.projectId;if(!e||"string"!=typeof e)throw new f(l.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Ce(e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.jT)throw new f(l.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.jT},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return sr("Firestore.collection",arguments,1),cr("Firestore.collection","non-empty string",1,t),this.GT(),new Hi(w.K(t),this,null)},t.prototype.doc=function(t){return sr("Firestore.doc",arguments,1),cr("Firestore.doc","non-empty string",1,t),this.GT(),Ki.oE(w.K(t),this,null)},t.prototype.collectionGroup=function(t){if(sr("Firestore.collectionGroup",arguments,1),cr("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new f(l.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.GT(),new Ji(new wt(w.G,t),this,null)},t.prototype.runTransaction=function(t){var e=this;return sr("Firestore.runTransaction",arguments,1),cr("Firestore.runTransaction","function",1,t),this.GT().transaction((function(n){return t(new Gi(e,n))}))},t.prototype.batch=function(){return this.GT(),new Wi(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(de()){case s.LogLevel.DEBUG:return"debug";case s.LogLevel.ERROR:return"error";case s.LogLevel.SILENT:return"silent";case s.LogLevel.WARN:return"warn";case s.LogLevel.INFO:return"info";case s.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){sr("Firestore.setLogLevel",arguments,1),dr("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),fe.setLogLevel(t)},t.prototype.aE=function(){return this.ZT.timestampsInSnapshots},t}(),Gi=function(){function t(t,e){this.uE=t,this.cE=e}return t.prototype.get=function(t){var e=this;sr("Transaction.get",arguments,1);var n=no("Transaction.get",t,this.uE);return this.cE.V_([n.Pc]).then((function(t){if(!t||1!==t.length)return ye();var r=t[0];if(r instanceof vt)return new Qi(e.uE,n.Pc,null,!1,!1,n.Vc);if(r instanceof yt)return new Qi(e.uE,n.Pc,r,!1,!1,n.Vc);throw ye()}))},t.prototype.set=function(t,e,n){ur("Transaction.set",arguments,2,3);var r=no("Transaction.set",t,this.uE);n=Zi("Transaction.set",n);var i=io(r.Vc,e,"Transaction.set"),o=i[0],s=i[1],a=this.uE.tE.Fc(s,o,n);return this.cE.set(r.Pc,a),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof Tr?(ar("Transaction.update",arguments,3),r=no("Transaction.update",t,this.uE),i=this.uE.tE.Mc("Transaction.update",e,n,o)):(sr("Transaction.update",arguments,2),r=no("Transaction.update",t,this.uE),i=this.uE.tE.kc("Transaction.update",e)),this.cE.update(r.Pc,i),this},t.prototype.delete=function(t){sr("Transaction.delete",arguments,1);var e=no("Transaction.delete",t,this.uE);return this.cE.delete(e.Pc),this},t}(),Wi=function(){function t(t){this.uE=t,this._E=[],this.lE=!1}return t.prototype.set=function(t,e,n){ur("WriteBatch.set",arguments,2,3),this.dE();var r=no("WriteBatch.set",t,this.uE);n=Zi("WriteBatch.set",n);var i=io(r.Vc,e,"WriteBatch.set"),o=i[0],s=i[1],a=this.uE.tE.Fc(s,o,n);return this._E=this._E.concat(a.gc(r.Pc,ot.ft())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.dE(),"string"==typeof e||e instanceof Tr?(ar("WriteBatch.update",arguments,3),r=no("WriteBatch.update",t,this.uE),i=this.uE.tE.Mc("WriteBatch.update",e,n,o)):(sr("WriteBatch.update",arguments,2),r=no("WriteBatch.update",t,this.uE),i=this.uE.tE.kc("WriteBatch.update",e)),this._E=this._E.concat(i.gc(r.Pc,ot.exists(!0))),this},t.prototype.delete=function(t){sr("WriteBatch.delete",arguments,1),this.dE();var e=no("WriteBatch.delete",t,this.uE);return this._E=this._E.concat(new ht(e.Pc,ot.ft())),this},t.prototype.commit=function(){return this.dE(),this.lE=!0,this._E.length>0?this.uE.GT().write(this._E):Promise.resolve()},t.prototype.dE=function(){if(this.lE)throw new f(l.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Ki=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.mc,e,r)||this).Pc=e,i.firestore=n,i.Vc=r,i.zT=i.firestore.GT(),i}return i.__extends(e,t),e.oE=function(t,n,r){if(t.length%2!=0)throw new f(l.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.j()+" has "+t.length);return new e(new E(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.Pc.path.L()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Hi(this.Pc.path.$(),this.firestore,this.Vc)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Pc.path.j()},enumerable:!0,configurable:!0}),e.prototype.collection=function(t){if(sr("DocumentReference.collection",arguments,1),cr("DocumentReference.collection","non-empty string",1,t),!t)throw new f(l.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=w.K(t);return new Hi(this.Pc.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw xr("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.Pc.isEqual(t.Pc)&&this.Vc===t.Vc},e.prototype.set=function(t,e){ur("DocumentReference.set",arguments,1,2),e=Zi("DocumentReference.set",e);var n=io(this.Vc,t,"DocumentReference.set"),r=n[0],i=n[1],o=this.firestore.tE.Fc(i,r,e);return this.zT.write(o.gc(this.Pc,ot.ft()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Tr?(ar("DocumentReference.update",arguments,2),n=this.firestore.tE.Mc("DocumentReference.update",t,e,r)):(sr("DocumentReference.update",arguments,1),n=this.firestore.tE.kc("DocumentReference.update",t)),this.zT.write(n.gc(this.Pc,ot.exists(!0)))},e.prototype.delete=function(){return sr("DocumentReference.delete",arguments,0),this.zT.write([new ht(this.Pc,ot.ft())])},e.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ur("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||ji(t[i])||(vr("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),lr("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return ji(t[i])?n=t[i]:(cr("DocumentReference.onSnapshot","function",i,t[i]),hr("DocumentReference.onSnapshot","function",i+1,t[i+1]),hr("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.fE(o,n)},e.prototype.fE=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new qi({next:function(t){if(e.next){var r=t.docs.get(n.Pc);e.next(new Qi(n.firestore,n.Pc,r,t.fromCache,t.hasPendingWrites,n.Vc))}},error:r}),o=this.zT.listen(wt.Wt(this.Pc.path),i,t);return function(){i.MT(),n.zT.al(o)}},e.prototype.get=function(t){var e=this;return ur("DocumentReference.get",arguments,0,1),eo("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.GT().FT(e.Pc).then((function(t){n(new Qi(e.firestore,e.Pc,t,!0,t instanceof yt&&t.At,e.Vc))}),r):e.TE(n,r,t)}))},e.prototype.TE=function(t,e,n){var r=this.fE({includeMetadataChanges:!0,qf:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new f(l.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new f(l.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},e.prototype.withConverter=function(t){return new e(this.Pc,this.firestore,t)},e}(Ur),Xi=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Qi=function(){function t(t,e,n,r,i,o){this.uE=t,this.Pc=e,this.EE=n,this.IE=r,this.wE=i,this.Vc=o}return t.prototype.data=function(t){var e=this;if(ur("DocumentSnapshot.data",arguments,0,1),t=to("DocumentSnapshot.data",t),this.EE){if(this.Vc){var n=new $i(this.uE,this.Pc,this.EE,this.IE,this.wE,null);return this.Vc.fromFirestore(n,t)}return new Ui(this.uE.mc,this.uE.aE(),t.serverTimestamps||"none",(function(t){return new Ki(t,e.uE,null)})).OT(this.EE.xt())}},t.prototype.get=function(t,e){var n=this;if(ur("DocumentSnapshot.get",arguments,1,2),e=to("DocumentSnapshot.get",e),this.EE){var r=this.EE.data().field(Jr("DocumentSnapshot.get",t));if(null!==r)return new Ui(this.uE.mc,this.uE.aE(),e.serverTimestamps||"none",(function(t){return new Ki(t,n.uE,n.Vc)})).OT(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.Pc.path.L()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ki(this.Pc,this.uE,this.Vc)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.EE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Xi(this.wE,this.IE)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw xr("isEqual","DocumentSnapshot",1,e);return this.uE===e.uE&&this.IE===e.IE&&this.Pc.isEqual(e.Pc)&&(null===this.EE?null===e.EE:this.EE.isEqual(e.EE))&&this.Vc===e.Vc},t}(),$i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Qi),Ji=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.mc,n.tE,e)||this).RE=e,i.firestore=n,i.Vc=r,i}return i.__extends(e,t),e.prototype.where=function(t,n,r){sr("Query.where",arguments,3),yr("Query.where",3,r);var i=dr("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,n),o=Jr("Query.where",t),s=this.AE(o,i,r);return new e(this.RE.Gt(s),this.firestore,this.Vc)},e.prototype.orderBy=function(t,n){var r;if(ur("Query.orderBy",arguments,1,2),hr("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new f(l.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Jr("Query.orderBy",t),o=this.gE(i,r);return new e(this.RE.zt(o),this.firestore,this.Vc)},e.prototype.limit=function(t){return sr("Query.limit",arguments,1),cr("Query.limit","number",1,t),_r("Query.limit",1,t),new e(this.RE.Ht(t),this.firestore,this.Vc)},e.prototype.limitToLast=function(t){return sr("Query.limitToLast",arguments,1),cr("Query.limitToLast","number",1,t),_r("Query.limitToLast",1,t),new e(this.RE.Yt(t),this.firestore,this.Vc)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ar("Query.startAt",arguments,1);var i=this.DE("Query.startAt",t,n,!0);return new e(this.RE.Jt(i),this.firestore,this.Vc)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ar("Query.startAfter",arguments,1);var i=this.DE("Query.startAfter",t,n,!1);return new e(this.RE.Jt(i),this.firestore,this.Vc)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ar("Query.endBefore",arguments,1);var i=this.DE("Query.endBefore",t,n,!0);return new e(this.RE.Xt(i),this.firestore,this.Vc)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ar("Query.endAt",arguments,1);var i=this.DE("Query.endAt",t,n,!1);return new e(this.RE.Xt(i),this.firestore,this.Vc)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw xr("isEqual","Query",1,t);return this.firestore===t.firestore&&this.RE.isEqual(t.RE)&&this.Vc===t.Vc},e.prototype.withConverter=function(t){return new e(this.RE,this.firestore,t)},e.prototype.DE=function(t,e,n,r){if(yr(t,1,e),e instanceof Qi)return sr(t,i.__spreadArrays([e],n),1),this.yE(t,e.EE,r);var o=[e].concat(n);return this.bE(t,o,r)},e.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ur("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||ji(t[i])||(vr("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),lr("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),ji(t[i])?n=t[i]:(cr("Query.onSnapshot","function",i,t[i]),hr("Query.onSnapshot","function",i+1,t[i+1]),hr("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.vE(this.RE),this.fE(r,n)},e.prototype.fE=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new qi({next:function(t){e.next&&e.next(new Yi(n.firestore,n.RE,t,n.Vc))},error:r}),o=this.firestore.GT(),s=o.listen(this.RE,i,t);return function(){i.MT(),o.al(s)}},e.prototype.get=function(t){var e=this;return ur("Query.get",arguments,0,1),eo("Query.get",t),this.vE(this.RE),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.GT().NT(e.RE).then((function(t){n(new Yi(e.firestore,e.RE,t,e.Vc))}),r):e.TE(n,r,t)}))},e.prototype.TE=function(t,e,n){var r=this.fE({includeMetadataChanges:!0,qf:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new f(l.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},e}(function(){function t(t,e,n){this.mc=t,this.tE=e,this.RE=n}return t.prototype.AE=function(t,e,n){var r;if(t.Y()){if("array-contains"===e||"array-contains-any"===e)throw new f(l.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.mE(n,e);for(var i=[],o=0,s=n;o<s.length;o++)i.push(this.PE(s[o]));r={arrayValue:{values:i}}}else r=this.PE(n)}else"in"!==e&&"array-contains-any"!==e||this.mE(n,e),r=this.tE.xc("Query.where",n,"in"===e);var a=Ot.create(t,e,r);return this.VE(a),a},t.prototype.gE=function(t,e){if(null!==this.RE.startAt)throw new f(l.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.RE.endAt)throw new f(l.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new Nt(t,e);return this.pE(n),n},t.prototype.yE=function(t,e,n){if(!e)throw new f(l.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var r=[],i=0,o=this.RE.orderBy;i<o.length;i++){var s=o[i];if(s.field.Y())r.push(W(this.mc,e.key));else{var a=e.field(s.field);if(k(a))throw new f(l.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.j();throw new f(l.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new It(r,n)},t.prototype.bE=function(t,e,n){var r=this.RE.Lt;if(e.length>r.length)throw new f(l.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.Y()){if("string"!=typeof s)throw new f(l.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.RE._e()&&-1!==s.indexOf("/"))throw new f(l.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.RE.path.child(w.K(s));if(!E.et(a))throw new f(l.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new E(a);i.push(W(this.mc,u))}else{var c=this.tE.xc(t,s);i.push(c)}}return new It(i,n)},t.prototype.vE=function(t){if(t.ae()&&0===t.Lt.length)throw new f(l.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.PE=function(t){if("string"==typeof t){if(""===t)throw new f(l.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.RE._e()&&-1!==t.indexOf("/"))throw new f(l.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.RE.path.child(w.K(t));if(!E.et(e))throw new f(l.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return W(this.mc,new E(e))}if(t instanceof Ur)return W(this.mc,t.Pc);throw new f(l.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+mr(t)+".")},t.prototype.mE=function(t,e){if(!Array.isArray(t)||0===t.length)throw new f(l.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new f(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new f(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new f(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.VE=function(t){if(t instanceof Ot){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.ue()){var o=this.RE.jt();if(null!==o&&!o.isEqual(t.field))throw new f(l.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.RE.Kt();null!==s&&this.SE(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.RE.ce(n)),null===a&&r&&(a=this.RE.ce(e)),null!=a)throw new f(l.INVALID_ARGUMENT,a===t.op?"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter.":"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},t.prototype.pE=function(t){if(null===this.RE.Kt()){var e=this.RE.jt();null!==e&&this.SE(e,t.field)}},t.prototype.SE=function(t,e){if(!e.isEqual(t))throw new f(l.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}()),Yi=function(){function t(t,e,n,r){this.uE=t,this.CE=e,this.FE=n,this.Vc=r,this.NE=null,this.kE=null,this.metadata=new Xi(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.FE.docs.B()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.FE.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;ur("QuerySnapshot.forEach",arguments,1,2),cr("QuerySnapshot.forEach","function",1,t),this.FE.docs.forEach((function(r){t.call(e,n.ME(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Ji(this.CE,this.uE,this.Vc)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(vr("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),lr("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.FE.hs)throw new f(l.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.NE&&this.kE===e||(this.NE=function(t,e,n,r){if(n.ss.B()){var i=0;return n.docChanges.map((function(e){return{type:"added",doc:new $i(t,e.doc.key,e.doc,n.fromCache,n.ns.has(e.doc.key),r),oldIndex:-1,newIndex:i++}}))}var o=n.ss;return n.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var i=new $i(t,e.doc.key,e.doc,n.fromCache,n.ns.has(e.doc.key),r),s=-1,a=-1;return 0!==e.type&&(s=o.indexOf(e.doc.key),o=o.delete(e.doc.key)),1!==e.type&&(a=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:ro(e.type),doc:i,oldIndex:s,newIndex:a}}))}(this.uE,e,this.FE,this.Vc),this.kE=e),this.NE},t.prototype.isEqual=function(e){if(!(e instanceof t))throw xr("isEqual","QuerySnapshot",1,e);return this.uE===e.uE&&this.CE.isEqual(e.CE)&&this.FE.isEqual(e.FE)&&this.Vc===e.Vc},t.prototype.ME=function(t){return new $i(this.uE,t.key,t,this.metadata.fromCache,this.FE.ns.has(t.key),this.Vc)},t}(),Hi=function(t){function e(e,n,r){var i=this;if((i=t.call(this,wt.Wt(e),n,r)||this).xE=e,e.length%2!=1)throw new f(l.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.j()+" has "+e.length);return i}return i.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.RE.path.L()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.RE.path.$();return t.B()?null:new Ki(new E(t),this.firestore,null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.RE.path.j()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){ur("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=_e.cn()),cr("CollectionReference.doc","non-empty string",1,t);var e=w.K(t);return Ki.oE(this.RE.path.child(e),this.firestore,this.Vc)},e.prototype.add=function(t){sr("CollectionReference.add",arguments,1),cr("CollectionReference.add","object",1,this.Vc?this.Vc.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.xE,this.firestore,t)},e}(Ji);function Zi(t,e){if(void 0===e)return{merge:!1};if(vr(t,e,["merge","mergeFields"]),lr(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new f(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+mr(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new f(l.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+mr(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof Tr}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new f(l.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function to(t,e){return void 0===e?{}:(vr(t,e,["serverTimestamps"]),fr(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function eo(t,e){hr(t,"object",1,e),e&&(vr(t,e,["source"]),fr(t,0,"source",e.source,["default","server","cache"]))}function no(t,e,n){if(e instanceof Ur){if(e.firestore!==n)throw new f(l.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw xr(t,"DocumentReference",1,e)}function ro(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}function io(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}function oo(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new f(l.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}var so=oo(Bi,"Use firebase.firestore() instead."),ao=oo(Gi,"Use firebase.firestore().runTransaction() instead."),uo=oo(Wi,"Use firebase.firestore().batch() instead."),co=oo(Ki,"Use firebase.firestore().doc() instead."),ho=oo(Qi),po=oo($i),lo=oo(Ji),fo=oo(Yi),go=oo(Hi,"Use firebase.firestore().collection() instead."),bo=oo(Lr,"Use FieldValue.<field>() instead."),mo=oo(Cr,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),yo={Firestore:so,GeoPoint:qr,Timestamp:v,Blob:mo,Transaction:ao,WriteBatch:uo,DocumentReference:co,DocumentSnapshot:ho,Query:lo,QueryDocumentSnapshot:po,QuerySnapshot:fo,CollectionReference:go,FieldPath:Tr,FieldValue:bo,setLogLevel:Bi.setLogLevel,CACHE_SIZE_UNLIMITED:Fi},vo=function(){function t(){}return t.prototype.Q_=function(t){},t.prototype.Vo=function(){},t}(),xo=function(){function t(){var t=this;this.$E=function(){return t.OE()},this.LE=function(){return t.BE()},this.qE=[],this.UE()}return t.prototype.Q_=function(t){this.qE.push(t)},t.prototype.Vo=function(){window.removeEventListener("online",this.$E),window.removeEventListener("offline",this.LE)},t.prototype.UE=function(){window.addEventListener("online",this.$E),window.addEventListener("offline",this.LE)},t.prototype.OE=function(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.qE;t<e.length;t++)(0,e[t])(0)},t.prototype.BE=function(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.qE;t<e.length;t++)(0,e[t])(1)},t.zh=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),_o=function(){function t(t){this.QE=t.QE,this.WE=t.WE}return t.prototype.s_=function(t){this.jE=t},t.prototype.Jc=function(t){this.KE=t},t.prototype.onMessage=function(t){this.GE=t},t.prototype.close=function(){this.WE()},t.prototype.send=function(t){this.QE(t)},t.prototype.zE=function(){this.jE()},t.prototype.HE=function(t){this.KE(t)},t.prototype.YE=function(t){this.GE(t)},t}(),wo={BatchGetDocuments:"batchGet",Commit:"commit"},Oo="gl-js/ fire/"+h,Po=function(){function t(t){this.ii=t.ii,this.JE=(t.ssl?"https":"http")+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.XE=function(t,e){if(e)for(var n in e.o)e.o.hasOwnProperty(n)&&(t[n]=e.o[n]);t["X-Goog-Api-Client"]=Oo},t.prototype.E_=function(t,e,n){var r=this,i=this.ZE(t);return new Promise((function(o,s){var a=new c.XhrIo;a.listenOnce(c.EventType.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case c.ErrorCode.NO_ERROR:var e=a.getResponseJson();ge("Connection","XHR received:",JSON.stringify(e)),o(e);break;case c.ErrorCode.TIMEOUT:ge("Connection",'RPC "'+t+'" timed out'),s(new f(l.DEADLINE_EXCEEDED,"Request time out"));break;case c.ErrorCode.HTTP_ERROR:var n=a.getStatus();if(ge("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(l).indexOf(e)>=0?e:l.UNKNOWN}(r.status);s(new f(i,r.message))}else s(new f(l.UNKNOWN,"Server responded with status "+a.getStatus()))}else ge("Connection",'RPC "'+t+'" failed'),s(new f(l.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{ge("Connection",'RPC "'+t+'" completed.')}}));var u=Object.assign({},e);delete u.database;var h=JSON.stringify(u);ge("Connection","XHR sending: ",i+" "+h);var p={"Content-Type":"text/plain"};r.XE(p,n),a.send(i,"POST",h,p,15)}))},t.prototype.I_=function(t,e,n){return this.E_(t,e,n)},t.prototype.i_=function(t,e){var n=[this.JE,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=c.createWebChannelTransport(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.ii.projectId+"/databases/"+this.ii.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.XE(o.initMessageHeaders,e),a.isMobileCordova()||a.isReactNative()||a.isElectron()||a.isIE()||a.isUWP()||a.isBrowserExtension()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=n.join("");ge("Connection","Creating WebChannel: "+u+" "+o);var p=r.createWebChannel(u,o),d=!1,g=!1,b=new _o({QE:function(t){g?ge("Connection","Not sending because WebChannel is closed:",t):(d||(ge("Connection","Opening WebChannel transport."),p.open(),d=!0),ge("Connection","WebChannel sending:",t),p.send(t))},WE:function(){return p.close()}}),m=function(t,e){p.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return m(c.WebChannel.EventType.OPEN,(function(){g||ge("Connection","WebChannel transport opened.")})),m(c.WebChannel.EventType.CLOSE,(function(){g||(g=!0,ge("Connection","WebChannel transport closed"),b.HE())})),m(c.WebChannel.EventType.ERROR,(function(t){g||(g=!0,function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(fe.logLevel<=s.LogLevel.WARN){var r=e.map(me);fe.warn.apply(fe,i.__spreadArrays(["Firestore ("+h+"): "+t],r))}}("Connection","WebChannel transport errored:",t),b.HE(new f(l.UNAVAILABLE,"The operation could not be completed")))})),m(c.WebChannel.EventType.MESSAGE,(function(t){var e;if(!g){var n=t.data[0];ve(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){ge("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=gt[t];if(void 0!==e)return Dt(e)}(i),s=r.message;void 0===o&&(o=l.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),g=!0,b.HE(new f(o,s)),p.close()}else ge("Connection","WebChannel received:",n),b.YE(n)}})),setTimeout((function(){b.zE()}),0),b},t.prototype.ZE=function(t){return this.JE+"/v1/projects/"+this.ii.projectId+"/databases/"+this.ii.database+"/documents:"+wo[t]},t}();function Eo(t){!function(t,e){t.INTERNAL.registerComponent(new u.Component("firestore",(function(t){return function(t,e){return new Bi(t,e,new Li)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},yo)))}(t),t.registerVersion("@firebase/firestore","1.15.2")}le.an(new(function(){function t(){this.oc="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.vT=function(t){return Promise.resolve(new Po(t))},t.prototype.pT=function(){return xo.zh()?new xo:new vo},t.prototype.Cc=function(t){return new he(t,{hi:!0})},t.prototype.un=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t.prototype._n=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n},t}())),Eo(o),e.__PRIVATE_registerFirestore=Eo},g4K6:function(t,e,n){"use strict";n.r(e),n.d(e,"NwodModule",(function(){return lt}));var r=n("ofXK"),i=n("3Pt+"),o=n("tyNb"),s=n("lJxs"),a=n("fXoL"),u=n("UbJi"),c=n("D0XW"),h=n("HDdC"),p=n("Cfvw"),l=n("LRne"),f=n("Kqap"),d=n("pLZG"),g=n("pxpQ"),b=n("spgP"),m=n("wj3C"),y=n.n(m),v=n("6Joi");function x(t,e){return function(t,e=c.a){return new h.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot(n)}):r=t.onSnapshot(n),function(){null!=r&&r()}})}(t,e)}function _(t,e){return x(t,e).pipe(Object(s.a)(t=>({payload:t,type:"query"})))}function w(t,e){return _(t,e).pipe(Object(s.a)(t=>t.payload.docChanges().map(t=>({type:t.type,payload:t}))))}function O(t,e,n){return _(t,n).pipe(Object(s.a)(t=>t.payload.docChanges()),Object(f.a)((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e),[]),Object(s.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function P(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class E{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?w(this.query,this.afs.schedulers.outsideAngular).pipe(Object(s.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(d.a)(t=>t.length>0),this.afs.keepUnstableUntilFirst):w(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(f.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=P(t);return O(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return _(this.query,this.afs.schedulers.outsideAngular).pipe(Object(s.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(p.a)(this.query.get(t)).pipe(Object(g.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new C(this.ref.doc(t),this.afs)}}class C{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=A(n,e);return new E(r,i,this.afs)}snapshotChanges(){return x(this.ref,this.afs.schedulers.outsideAngular).pipe(Object(s.a)(t=>({payload:t,type:"value"}))).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return this.snapshotChanges().pipe(Object(s.a)(t=>t.payload.data()))}get(t){return Object(p.a)(this.ref.get(t)).pipe(Object(g.b)(this.afs.schedulers.insideAngular))}}class M{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?w(this.query,this.afs.schedulers.outsideAngular).pipe(Object(s.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(d.a)(t=>t.length>0),this.afs.keepUnstableUntilFirst):w(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(f.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=P(t);return O(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return _(this.query,this.afs.schedulers.outsideAngular).pipe(Object(s.a)(t=>t.payload.docs.map(t=>t.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(p.a)(this.query.get(t)).pipe(Object(g.b)(this.afs.schedulers.insideAngular))}}const T=new a.q("angularfire2.enableFirestorePersistence"),I=new a.q("angularfire2.firestore.persistenceSettings"),N=new a.q("angularfire2.firestore.settings");function A(t,e=(t=>t)){return{query:e(t),ref:t}}let S=(()=>{class t{constructor(t,e,n,i,o,s,a){this.schedulers=new b.d(s),this.keepUnstableUntilFirst=Object(b.f)(this.schedulers,o),this.firestore=s.runOutsideAngular(()=>{const n=Object(b.e)(t,s,e);v.registerFirestore&&Object(v.registerFirestore)(y.a);const r=n.firestore();return i&&r.settings(i),r}),this.persistenceEnabled$=n&&!Object(r.n)(o)?s.runOutsideAngular(()=>{try{return Object(p.a)(this.firestore.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(t){return Object(l.a)(!1)}}):Object(l.a)(!1)}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=A(n,e);return new E(r,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new M(n(r),this)}doc(t){let e;return e="string"==typeof t?this.firestore.doc(t):t,new C(e,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(a.Tb(b.c),a.Tb(b.b,8),a.Tb(T,8),a.Tb(N,8),a.Tb(a.B),a.Tb(a.z),a.Tb(I,8))},t.\u0275prov=Object(a.Ib)({factory:function(){return new t(Object(a.Tb)(b.c),Object(a.Tb)(b.b,8),Object(a.Tb)(T,8),Object(a.Tb)(N,8),Object(a.Tb)(a.B),Object(a.Tb)(a.z),Object(a.Tb)(I,8))},token:t,providedIn:"any"}),t})();function k(t,e){if(1&t&&(a.Pb(0,"li"),a.Pb(1,"a",7),a.pc(2),a.Ob(),a.Ob()),2&t){const t=e.$implicit;a.zb(1),a.dc("routerLink","mage/"+t.id),a.zb(1),a.qc(t.name)}}function D(t,e){1&t&&(a.Pb(0,"li"),a.pc(1," Aucun personnage en base de donn\xe9e ! "),a.Ob())}function R(t,e){if(1&t&&(a.Pb(0,"div"),a.Pb(1,"h2"),a.pc(2,"Vos personnages"),a.Ob(),a.Pb(3,"ul"),a.nc(4,k,3,2,"li",5),a.bc(5,"async"),a.nc(6,D,2,0,"li",6),a.bc(7,"async"),a.Ob(),a.Ob()),2&t){const t=a.ac();var n;const e=0===(null==(n=a.cc(7,4,t.characters))?null:n.length);a.zb(4),a.dc("ngForOf",a.cc(5,2,t.characters)),a.zb(2),a.dc("ngIf",e)}}function L(t,e){1&t&&a.pc(0," Connectez-vous pour acc\xe9der \xe0 vos persos !\n")}let V=(()=>{class t{constructor(t,e){this.auth=t,t.authState.subscribe(t=>{t&&(this.user=t,this.charactersCollection=e.collection("characters",e=>e.where("userid","==",t.uid).orderBy("timestamp","asc")),this.characters=this.charactersCollection.snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)}))))})}createMage(){this.charactersCollection.add({name:"Personnage sans nom",userid:this.user.uid,timestamp:Date.now()})}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(u.a),a.Mb(S))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-nwod"]],decls:17,vars:4,consts:[["routerLink","/nwod/mortal/new"],["routerLink","/nwod",3,"click"],["routerLink","/nwod/mage/prelude"],[4,"ngIf","ngIfElse"],["notAuth",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"routerLink"]],template:function(t,e){if(1&t&&(a.Pb(0,"h1"),a.pc(1,"Chronicles of Darkness"),a.Ob(),a.Pb(2,"ul"),a.Pb(3,"li"),a.Pb(4,"a",0),a.pc(5,"Cr\xe9er un mortel"),a.Ob(),a.Ob(),a.Pb(6,"li"),a.Pb(7,"a",1),a.Xb("click",(function(){return e.createMage()})),a.pc(8,"Cr\xe9er un mage"),a.Ob(),a.Ob(),a.Nb(9,"li"),a.Pb(10,"li"),a.Pb(11,"a",2),a.pc(12,"Pr\xe9lude"),a.Ob(),a.Ob(),a.Ob(),a.nc(13,R,8,6,"div",3),a.bc(14,"async"),a.nc(15,L,1,0,"ng-template",null,4,a.oc)),2&t){const t=a.hc(16);a.zb(13),a.dc("ngIf",a.cc(14,2,e.auth.user))("ngIfElse",t)}},directives:[o.d,r.j,r.i],pipes:[r.b],styles:[""]}),t})();function q(t,e){if(1&t){const t=a.Qb();a.Pb(0,"input",13),a.Xb("ngModelChange",(function(n){a.ic(t);const r=e.$implicit;return a.ac().form[r]=n})),a.Ob()}if(2&t){const t=e.$implicit,n=a.ac();a.dc("ngModel",n.form[t]),a.Ab("name",t)}}function j(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",15),a.Xb("click",(function(){a.ic(t);const e=a.ac().$implicit,n=a.ac().$implicit;return a.ac().clickDot(n,e)})),a.Ob()}if(2&t){const t=a.ac().$implicit,e=a.ac().$implicit,n=a.ac();a.Db("dot ",e,"-",t,""),a.Eb("filled",n.form[e]>=t)}}function U(t,e){1&t&&a.nc(0,j,1,6,"ng-template",14),2&t&&a.dc("ngIf",e.$implicit>1)}function F(t,e){if(1&t&&a.nc(0,U,1,1,"ng-template",7),2&t){const t=a.ac();a.dc("ngForOf",t.arrayOfFive)}}function z(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",15),a.Xb("click",(function(){a.ic(t);const n=e.$implicit,r=a.ac().$implicit;return a.ac().clickDot(r,n)})),a.Ob()}if(2&t){const t=e.$implicit,n=a.ac().$implicit,r=a.ac();a.Db("dot ",n,"-",t,""),a.Eb("filled",r.form[n]>=t)}}function B(t,e){if(1&t&&a.nc(0,z,1,6,"ng-template",7),2&t){const t=a.ac();a.dc("ngForOf",t.arrayOfFive)}}function G(t,e){if(1&t&&a.Nb(0,"div"),2&t){const t=e.$implicit,n=a.ac();a.Cb("dot health-",t,""),a.Eb("filled",n.form.health>=t)}}function W(t,e){if(1&t&&a.Nb(0,"div"),2&t){const t=e.$implicit,n=a.ac();a.Cb("dot willpower-",t,""),a.Eb("filled",n.form.willpower>=t)}}function K(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",15),a.Xb("click",(function(){a.ic(t);const n=e.$implicit;return a.ac().clickDot("morality",n)})),a.Ob()}if(2&t){const t=e.$implicit,n=a.ac();a.Cb("dot morality-",t,""),a.Eb("filled",n.form.morality>=t)}}let X=(()=>{class t{constructor(){this.form={},this.arrayOfCharacter=["name","age","player","concept","virtue","vice","chronicle","faction","groupname"],this.arrayOfFive=[1,2,3,4,5],this.arrayOfTen=[1,2,3,4,5,6,7,8,9,10],this.arrayOfTwelve=[1,2,3,4,5,6,7,8,9,10,11,12],this.arrayOfAttributes=["intelligence","wits","resolve","strength","dexterity","stamina","presence","manipulation","composure"],this.arrayOfSkills=["academics","computer","crafts","investigation","medicine","occult","politics","science","athletics","brawl","drive","firearms","larceny","stealth","survival","weaponry","animalken","empathy","expression","intimidation","persuasion","socialize","streetwise","subterfuge"],this.debug=!1,this.resetSheet()}clickDot(t,e){this.form[t]<e?this.form[t]++:this.form[t]--,this.formChanged()}formChanged(){this.form.speed=this.form.strength+this.form.dexterity+5,this.form.initiative=this.form.dexterity+this.form.composure,this.form.defense=Math.min(this.form.dexterity,this.form.wits),this.form.health=this.form.size+this.form.stamina,this.form.willpower=this.form.resolve+this.form.composure}resetSheet(){for(const t of this.arrayOfCharacter)this.form[t]="";for(const t of this.arrayOfAttributes)this.form[t]=1;for(const t of this.arrayOfSkills)this.form[t]=0;this.form.size=5,this.form.armor=0,this.form.morality=7,this.formChanged()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Gb({type:t,selectors:[["app-nwod-mortal-new"]],decls:165,vars:13,consts:[[1,"row"],[1,"col-6"],[1,"li-empty"],[1,"col-4"],["type","button",3,"click"],[1,"sheet-container"],["src","assets/nwod/nwod-sheet.jpg",1,"sheet"],["ngFor","",3,"ngForOf"],["type","number","name","size",3,"ngModel","ngModelChange"],["type","number","name","speed","disabled","",3,"ngModel","ngModelChange"],["type","number","name","initiative","disabled","",3,"ngModel","ngModelChange"],["type","number","name","defense","disabled","",3,"ngModel","ngModelChange"],["type","number","name","armor",3,"ngModel","ngModelChange"],["type","text","maxlength","18",1,"border-bottom",3,"ngModel","ngModelChange"],[3,"ngIf"],[3,"click"]],template:function(t,e){1&t&&(a.Pb(0,"div",0),a.Pb(1,"div",1),a.Pb(2,"h2"),a.pc(3,"Etape 1"),a.Ob(),a.Pb(4,"ul"),a.Pb(5,"li"),a.pc(6,'Choisir un "concept" de personnage, votre nom et votre \xe2ge'),a.Ob(),a.Pb(7,"li"),a.pc(8,"Le concept est souvent bas\xe9 sur un m\xe9tier"),a.Ob(),a.Pb(9,"li"),a.pc(10,"Exemples : journaliste, policier, SDF, hacker, ..."),a.Ob(),a.Ob(),a.Pb(11,"h2"),a.pc(12,"Etape 2"),a.Ob(),a.Pb(13,"ul"),a.Pb(14,"li"),a.pc(15,'Choisir les "attributs", qui sont r\xe9partis en en 3 groupes (Mental, Physique, Social)'),a.Ob(),a.Pb(16,"li"),a.pc(17,"5 points pour un groupe, 4 pour un autre et 3 pour le dernier"),a.Ob(),a.Pb(18,"li"),a.pc(19,"Vous ne pouvez prendre le 5\xe8me point dans un attribut"),a.Ob(),a.Ob(),a.Pb(20,"h2"),a.pc(21,"Etape 3"),a.Ob(),a.Pb(22,"ul"),a.Pb(23,"li"),a.pc(24,'Choisir les "comp\xe9tences", qui sont r\xe9partis en 3 groupes (Mental, Physique, Social)'),a.Ob(),a.Pb(25,"li"),a.pc(26,"11 points pour un groupe, 7 pour un autre et 4 pour le dernier"),a.Ob(),a.Pb(27,"li"),a.pc(28,"Vous ne pouvez prendre le 5\xe8me point dans une comp\xe9tence"),a.Ob(),a.Pb(29,"li"),a.pc(30,'Vous ne pouvez prendre la comp\xe9tence "occult"'),a.Ob(),a.Ob(),a.Ob(),a.Pb(31,"div",1),a.Pb(32,"h2"),a.pc(33,"Lexique"),a.Ob(),a.Pb(34,"ul"),a.Pb(35,"li"),a.pc(36,"Intelligence : capacit\xe9s cognitives"),a.Ob(),a.Pb(37,"li"),a.pc(38,"Wits : capacit\xe9s de r\xe9flexion"),a.Ob(),a.Pb(39,"li"),a.pc(40,"Resolve : concentration, d\xe9termination"),a.Ob(),a.Pb(41,"li"),a.pc(42,"Strength : puissance physique"),a.Ob(),a.Pb(43,"li"),a.pc(44,"Dexterity : rapidit\xe9, finesse"),a.Ob(),a.Pb(45,"li"),a.pc(46,"Stamina : vigueur, r\xe9sistance physique"),a.Ob(),a.Pb(47,"li"),a.pc(48,"Presence : prestance, stature, attrait"),a.Ob(),a.Pb(49,"li"),a.pc(50,"Manipulation : charme, persuasion"),a.Ob(),a.Pb(51,"li"),a.pc(52,"Composure : calme, assurance"),a.Ob(),a.Nb(53,"li",2),a.Pb(54,"li"),a.pc(55,"Academics : \xe9rudition, connaissances"),a.Ob(),a.Pb(56,"li"),a.pc(57,"Computer : informatique, programmation"),a.Ob(),a.Pb(58,"li"),a.pc(59,"Crafts : artisanat, r\xe9parations"),a.Ob(),a.Pb(60,"li"),a.pc(61,"Investigation : recherche, \xe9nigmes"),a.Ob(),a.Pb(62,"li"),a.pc(63,"Medicine : physiologie humaine, blessures"),a.Ob(),a.Pb(64,"li"),a.pc(65,"Occult : surnaturel, l\xe9gendes"),a.Ob(),a.Pb(66,"li"),a.pc(67,"Politics : bureaucratie, contacts"),a.Ob(),a.Pb(68,"li"),a.pc(69,"Science : physique, chimie, biologie, ..."),a.Ob(),a.Pb(70,"li"),a.pc(71,"Athletics : escalade, course, jeter un truc"),a.Ob(),a.Pb(72,"li"),a.pc(73,"Brawl : combat \xe0 mains nues"),a.Ob(),a.Pb(74,"li"),a.pc(75,"Drive : voitures, bateaux, course poursuite"),a.Ob(),a.Pb(76,"li"),a.pc(77,"Firearms : pistolets, fusils d'assault"),a.Ob(),a.Pb(78,"li"),a.pc(79,"Larceny : crochetage, vol \xe0 la tire"),a.Ob(),a.Pb(80,"li"),a.pc(81,"Stealth : discr\xe9tion, d\xe9placement silencieux"),a.Ob(),a.Pb(82,"li"),a.pc(83,"Survival : trouver \xe0 manger, un refuge"),a.Ob(),a.Pb(84,"li"),a.pc(85,"Weaponry : armes blanches"),a.Ob(),a.Pb(86,"li"),a.pc(87,"Animal ken : comportement des animaux"),a.Ob(),a.Pb(88,"li"),a.pc(89,"Empathy : intuition, lire les \xe9motions"),a.Ob(),a.Pb(90,"li"),a.pc(91,"Expression : art de la communication"),a.Ob(),a.Pb(92,"li"),a.pc(93,"Intimidation : via la peur, la force"),a.Ob(),a.Pb(94,"li"),a.pc(95,"Persuasion : via le charme, la diplomatie"),a.Ob(),a.Pb(96,"li"),a.pc(97,"Socialize : \xe9tiquette, sociabilit\xe9"),a.Ob(),a.Pb(98,"li"),a.pc(99,"Streetwise : connaissance de la rue, march\xe9 noir"),a.Ob(),a.Pb(100,"li"),a.pc(101,"Subterfuge : mensonges, cacher des \xe9motions"),a.Ob(),a.Nb(102,"li",2),a.Pb(103,"li"),a.pc(104,'Health : vos "points de vie"'),a.Ob(),a.Pb(105,"li"),a.pc(106,'Willpower : votre "volont\xe9"; d\xe9penser 1 point ajoute 3 d\xe9s \xe0 un jet'),a.Ob(),a.Pb(107,"li"),a.pc(108,'Morality : votre "humanit\xe9", \xe9vitez de d\xe9capiter des gens ;)'),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Nb(109,"hr"),a.Pb(110,"div",0),a.Pb(111,"div",3),a.Pb(112,"h4"),a.pc(113,"Attributes"),a.Ob(),a.Pb(114,"ul"),a.Pb(115,"li"),a.pc(116,"1 = faible, non pratiqu\xe9"),a.Ob(),a.Pb(117,"li"),a.pc(118,"2 = moyen, efforts occasionnels"),a.Ob(),a.Pb(119,"li"),a.pc(120,"3 = bon, pratique r\xe9guli\xe8rement"),a.Ob(),a.Pb(121,"li"),a.pc(122,"4 = exceptionnel, don naturel"),a.Ob(),a.Pb(123,"li"),a.pc(124,"5 = hors du commun"),a.Ob(),a.Ob(),a.Ob(),a.Pb(125,"div",3),a.Pb(126,"h4"),a.pc(127,"Skills"),a.Ob(),a.Pb(128,"ul"),a.Pb(129,"li"),a.pc(130,"1 = novice"),a.Ob(),a.Pb(131,"li"),a.pc(132,"2 = praticien"),a.Ob(),a.Pb(133,"li"),a.pc(134,"3 = professionnel"),a.Ob(),a.Pb(135,"li"),a.pc(136,"4 = expert"),a.Ob(),a.Pb(137,"li"),a.pc(138,"5 = ma\xeetre"),a.Ob(),a.Ob(),a.Ob(),a.Pb(139,"div",3),a.Pb(140,"h4"),a.pc(141,"Health"),a.Ob(),a.Pb(142,"ul"),a.Pb(143,"li"),a.pc(144,'D\xe9g\xe2ts "contondants", r\xe9cup\xe8re 1 point / 15 min (ex: batte de baseball)'),a.Ob(),a.Pb(145,"li"),a.pc(146,'D\xe9g\xe2ts "l\xe9taux", r\xe9cup\xe8re 1 point / 2 jours (ex: pistolet)'),a.Ob(),a.Pb(147,"li"),a.pc(148,'D\xe9g\xe2ts "aggrav\xe9s", r\xe9cup\xe8re 1 point / 2 semaines (ex: lance-flamme)'),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Nb(149,"hr"),a.Pb(150,"button",4),a.Xb("click",(function(){return e.debug=!e.debug})),a.pc(151,"toggle DEBUG mode"),a.Ob(),a.Pb(152,"div",5),a.Nb(153,"img",6),a.nc(154,q,1,2,"ng-template",7),a.nc(155,F,1,1,"ng-template",7),a.nc(156,B,1,1,"ng-template",7),a.Pb(157,"input",8),a.Xb("ngModelChange",(function(t){return e.form.size=t}))("ngModelChange",(function(){return e.formChanged()})),a.Ob(),a.Pb(158,"input",9),a.Xb("ngModelChange",(function(t){return e.form.speed=t}))("ngModelChange",(function(){return e.formChanged()})),a.Ob(),a.Pb(159,"input",10),a.Xb("ngModelChange",(function(t){return e.form.initiative=t}))("ngModelChange",(function(){return e.formChanged()})),a.Ob(),a.Pb(160,"input",11),a.Xb("ngModelChange",(function(t){return e.form.defense=t}))("ngModelChange",(function(){return e.formChanged()})),a.Ob(),a.Pb(161,"input",12),a.Xb("ngModelChange",(function(t){return e.form.armor=t}))("ngModelChange",(function(){return e.formChanged()})),a.Ob(),a.nc(162,G,1,5,"ng-template",7),a.nc(163,W,1,5,"ng-template",7),a.nc(164,K,1,5,"ng-template",7),a.Ob()),2&t&&(a.zb(152),a.Eb("debug",e.debug),a.zb(2),a.dc("ngForOf",e.arrayOfCharacter),a.zb(1),a.dc("ngForOf",e.arrayOfAttributes),a.zb(1),a.dc("ngForOf",e.arrayOfSkills),a.zb(1),a.dc("ngModel",e.form.size),a.zb(1),a.dc("ngModel",e.form.speed),a.zb(1),a.dc("ngModel",e.form.initiative),a.zb(1),a.dc("ngModel",e.form.defense),a.zb(1),a.dc("ngModel",e.form.armor),a.zb(1),a.dc("ngForOf",e.arrayOfTwelve),a.zb(1),a.dc("ngForOf",e.arrayOfTen),a.zb(1),a.dc("ngForOf",e.arrayOfTen))},directives:[r.i,i.h,i.b,i.e,i.f,i.d,r.j],styles:[".debug[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid red}.debug[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background:red}.sheet-container[_ngcontent-%COMP%]{position:relative}.sheet[_ngcontent-%COMP%]{width:970px}input[_ngcontent-%COMP%]{z-index:10;position:absolute;width:140px;padding:0 2px;border:none;background-color:transparent;cursor:text;outline:none;font-size:14px}input[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.1)}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid}.dot[_ngcontent-%COMP%]{z-index:10;position:absolute;width:8px;height:11px;border-radius:50%;cursor:pointer}.dot[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.3)}.dot.filled[_ngcontent-%COMP%]{background:#000}input[name=name][_ngcontent-%COMP%]{top:160px;left:187px;width:165px}input[name=age][_ngcontent-%COMP%]{top:183px;left:187px;width:165px}input[name=player][_ngcontent-%COMP%]{top:206px;left:187px;width:165px}input[name=concept][_ngcontent-%COMP%]{top:160px;left:423px;width:164px}input[name=virtue][_ngcontent-%COMP%]{top:183px;left:423px;width:164px}input[name=vice][_ngcontent-%COMP%]{top:206px;left:423px;width:164px}input[name=chronicle][_ngcontent-%COMP%]{top:160px;left:682px;width:153px}input[name=faction][_ngcontent-%COMP%]{top:183px;left:682px;width:153px}input[name=groupname][_ngcontent-%COMP%]{top:206px;left:682px;width:153px}.intelligence-2[_ngcontent-%COMP%]{top:275px;left:389px}.intelligence-3[_ngcontent-%COMP%]{top:275px;left:400px}.intelligence-4[_ngcontent-%COMP%]{top:275px;left:410px}.intelligence-5[_ngcontent-%COMP%]{top:275px;left:421px}.wits-2[_ngcontent-%COMP%]{top:316px;left:390px}.wits-3[_ngcontent-%COMP%]{top:316px;left:400px}.wits-4[_ngcontent-%COMP%]{top:316px;left:410px}.wits-5[_ngcontent-%COMP%]{top:316px;left:421px}.resolve-2[_ngcontent-%COMP%]{top:355px;left:389px}.resolve-3[_ngcontent-%COMP%]{top:355px;left:400px}.resolve-4[_ngcontent-%COMP%]{top:355px;left:410px}.resolve-5[_ngcontent-%COMP%]{top:355px;left:421px}.strength-2[_ngcontent-%COMP%]{top:276px;left:587px}.strength-3[_ngcontent-%COMP%]{top:276px;left:597px}.strength-4[_ngcontent-%COMP%]{top:276px;left:606px}.strength-5[_ngcontent-%COMP%]{top:276px;left:617px}.dexterity-2[_ngcontent-%COMP%]{top:316px;left:589px}.dexterity-3[_ngcontent-%COMP%]{top:316px;left:599px}.dexterity-4[_ngcontent-%COMP%]{top:316px;left:609px}.dexterity-5[_ngcontent-%COMP%]{top:316px;left:619px}.stamina-2[_ngcontent-%COMP%]{top:355px;left:589px}.stamina-3[_ngcontent-%COMP%]{top:355px;left:598px}.stamina-4[_ngcontent-%COMP%]{top:355px;left:608px}.stamina-5[_ngcontent-%COMP%]{top:355px;left:619px}.presence-2[_ngcontent-%COMP%]{top:275px;left:783px}.presence-3[_ngcontent-%COMP%]{top:275px;left:793px}.presence-4[_ngcontent-%COMP%]{top:275px;left:803px}.presence-5[_ngcontent-%COMP%]{top:275px;left:813px}.manipulation-2[_ngcontent-%COMP%]{top:318px;left:783px}.manipulation-3[_ngcontent-%COMP%]{top:318px;left:793px}.manipulation-4[_ngcontent-%COMP%]{top:318px;left:803px}.manipulation-5[_ngcontent-%COMP%]{top:318px;left:813px}.composure-2[_ngcontent-%COMP%]{top:357px;left:784px}.composure-3[_ngcontent-%COMP%]{top:357px;left:794px}.composure-4[_ngcontent-%COMP%]{top:357px;left:804px}.composure-5[_ngcontent-%COMP%]{top:357px;left:813px}.academics-1[_ngcontent-%COMP%]{top:494px;left:309px}.academics-2[_ngcontent-%COMP%]{top:494px;left:318px}.academics-3[_ngcontent-%COMP%]{top:494px;left:328px}.academics-4[_ngcontent-%COMP%]{top:494px;left:338px}.academics-5[_ngcontent-%COMP%]{top:494px;left:348px}.computer-1[_ngcontent-%COMP%]{top:516px;left:308px}.computer-2[_ngcontent-%COMP%]{top:516px;left:318px}.computer-3[_ngcontent-%COMP%]{top:516px;left:328px}.computer-4[_ngcontent-%COMP%]{top:516px;left:338px}.computer-5[_ngcontent-%COMP%]{top:516px;left:348px}.crafts-1[_ngcontent-%COMP%]{top:539px;left:309px}.crafts-2[_ngcontent-%COMP%]{top:539px;left:318px}.crafts-3[_ngcontent-%COMP%]{top:539px;left:328px}.crafts-4[_ngcontent-%COMP%]{top:539px;left:338px}.crafts-5[_ngcontent-%COMP%]{top:539px;left:348px}.investigation-1[_ngcontent-%COMP%]{top:561px;left:308px}.investigation-2[_ngcontent-%COMP%]{top:561px;left:318px}.investigation-3[_ngcontent-%COMP%]{top:561px;left:328px}.investigation-4[_ngcontent-%COMP%]{top:561px;left:338px}.investigation-5[_ngcontent-%COMP%]{top:561px;left:348px}.medicine-1[_ngcontent-%COMP%]{top:583px;left:309px}.medicine-2[_ngcontent-%COMP%]{top:583px;left:318px}.medicine-3[_ngcontent-%COMP%]{top:583px;left:328px}.medicine-4[_ngcontent-%COMP%]{top:583px;left:338px}.medicine-5[_ngcontent-%COMP%]{top:583px;left:347px}.occult-1[_ngcontent-%COMP%]{top:605px;left:308px}.occult-2[_ngcontent-%COMP%]{top:605px;left:318px}.occult-3[_ngcontent-%COMP%]{top:605px;left:328px}.occult-4[_ngcontent-%COMP%]{top:605px;left:338px}.occult-5[_ngcontent-%COMP%]{top:605px;left:348px}.politics-1[_ngcontent-%COMP%]{top:627px;left:308px}.politics-2[_ngcontent-%COMP%]{top:627px;left:318px}.politics-3[_ngcontent-%COMP%]{top:627px;left:328px}.politics-4[_ngcontent-%COMP%]{top:627px;left:338px}.politics-5[_ngcontent-%COMP%]{top:627px;left:348px}.science-1[_ngcontent-%COMP%]{top:649px;left:308px}.science-2[_ngcontent-%COMP%]{top:649px;left:318px}.science-3[_ngcontent-%COMP%]{top:649px;left:328px}.science-4[_ngcontent-%COMP%]{top:649px;left:338px}.science-5[_ngcontent-%COMP%]{top:649px;left:348px}.athletics-1[_ngcontent-%COMP%]{top:732px;left:308px}.athletics-2[_ngcontent-%COMP%]{top:732px;left:318px}.athletics-3[_ngcontent-%COMP%]{top:732px;left:328px}.athletics-4[_ngcontent-%COMP%]{top:732px;left:338px}.athletics-5[_ngcontent-%COMP%]{top:732px;left:347px}.brawl-1[_ngcontent-%COMP%]{top:754px;left:308px}.brawl-2[_ngcontent-%COMP%]{top:754px;left:318px}.brawl-3[_ngcontent-%COMP%]{top:754px;left:328px}.brawl-4[_ngcontent-%COMP%]{top:754px;left:338px}.brawl-5[_ngcontent-%COMP%]{top:754px;left:347px}.drive-1[_ngcontent-%COMP%]{top:777px;left:308px}.drive-2[_ngcontent-%COMP%]{top:777px;left:318px}.drive-3[_ngcontent-%COMP%]{top:777px;left:328px}.drive-4[_ngcontent-%COMP%]{top:777px;left:338px}.drive-5[_ngcontent-%COMP%]{top:777px;left:348px}.firearms-1[_ngcontent-%COMP%]{top:799px;left:308px}.firearms-2[_ngcontent-%COMP%]{top:799px;left:318px}.firearms-3[_ngcontent-%COMP%]{top:799px;left:328px}.firearms-4[_ngcontent-%COMP%]{top:799px;left:338px}.firearms-5[_ngcontent-%COMP%]{top:799px;left:348px}.larceny-1[_ngcontent-%COMP%]{top:821px;left:308px}.larceny-2[_ngcontent-%COMP%]{top:821px;left:318px}.larceny-3[_ngcontent-%COMP%]{top:821px;left:328px}.larceny-4[_ngcontent-%COMP%]{top:821px;left:338px}.larceny-5[_ngcontent-%COMP%]{top:821px;left:348px}.stealth-1[_ngcontent-%COMP%]{top:843px;left:307px}.stealth-2[_ngcontent-%COMP%]{top:843px;left:318px}.stealth-3[_ngcontent-%COMP%]{top:843px;left:328px}.stealth-4[_ngcontent-%COMP%]{top:843px;left:338px}.stealth-5[_ngcontent-%COMP%]{top:843px;left:347px}.survival-1[_ngcontent-%COMP%]{top:865px;left:308px}.survival-2[_ngcontent-%COMP%]{top:865px;left:318px}.survival-3[_ngcontent-%COMP%]{top:865px;left:328px}.survival-4[_ngcontent-%COMP%]{top:865px;left:338px}.survival-5[_ngcontent-%COMP%]{top:865px;left:347px}.weaponry-1[_ngcontent-%COMP%]{top:887px;left:309px}.weaponry-2[_ngcontent-%COMP%]{top:887px;left:318px}.weaponry-3[_ngcontent-%COMP%]{top:887px;left:328px}.weaponry-4[_ngcontent-%COMP%]{top:887px;left:338px}.weaponry-5[_ngcontent-%COMP%]{top:887px;left:347px}.animalken-1[_ngcontent-%COMP%]{top:970px;left:311px}.animalken-2[_ngcontent-%COMP%]{top:970px;left:321px}.animalken-3[_ngcontent-%COMP%]{top:970px;left:331px}.animalken-4[_ngcontent-%COMP%]{top:970px;left:341px}.animalken-5[_ngcontent-%COMP%]{top:970px;left:351px}.empathy-1[_ngcontent-%COMP%]{top:992px;left:311px}.empathy-2[_ngcontent-%COMP%]{top:992px;left:321px}.empathy-3[_ngcontent-%COMP%]{top:992px;left:331px}.empathy-4[_ngcontent-%COMP%]{top:992px;left:341px}.empathy-5[_ngcontent-%COMP%]{top:992px;left:351px}.expression-1[_ngcontent-%COMP%]{top:1014px;left:312px}.expression-2[_ngcontent-%COMP%]{top:1014px;left:321px}.expression-3[_ngcontent-%COMP%]{top:1014px;left:331px}.expression-4[_ngcontent-%COMP%]{top:1014px;left:341px}.expression-5[_ngcontent-%COMP%]{top:1014px;left:351px}.intimidation-1[_ngcontent-%COMP%]{top:1036px;left:311px}.intimidation-2[_ngcontent-%COMP%]{top:1036px;left:321px}.intimidation-3[_ngcontent-%COMP%]{top:1036px;left:331px}.intimidation-4[_ngcontent-%COMP%]{top:1036px;left:341px}.intimidation-5[_ngcontent-%COMP%]{top:1036px;left:351px}.persuasion-1[_ngcontent-%COMP%]{top:1058px;left:312px}.persuasion-2[_ngcontent-%COMP%]{top:1058px;left:321px}.persuasion-3[_ngcontent-%COMP%]{top:1058px;left:331px}.persuasion-4[_ngcontent-%COMP%]{top:1058px;left:341px}.persuasion-5[_ngcontent-%COMP%]{top:1058px;left:351px}.socialize-1[_ngcontent-%COMP%]{top:1081px;left:312px}.socialize-2[_ngcontent-%COMP%]{top:1081px;left:321px}.socialize-3[_ngcontent-%COMP%]{top:1081px;left:331px}.socialize-4[_ngcontent-%COMP%]{top:1081px;left:341px}.socialize-5[_ngcontent-%COMP%]{top:1081px;left:351px}.streetwise-1[_ngcontent-%COMP%]{top:1103px;left:312px}.streetwise-2[_ngcontent-%COMP%]{top:1103px;left:321px}.streetwise-3[_ngcontent-%COMP%]{top:1103px;left:331px}.streetwise-4[_ngcontent-%COMP%]{top:1103px;left:341px}.streetwise-5[_ngcontent-%COMP%]{top:1103px;left:351px}.subterfuge-1[_ngcontent-%COMP%]{top:1125px;left:311px}.subterfuge-2[_ngcontent-%COMP%]{top:1125px;left:321px}.subterfuge-3[_ngcontent-%COMP%]{top:1125px;left:331px}.subterfuge-4[_ngcontent-%COMP%]{top:1125px;left:341px}.subterfuge-5[_ngcontent-%COMP%]{top:1125px;left:351px}.health-1[_ngcontent-%COMP%]{top:477px;left:627px}.health-2[_ngcontent-%COMP%]{top:477px;left:644px}.health-3[_ngcontent-%COMP%]{top:477px;left:660px}.health-4[_ngcontent-%COMP%]{top:477px;left:677px}.health-5[_ngcontent-%COMP%]{top:477px;left:694px}.health-6[_ngcontent-%COMP%]{top:477px;left:710px}.health-7[_ngcontent-%COMP%]{top:477px;left:727px}.health-8[_ngcontent-%COMP%]{top:477px;left:744px}.health-9[_ngcontent-%COMP%]{top:477px;left:760px}.health-10[_ngcontent-%COMP%]{top:477px;left:777px}.health-11[_ngcontent-%COMP%]{top:477px;left:794px}.health-12[_ngcontent-%COMP%]{top:477px;left:810px}.willpower-1[_ngcontent-%COMP%]{top:561px;left:643px}.willpower-2[_ngcontent-%COMP%]{top:561px;left:660px}.willpower-3[_ngcontent-%COMP%]{top:561px;left:677px}.willpower-4[_ngcontent-%COMP%]{top:561px;left:693px}.willpower-5[_ngcontent-%COMP%]{top:561px;left:710px}.willpower-6[_ngcontent-%COMP%]{top:561px;left:727px}.willpower-7[_ngcontent-%COMP%]{top:561px;left:743px}.willpower-8[_ngcontent-%COMP%]{top:561px;left:760px}.willpower-9[_ngcontent-%COMP%]{top:561px;left:777px}.willpower-10[_ngcontent-%COMP%]{top:561px;left:793px}.morality-1[_ngcontent-%COMP%]{top:838px;left:794px}.morality-2[_ngcontent-%COMP%]{top:815px;left:794px}.morality-3[_ngcontent-%COMP%]{top:793px;left:794px}.morality-4[_ngcontent-%COMP%]{top:771px;left:794px}.morality-5[_ngcontent-%COMP%]{top:749px;left:794px}.morality-6[_ngcontent-%COMP%]{top:727px;left:794px}.morality-7[_ngcontent-%COMP%]{top:704px;left:794px}.morality-8[_ngcontent-%COMP%]{top:682px;left:794px}.morality-9[_ngcontent-%COMP%]{top:660px;left:794px}.morality-10[_ngcontent-%COMP%]{top:638px;left:794px}input[name=size][_ngcontent-%COMP%]{top:793px;left:421px;width:176px}input[name=speed][_ngcontent-%COMP%]{top:819px;left:430px;width:167px}input[name=initiative][_ngcontent-%COMP%]{top:849px;left:484px;width:113px}input[name=defense][_ngcontent-%COMP%]{top:879px;left:446px;width:151px}input[name=armor][_ngcontent-%COMP%]{top:909px;left:434px;width:163px}.li-empty[_ngcontent-%COMP%]{list-style:none;height:15px}"]}),t})();function Q(t,e){if(1&t){const t=a.Qb();a.Pb(0,"input",46),a.Xb("ngModelChange",(function(n){a.ic(t);const r=e.$implicit;return a.ac().form[r]=n}))("ngModelChange",(function(){return a.ic(t),a.ac().formChanged()})),a.Ob()}if(2&t){const t=e.$implicit,n=a.ac();a.dc("ngModel",n.form[t]),a.Ab("name",t)}}function $(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",48),a.Xb("click",(function(){a.ic(t);const e=a.ac().$implicit,n=a.ac().$implicit;return a.ac().clickDot(n,e)})),a.Ob()}if(2&t){const t=a.ac().$implicit,e=a.ac().$implicit,n=a.ac();a.Db("dot ",e,"-",t,""),a.Eb("filled",n.form[e]+(n.form.favoredAttribute===e?1:0)>=t)("favored",n.form.favoredAttribute===e&&2===t)}}function J(t,e){1&t&&a.nc(0,$,1,8,"ng-template",47),2&t&&a.dc("ngIf",e.$implicit>1)}function Y(t,e){if(1&t&&a.nc(0,J,1,1,"ng-template",10),2&t){const t=a.ac();a.dc("ngForOf",t.arrayOfFive)}}function H(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",48),a.Xb("click",(function(){a.ic(t);const n=e.$implicit,r=a.ac().$implicit;return a.ac().clickDot(r,n)})),a.Ob()}if(2&t){const t=e.$implicit,n=a.ac().$implicit,r=a.ac();a.Db("dot ",n,"-",t,""),a.Eb("filled",r.form[n]>=t)}}function Z(t,e){if(1&t&&(a.Nb(0,"div"),a.nc(1,H,1,6,"ng-template",10)),2&t){const t=e.$implicit,n=a.ac();a.Cb("square rote ",t,"-rote"),a.Eb("filled",n.form.skillRotes[t]),a.zb(1),a.dc("ngForOf",n.arrayOfFive)}}function tt(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",48),a.Xb("click",(function(){a.ic(t);const n=e.$implicit,r=a.ac().$implicit;return a.ac().clickDot("merits-"+r,n)})),a.Ob()}if(2&t){const t=e.$implicit,n=a.ac().$implicit,r=a.ac();a.Db("dot merit-",n,"-",t,""),a.Eb("filled",r.form["merits-"+n]>=t)}}function et(t,e){if(1&t){const t=a.Qb();a.Pb(0,"input",49),a.Xb("ngModelChange",(function(n){a.ic(t);const r=e.$implicit;return a.ac().form.merits[r+"-name"]=n}))("ngModelChange",(function(){return a.ic(t),a.ac().formChanged()})),a.Ob(),a.nc(1,tt,1,6,"ng-template",10)}if(2&t){const t=e.$implicit,n=a.ac();a.dc("ngModel",n.form.merits[t+"-name"]),a.Ab("name","merit-"+t),a.zb(1),a.dc("ngForOf",n.arrayOfFive)}}function nt(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",48),a.Xb("click",(function(){a.ic(t);const n=e.$implicit,r=a.ac().$implicit;return a.ac().clickDot(r,n)})),a.Ob()}if(2&t){const t=e.$implicit,n=a.ac().$implicit,r=a.ac();a.Db("dot ",n,"-",t,""),a.Eb("filled",r.form[n]>=t)}}function rt(t,e){if(1&t&&a.nc(0,nt,1,6,"ng-template",10),2&t){const t=a.ac();a.dc("ngForOf",t.arrayOfFive)}}function it(t,e){if(1&t&&a.Nb(0,"div"),2&t){const t=e.$implicit,n=a.ac();a.Cb("dot health health-",t,""),a.Eb("filled",n.form.health>=t)}}function ot(t,e){if(1&t&&a.Nb(0,"div"),2&t){const t=e.$implicit,n=a.ac();a.Cb("dot willpower willpower-",t,""),a.Eb("filled",n.form.willpower>=t)}}function st(t,e){if(1&t&&a.Nb(0,"div"),2&t){const t=e.$implicit,n=a.ac();a.Cb("square mana mana-",t,""),a.Eb("filled",n.form.mana>=t)}}function at(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",48),a.Xb("click",(function(){a.ic(t);const n=e.$implicit;return a.ac().clickDot("gnosis",n)})),a.Ob()}if(2&t){const t=e.$implicit,n=a.ac();a.Cb("dot gnosis gnosis-",t,""),a.Eb("filled",n.form.gnosis>=t)}}function ut(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",48),a.Xb("click",(function(){a.ic(t);const n=e.$implicit;return a.ac().clickDot("morality",n)})),a.Ob()}if(2&t){const t=e.$implicit,n=a.ac();a.Cb("dot morality-",t,""),a.Eb("filled",n.form.morality>=t)}}let ct=(()=>{class t{constructor(t,e,n,r){this.activatedRoute=t,this.router=e,this.auth=n,this.form={skillRotes:{},merits:{}},this.arrayOfCharacter=["name","player","chronicle","concept","cabal"],this.arrayOfFive=[1,2,3,4,5],this.arrayOfEight=[1,2,3,4,5,6,7,8],this.arrayOfTen=[1,2,3,4,5,6,7,8,9,10],this.arrayOfFifteen=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],this.arrayOfTwenty=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],this.arrayOfAttributes=["intelligence","wits","resolve","strength","dexterity","stamina","presence","manipulation","composure"],this.arrayOfSkills=["academics","computer","crafts","investigation","medicine","occult","politics","science","athletics","brawl","drive","firearms","larceny","stealth","survival","weaponry","animalken","empathy","expression","intimidation","persuasion","socialize","streetwise","subterfuge"],this.arrayOfArcanas=["destin","espace","esprit","forces","matiere","mort","prime","psyche","temps","vie"],this.debug=!1,this.resetSheet(),n.authState.subscribe(t=>{if(!t)return void window.alert("Va sur https://raphaelyan.github.io/rpg-digital-tools et connecte toi !");this.user=t;const e=this.activatedRoute.snapshot.params;if(e.id)this.characterDoc=r.doc("characters/"+e.id),this.character=this.characterDoc.snapshotChanges(),this.character.subscribe(t=>{this.form=Object.assign(this.form,t.payload.data()),this.formChanged()});else{if(localStorage.getItem("sheet-mage")){this.charactersCollection=r.collection("characters",e=>e.where("userid","==",t.uid).orderBy("timestamp","asc"));const e=JSON.parse(localStorage.getItem("sheet-mage")),n=Object.assign(e,{name:e.name||"Personnage sans nom",userid:this.user.uid,timestamp:Date.now()});this.charactersCollection.add(n)}this.router.navigateByUrl("/nwod")}})}saveSheet(){this.characterDoc.update(this.form)}clickDot(t,e){if(this.form.favoredAttribute===t){if(1===this.form[t]&&e<=2)return;e-=1}this.form[t]<e?this.form[t]++:this.form[t]--,this.formChanged()}selectChanged(){if(this.form.path){const t=["mastigos","obrimos"];["acanthus","moros","thyrsus"].includes(this.form.path)?this.form.favoredAttribute="composure":t.includes(this.form.path)&&(this.form.favoredAttribute="resolve")}this.form.order&&(this.form.skillRotes={},"adamantine_arrow"===this.form.order?(this.form.skillRotes.athletics=!0,this.form.skillRotes.intimidation=!0,this.form.skillRotes.medicine=!0):"free_council"===this.form.order?(this.form.skillRotes.crafts=!0,this.form.skillRotes.persuasion=!0,this.form.skillRotes.science=!0):"guardians_of_the__veil"===this.form.order?(this.form.skillRotes.investigation=!0,this.form.skillRotes.stealth=!0,this.form.skillRotes.subterfuge=!0):"mysterium"===this.form.order?(this.form.skillRotes.investigation=!0,this.form.skillRotes.occult=!0,this.form.skillRotes.survival=!0):"silver_ldder"===this.form.order&&(this.form.skillRotes.expression=!0,this.form.skillRotes.persuasion=!0,this.form.skillRotes.subterfuge=!0)),this.formChanged()}formChanged(t=!1){if(this.form.speed=this.form.strength+this.form.dexterity+5,this.form.initiative=this.form.dexterity+this.form.composure,this.form.defense=Math.min(this.form.dexterity,this.form.wits),this.form.health=this.form.size+this.form.stamina,this.form.willpower=this.form.resolve+this.form.composure,this.form.mana=this.form.morality,!t){const t=JSON.stringify(this.form);localStorage.setItem("sheet-mage",t)}}eraseSheet(){this.resetSheet(),this.formChanged(!1)}resetSheet(){for(const t of this.arrayOfCharacter)this.form[t]="";for(const t of this.arrayOfAttributes)this.form[t]=1;for(const t of this.arrayOfSkills)this.form[t]=0;for(const t of this.arrayOfArcanas)this.form[t]=0;this.form.merits={};for(const t of this.arrayOfEight)this.form["merits-"+t]=0;this.form.vice="",this.form.virtue="",this.form.path="",this.form.order="",this.form.skillRotes={},this.form.size=5,this.form.morality=7,this.form.gnosis=1,this.form.favoredAttribute="",this.formChanged(!0)}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(o.a),a.Mb(o.b),a.Mb(u.a),a.Mb(S))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-nwod-mage-new"]],decls:228,vars:23,consts:[[1,"row"],[1,"col-12","col-sm-6"],[1,"scrollable"],[1,"li-empty"],[1,"col-12","col-sm-4"],["type","button",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"sheet-container"],["src","assets/nwod/mage_eveil_vf-1.jpg",1,"sheet"],["src","assets/nwod/mage_eveil_vf-2.jpg",1,"sheet"],["ngFor","",3,"ngForOf"],["name","virtue",3,"ngModel","ngModelChange"],["value","charite"],["value","foi"],["value","courage"],["value","espoir"],["value","justice"],["value","prudence"],["value","temperance"],["name","vice",3,"ngModel","ngModelChange"],["value","envie"],["value","gourmandise"],["value","avidite"],["value","luxure"],["value","orgueil"],["value","paresse"],["value","colere"],["name","path",3,"ngModel","ngModelChange"],["value","acanthus"],["value","mastigos"],["value","moros"],["value","obrimos"],["value","thyrsus"],["name","order",3,"ngModel","ngModelChange"],["value","adamantine_arrow"],["value","free_council"],["value","guardians_of_the__veil"],["value","mysterium"],["value","silver_ldder"],["type","text","name","flaw-1",3,"ngModel","ngModelChange"],["type","text","name","flaw-2",3,"ngModel","ngModelChange"],["type","text","name","flaw-3",3,"ngModel","ngModelChange"],["type","number","name","size",3,"ngModel","ngModelChange"],["type","number","name","defense","disabled","",3,"ngModel"],["type","number","name","initiative","disabled","",3,"ngModel"],["type","number","name","speed","disabled","",3,"ngModel"],["type","text","maxlength","18",1,"border-bottom",3,"ngModel","ngModelChange"],[3,"ngIf"],[3,"click"],["type","text",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(a.Pb(0,"div",0),a.Pb(1,"div",1),a.Pb(2,"h2"),a.pc(3,"Etape 1"),a.Ob(),a.Pb(4,"ul"),a.Pb(5,"li"),a.pc(6,'Choisir un "concept" de personnage, votre nom et votre \xe2ge'),a.Ob(),a.Pb(7,"li"),a.pc(8,"Le concept est souvent bas\xe9 sur un m\xe9tier"),a.Ob(),a.Pb(9,"li"),a.pc(10,"Exemples : journaliste, policier, SDF, hacker, ..."),a.Ob(),a.Ob(),a.Pb(11,"h2"),a.pc(12,"Etape 2"),a.Ob(),a.Pb(13,"ul"),a.Pb(14,"li"),a.pc(15,'Choisir les "attributs", qui sont r\xe9partis en en 3 groupes (Mental, Physique, Social)'),a.Ob(),a.Pb(16,"li"),a.pc(17,"5 points pour un groupe, 4 pour un autre et 3 pour le dernier"),a.Ob(),a.Pb(18,"li"),a.pc(19,"Vous ne pouvez prendre le 5\xe8me point dans un attribut"),a.Ob(),a.Ob(),a.Pb(20,"h2"),a.pc(21,"Etape 3"),a.Ob(),a.Pb(22,"ul"),a.Pb(23,"li"),a.pc(24,'Choisir les "comp\xe9tences", qui sont r\xe9partis en 3 groupes (Mental, Physique, Social)'),a.Ob(),a.Pb(25,"li"),a.pc(26,"11 points pour un groupe, 7 pour un autre et 4 pour le dernier"),a.Ob(),a.Pb(27,"li"),a.pc(28,"Vous ne pouvez prendre le 5\xe8me point dans une comp\xe9tence"),a.Ob(),a.Pb(29,"li"),a.pc(30,'Vous ne pouvez prendre la comp\xe9tence "occult"'),a.Ob(),a.Ob(),a.Ob(),a.Pb(31,"div",1),a.Pb(32,"h2"),a.pc(33,"Lexique"),a.Ob(),a.Pb(34,"ul",2),a.Pb(35,"li"),a.pc(36,"Intelligence : capacit\xe9s cognitives"),a.Ob(),a.Pb(37,"li"),a.pc(38,"Astuce : capacit\xe9s de r\xe9flexion"),a.Ob(),a.Pb(39,"li"),a.pc(40,"R\xe9solution : concentration, d\xe9termination"),a.Ob(),a.Pb(41,"li"),a.pc(42,"Force : puissance physique"),a.Ob(),a.Pb(43,"li"),a.pc(44,"Dext\xe9rit\xe9 : rapidit\xe9, finesse"),a.Ob(),a.Pb(45,"li"),a.pc(46,"Vigueur : vigueur, r\xe9sistance physique"),a.Ob(),a.Pb(47,"li"),a.pc(48,"Pr\xe9sence : prestance, stature, attrait"),a.Ob(),a.Pb(49,"li"),a.pc(50,"Manipulation : charme, persuasion"),a.Ob(),a.Pb(51,"li"),a.pc(52,"Calme : calme, assurance"),a.Ob(),a.Nb(53,"li",3),a.Pb(54,"li"),a.pc(55,"Artisanat : r\xe9parations"),a.Ob(),a.Pb(56,"li"),a.pc(57,"Erudition : connaissances"),a.Ob(),a.Pb(58,"li"),a.pc(59,"Informatique : informatique, programmation"),a.Ob(),a.Pb(60,"li"),a.pc(61,"Investigation : recherche, \xe9nigmes"),a.Ob(),a.Pb(62,"li"),a.pc(63,"M\xe9dicine : physiologie humaine, blessures"),a.Ob(),a.Pb(64,"li"),a.pc(65,"Occulte : surnaturel, l\xe9gendes"),a.Ob(),a.Pb(66,"li"),a.pc(67,"Politique : bureaucratie, contacts"),a.Ob(),a.Pb(68,"li"),a.pc(69,"Science : physique, chimie, biologie, ..."),a.Ob(),a.Pb(70,"li"),a.pc(71,"Armes \xe0 feu : pistolets, fusils d'assault"),a.Ob(),a.Pb(72,"li"),a.pc(73,"Armes blanches"),a.Ob(),a.Pb(74,"li"),a.pc(75,"Athl\xe9tisme : escalade, course, jeter un truc"),a.Ob(),a.Pb(76,"li"),a.pc(77,"Bagarre : combat \xe0 mains nues"),a.Ob(),a.Pb(78,"li"),a.pc(79,"Conduite : voitures, bateaux, course poursuite"),a.Ob(),a.Pb(80,"li"),a.pc(81,"Furtivit\xe9 : discr\xe9tion, d\xe9placement silencieux"),a.Ob(),a.Pb(82,"li"),a.pc(83,"Larcin : crochetage, vol \xe0 la tire"),a.Ob(),a.Pb(84,"li"),a.pc(85,"Survival : trouver \xe0 manger, un refuge"),a.Ob(),a.Pb(86,"li"),a.pc(87,"Animal ken : comportement des animaux"),a.Ob(),a.Pb(88,"li"),a.pc(89,"Empathy : intuition, lire les \xe9motions"),a.Ob(),a.Pb(90,"li"),a.pc(91,"Expression : art de la communication"),a.Ob(),a.Pb(92,"li"),a.pc(93,"Intimidation : via la peur, la force"),a.Ob(),a.Pb(94,"li"),a.pc(95,"Persuasion : via le charme, la diplomatie"),a.Ob(),a.Pb(96,"li"),a.pc(97,"Socialize : \xe9tiquette, sociabilit\xe9"),a.Ob(),a.Pb(98,"li"),a.pc(99,"Streetwise : connaissance de la rue, march\xe9 noir"),a.Ob(),a.Pb(100,"li"),a.pc(101,"Subterfuge : mensonges, cacher des \xe9motions"),a.Ob(),a.Nb(102,"li",3),a.Pb(103,"li"),a.pc(104,'Health : vos "points de vie"'),a.Ob(),a.Pb(105,"li"),a.pc(106,'Willpower : votre "volont\xe9"; d\xe9penser 1 point ajoute 3 d\xe9s \xe0 un jet'),a.Ob(),a.Pb(107,"li"),a.pc(108,'Morality : votre "humanit\xe9", \xe9vitez de d\xe9capiter des gens ;)'),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Nb(109,"hr"),a.Pb(110,"div",0),a.Pb(111,"div",4),a.Pb(112,"h4"),a.pc(113,"Attributes"),a.Ob(),a.Pb(114,"ul"),a.Pb(115,"li"),a.pc(116,"1 = faible, non pratiqu\xe9"),a.Ob(),a.Pb(117,"li"),a.pc(118,"2 = moyen, efforts occasionnels"),a.Ob(),a.Pb(119,"li"),a.pc(120,"3 = bon, pratique r\xe9guli\xe8rement"),a.Ob(),a.Pb(121,"li"),a.pc(122,"4 = exceptionnel, don naturel"),a.Ob(),a.Pb(123,"li"),a.pc(124,"5 = hors du commun"),a.Ob(),a.Ob(),a.Ob(),a.Pb(125,"div",4),a.Pb(126,"h4"),a.pc(127,"Skills"),a.Ob(),a.Pb(128,"ul"),a.Pb(129,"li"),a.pc(130,"1 = novice"),a.Ob(),a.Pb(131,"li"),a.pc(132,"2 = praticien"),a.Ob(),a.Pb(133,"li"),a.pc(134,"3 = professionnel"),a.Ob(),a.Pb(135,"li"),a.pc(136,"4 = expert"),a.Ob(),a.Pb(137,"li"),a.pc(138,"5 = ma\xeetre"),a.Ob(),a.Ob(),a.Ob(),a.Pb(139,"div",4),a.Pb(140,"h4"),a.pc(141,"Health"),a.Ob(),a.Pb(142,"ul"),a.Pb(143,"li"),a.pc(144,'D\xe9g\xe2ts "contondants", r\xe9cup\xe8re 1 point / 15 min (ex: batte de baseball)'),a.Ob(),a.Pb(145,"li"),a.pc(146,'D\xe9g\xe2ts "l\xe9taux", r\xe9cup\xe8re 1 point / 2 jours (ex: pistolet)'),a.Ob(),a.Pb(147,"li"),a.pc(148,'D\xe9g\xe2ts "aggrav\xe9s", r\xe9cup\xe8re 1 point / 2 semaines (ex: lance-flamme)'),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Nb(149,"hr"),a.Pb(150,"button",5),a.Xb("click",(function(){return e.debug=!e.debug})),a.pc(151,"toggle DEBUG mode"),a.Ob(),a.Pb(152,"button",5),a.Xb("click",(function(){return e.eraseSheet()})),a.pc(153,"Reset sheet"),a.Ob(),a.Pb(154,"button",6),a.Xb("click",(function(){return e.saveSheet()})),a.pc(155,"SAUVEGARDER"),a.Ob(),a.Pb(156,"div",7),a.Nb(157,"img",8),a.Nb(158,"img",9),a.nc(159,Q,1,2,"ng-template",10),a.Pb(160,"select",11),a.Xb("ngModelChange",(function(t){return e.form.virtue=t})),a.Pb(161,"option",12),a.pc(162,"Charit\xe9"),a.Ob(),a.Pb(163,"option",13),a.pc(164,"Foi"),a.Ob(),a.Pb(165,"option",14),a.pc(166,"Courage"),a.Ob(),a.Pb(167,"option",15),a.pc(168,"Espoir"),a.Ob(),a.Pb(169,"option",16),a.pc(170,"Justice"),a.Ob(),a.Pb(171,"option",17),a.pc(172,"Prudence"),a.Ob(),a.Pb(173,"option",18),a.pc(174,"Temp\xe9rance"),a.Ob(),a.Ob(),a.Pb(175,"select",19),a.Xb("ngModelChange",(function(t){return e.form.vice=t})),a.Pb(176,"option",20),a.pc(177,"Envie"),a.Ob(),a.Pb(178,"option",21),a.pc(179,"Gourmandise"),a.Ob(),a.Pb(180,"option",22),a.pc(181,"Avidit\xe9"),a.Ob(),a.Pb(182,"option",23),a.pc(183,"Luxure"),a.Ob(),a.Pb(184,"option",24),a.pc(185,"Orgueil"),a.Ob(),a.Pb(186,"option",25),a.pc(187,"Paresse"),a.Ob(),a.Pb(188,"option",26),a.pc(189,"Col\xe8re"),a.Ob(),a.Ob(),a.Pb(190,"select",27),a.Xb("ngModelChange",(function(t){return e.form.path=t}))("ngModelChange",(function(){return e.selectChanged()})),a.Pb(191,"option",28),a.pc(192,"Acanthus"),a.Ob(),a.Pb(193,"option",29),a.pc(194,"Mastigos"),a.Ob(),a.Pb(195,"option",30),a.pc(196,"Moros"),a.Ob(),a.Pb(197,"option",31),a.pc(198,"Obrimos"),a.Ob(),a.Pb(199,"option",32),a.pc(200,"Thyrsus"),a.Ob(),a.Ob(),a.Pb(201,"select",33),a.Xb("ngModelChange",(function(t){return e.form.order=t}))("ngModelChange",(function(){return e.selectChanged()})),a.Pb(202,"option",34),a.pc(203,"Fl\xe8che d'adamantine"),a.Ob(),a.Pb(204,"option",35),a.pc(205,"Conseil libre"),a.Ob(),a.Pb(206,"option",36),a.pc(207,"Gardiens du voile"),a.Ob(),a.Pb(208,"option",37),a.pc(209,"Mysterium"),a.Ob(),a.Pb(210,"option",38),a.pc(211,"Echelle d'argent"),a.Ob(),a.Ob(),a.nc(212,Y,1,1,"ng-template",10),a.nc(213,Z,2,6,"ng-template",10),a.nc(214,et,2,3,"ng-template",10),a.Pb(215,"input",39),a.Xb("ngModelChange",(function(t){return e.form["flaw-1"]=t}))("ngModelChange",(function(){return e.formChanged()})),a.Ob(),a.Pb(216,"input",40),a.Xb("ngModelChange",(function(t){return e.form["flaw-2"]=t}))("ngModelChange",(function(){return e.formChanged()})),a.Ob(),a.Pb(217,"input",41),a.Xb("ngModelChange",(function(t){return e.form["flaw-3"]=t}))("ngModelChange",(function(){return e.formChanged()})),a.Ob(),a.Pb(218,"input",42),a.Xb("ngModelChange",(function(t){return e.form.size=t}))("ngModelChange",(function(){return e.formChanged()})),a.Ob(),a.Nb(219,"input",43),a.Nb(220,"input",44),a.Nb(221,"input",45),a.nc(222,rt,1,1,"ng-template",10),a.nc(223,it,1,5,"ng-template",10),a.nc(224,ot,1,5,"ng-template",10),a.nc(225,st,1,5,"ng-template",10),a.nc(226,at,1,5,"ng-template",10),a.nc(227,ut,1,5,"ng-template",10),a.Ob()),2&t&&(a.zb(156),a.Eb("debug",e.debug),a.zb(3),a.dc("ngForOf",e.arrayOfCharacter),a.zb(1),a.dc("ngModel",e.form.virtue),a.zb(15),a.dc("ngModel",e.form.vice),a.zb(15),a.dc("ngModel",e.form.path),a.zb(11),a.dc("ngModel",e.form.order),a.zb(11),a.dc("ngForOf",e.arrayOfAttributes),a.zb(1),a.dc("ngForOf",e.arrayOfSkills),a.zb(1),a.dc("ngForOf",e.arrayOfEight),a.zb(1),a.dc("ngModel",e.form["flaw-1"]),a.zb(1),a.dc("ngModel",e.form["flaw-2"]),a.zb(1),a.dc("ngModel",e.form["flaw-3"]),a.zb(1),a.dc("ngModel",e.form.size),a.zb(1),a.dc("ngModel",e.form.defense),a.zb(1),a.dc("ngModel",e.form.initiative),a.zb(1),a.dc("ngModel",e.form.speed),a.zb(1),a.dc("ngForOf",e.arrayOfArcanas),a.zb(1),a.dc("ngForOf",e.arrayOfFifteen),a.zb(1),a.dc("ngForOf",e.arrayOfTen),a.zb(1),a.dc("ngForOf",e.arrayOfTwenty),a.zb(1),a.dc("ngForOf",e.arrayOfTen),a.zb(1),a.dc("ngForOf",e.arrayOfTen))},directives:[r.i,i.i,i.e,i.f,i.g,i.j,i.b,i.h,i.d,r.j],styles:[".debug[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .debug[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid red}.debug[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:not(.filled), .debug[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:not(.filled){background:red}.sheet-container[_ngcontent-%COMP%]{position:relative}.sheet[_ngcontent-%COMP%]{width:970px}@media (min-width:576px){.scrollable[_ngcontent-%COMP%]{height:293px;overflow-y:scroll}}@media (max-width:576px){ul[_ngcontent-%COMP%]{padding-left:20px}}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{z-index:10;position:absolute;width:140px;padding:0 2px;border:none;background-color:transparent;outline:none;font-size:14px}input[_ngcontent-%COMP%]:hover, select[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.1)}input[_ngcontent-%COMP%]{cursor:text}select[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid}.dot[_ngcontent-%COMP%]{z-index:10;position:absolute;width:11px;height:14px;border-radius:50%;cursor:pointer}.dot[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.3)}.dot.filled[_ngcontent-%COMP%]{background:#000}.dot.gnosis[_ngcontent-%COMP%], .dot.health[_ngcontent-%COMP%], .dot.willpower[_ngcontent-%COMP%]{width:13px;height:16px}.dot.favored[_ngcontent-%COMP%]{background-color:#f08080}.square[_ngcontent-%COMP%]{z-index:10;position:absolute;width:14px;height:14px;cursor:pointer}.square[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.3)}.square.filled[_ngcontent-%COMP%]{background:#000}.square.rote[_ngcontent-%COMP%]{width:16px;height:16px}input[name=name][_ngcontent-%COMP%]{top:215px;left:187px;width:165px}input[name=player][_ngcontent-%COMP%]{top:255px;left:187px;width:165px}input[name=chronicle][_ngcontent-%COMP%]{top:295px;left:187px;width:165px}input[name=concept][_ngcontent-%COMP%]{top:215px;left:503px;width:164px}select[name=virtue][_ngcontent-%COMP%]{top:255px;left:503px;width:164px}select[name=vice][_ngcontent-%COMP%]{top:295px;left:503px;width:164px}select[name=path][_ngcontent-%COMP%]{top:215px;left:773px;width:153px}select[name=order][_ngcontent-%COMP%]{top:255px;left:773px;width:153px}input[name=cabal][_ngcontent-%COMP%]{top:295px;left:773px;width:153px}.intelligence-2[_ngcontent-%COMP%]{top:401px;left:325px}.intelligence-3[_ngcontent-%COMP%]{top:401px;left:342px}.intelligence-4[_ngcontent-%COMP%]{top:401px;left:358px}.intelligence-5[_ngcontent-%COMP%]{top:401px;left:375px}.wits-2[_ngcontent-%COMP%]{top:437px;left:325px}.wits-3[_ngcontent-%COMP%]{top:437px;left:342px}.wits-4[_ngcontent-%COMP%]{top:437px;left:358px}.wits-5[_ngcontent-%COMP%]{top:437px;left:375px}.resolve-2[_ngcontent-%COMP%]{top:474px;left:325px}.resolve-3[_ngcontent-%COMP%]{top:474px;left:342px}.resolve-4[_ngcontent-%COMP%]{top:474px;left:358px}.resolve-5[_ngcontent-%COMP%]{top:474px;left:375px}.strength-2[_ngcontent-%COMP%]{top:401px;left:568px}.strength-3[_ngcontent-%COMP%]{top:401px;left:585px}.strength-4[_ngcontent-%COMP%]{top:401px;left:602px}.strength-5[_ngcontent-%COMP%]{top:401px;left:618px}.dexterity-2[_ngcontent-%COMP%]{top:437px;left:568px}.dexterity-3[_ngcontent-%COMP%]{top:437px;left:585px}.dexterity-4[_ngcontent-%COMP%]{top:437px;left:602px}.dexterity-5[_ngcontent-%COMP%]{top:437px;left:618px}.stamina-2[_ngcontent-%COMP%]{top:474px;left:568px}.stamina-3[_ngcontent-%COMP%]{top:474px;left:585px}.stamina-4[_ngcontent-%COMP%]{top:474px;left:602px}.stamina-5[_ngcontent-%COMP%]{top:474px;left:618px}.presence-2[_ngcontent-%COMP%]{top:401px;left:835px}.presence-3[_ngcontent-%COMP%]{top:401px;left:851px}.presence-4[_ngcontent-%COMP%]{top:401px;left:868px}.presence-5[_ngcontent-%COMP%]{top:401px;left:885px}.manipulation-2[_ngcontent-%COMP%]{top:437px;left:835px}.manipulation-3[_ngcontent-%COMP%]{top:437px;left:851px}.manipulation-4[_ngcontent-%COMP%]{top:437px;left:868px}.manipulation-5[_ngcontent-%COMP%]{top:437px;left:885px}.composure-2[_ngcontent-%COMP%]{top:474px;left:835px}.composure-3[_ngcontent-%COMP%]{top:474px;left:851px}.composure-4[_ngcontent-%COMP%]{top:474px;left:868px}.composure-5[_ngcontent-%COMP%]{top:474px;left:885px}.crafts-rote[_ngcontent-%COMP%]{top:590px;left:51px}.crafts-1[_ngcontent-%COMP%]{top:595px;left:212px}.crafts-2[_ngcontent-%COMP%]{top:595px;left:229px}.crafts-3[_ngcontent-%COMP%]{top:595px;left:246px}.crafts-4[_ngcontent-%COMP%]{top:595px;left:264px}.crafts-5[_ngcontent-%COMP%]{top:595px;left:281px}.academics-rote[_ngcontent-%COMP%]{top:617px;left:51px}.academics-1[_ngcontent-%COMP%]{top:622px;left:212px}.academics-2[_ngcontent-%COMP%]{top:622px;left:229px}.academics-3[_ngcontent-%COMP%]{top:622px;left:246px}.academics-4[_ngcontent-%COMP%]{top:622px;left:264px}.academics-5[_ngcontent-%COMP%]{top:622px;left:281px}.computer-rote[_ngcontent-%COMP%]{top:644px;left:51px}.computer-1[_ngcontent-%COMP%]{top:649px;left:212px}.computer-2[_ngcontent-%COMP%]{top:649px;left:229px}.computer-3[_ngcontent-%COMP%]{top:649px;left:246px}.computer-4[_ngcontent-%COMP%]{top:649px;left:264px}.computer-5[_ngcontent-%COMP%]{top:649px;left:281px}.investigation-rote[_ngcontent-%COMP%]{top:671px;left:51px}.investigation-1[_ngcontent-%COMP%]{top:676px;left:212px}.investigation-2[_ngcontent-%COMP%]{top:676px;left:229px}.investigation-3[_ngcontent-%COMP%]{top:676px;left:246px}.investigation-4[_ngcontent-%COMP%]{top:676px;left:264px}.investigation-5[_ngcontent-%COMP%]{top:676px;left:281px}.medicine-rote[_ngcontent-%COMP%]{top:697px;left:51px}.medicine-1[_ngcontent-%COMP%]{top:703px;left:212px}.medicine-2[_ngcontent-%COMP%]{top:703px;left:229px}.medicine-3[_ngcontent-%COMP%]{top:703px;left:246px}.medicine-4[_ngcontent-%COMP%]{top:703px;left:264px}.medicine-5[_ngcontent-%COMP%]{top:703px;left:281px}.occult-rote[_ngcontent-%COMP%]{top:723px;left:51px}.occult-1[_ngcontent-%COMP%]{top:730px;left:212px}.occult-2[_ngcontent-%COMP%]{top:730px;left:229px}.occult-3[_ngcontent-%COMP%]{top:730px;left:246px}.occult-4[_ngcontent-%COMP%]{top:730px;left:264px}.occult-5[_ngcontent-%COMP%]{top:730px;left:281px}.politics-rote[_ngcontent-%COMP%]{top:751px;left:51px}.politics-1[_ngcontent-%COMP%]{top:757px;left:212px}.politics-2[_ngcontent-%COMP%]{top:757px;left:229px}.politics-3[_ngcontent-%COMP%]{top:757px;left:246px}.politics-4[_ngcontent-%COMP%]{top:757px;left:264px}.politics-5[_ngcontent-%COMP%]{top:757px;left:281px}.science-rote[_ngcontent-%COMP%]{top:778px;left:51px}.science-1[_ngcontent-%COMP%]{top:783px;left:212px}.science-2[_ngcontent-%COMP%]{top:783px;left:229px}.science-3[_ngcontent-%COMP%]{top:783px;left:246px}.science-4[_ngcontent-%COMP%]{top:783px;left:264px}.science-5[_ngcontent-%COMP%]{top:783px;left:281px}.firearms-rote[_ngcontent-%COMP%]{top:860px;left:51px}.firearms-1[_ngcontent-%COMP%]{top:863px;left:212px}.firearms-2[_ngcontent-%COMP%]{top:863px;left:229px}.firearms-3[_ngcontent-%COMP%]{top:863px;left:246px}.firearms-4[_ngcontent-%COMP%]{top:863px;left:264px}.firearms-5[_ngcontent-%COMP%]{top:863px;left:281px}.weaponry-rote[_ngcontent-%COMP%]{top:887px;left:51px}.weaponry-1[_ngcontent-%COMP%]{top:890px;left:212px}.weaponry-2[_ngcontent-%COMP%]{top:890px;left:229px}.weaponry-3[_ngcontent-%COMP%]{top:890px;left:246px}.weaponry-4[_ngcontent-%COMP%]{top:890px;left:264px}.weaponry-5[_ngcontent-%COMP%]{top:890px;left:281px}.athletics-rote[_ngcontent-%COMP%]{top:913px;left:51px}.athletics-1[_ngcontent-%COMP%]{top:917px;left:212px}.athletics-2[_ngcontent-%COMP%]{top:917px;left:229px}.athletics-3[_ngcontent-%COMP%]{top:917px;left:246px}.athletics-4[_ngcontent-%COMP%]{top:917px;left:264px}.athletics-5[_ngcontent-%COMP%]{top:917px;left:281px}.brawl-rote[_ngcontent-%COMP%]{top:941px;left:51px}.brawl-1[_ngcontent-%COMP%]{top:944px;left:212px}.brawl-2[_ngcontent-%COMP%]{top:944px;left:229px}.brawl-3[_ngcontent-%COMP%]{top:944px;left:246px}.brawl-4[_ngcontent-%COMP%]{top:944px;left:264px}.brawl-5[_ngcontent-%COMP%]{top:944px;left:281px}.drive-rote[_ngcontent-%COMP%]{top:967px;left:51px}.drive-1[_ngcontent-%COMP%]{top:971px;left:212px}.drive-2[_ngcontent-%COMP%]{top:971px;left:229px}.drive-3[_ngcontent-%COMP%]{top:971px;left:246px}.drive-4[_ngcontent-%COMP%]{top:971px;left:264px}.drive-5[_ngcontent-%COMP%]{top:971px;left:281px}.stealth-rote[_ngcontent-%COMP%]{top:994px;left:51px}.stealth-1[_ngcontent-%COMP%]{top:999px;left:212px}.stealth-2[_ngcontent-%COMP%]{top:999px;left:229px}.stealth-3[_ngcontent-%COMP%]{top:999px;left:246px}.stealth-4[_ngcontent-%COMP%]{top:999px;left:264px}.stealth-5[_ngcontent-%COMP%]{top:999px;left:281px}.larceny-rote[_ngcontent-%COMP%]{top:1021px;left:51px}.larceny-1[_ngcontent-%COMP%]{top:1026px;left:212px}.larceny-2[_ngcontent-%COMP%]{top:1026px;left:229px}.larceny-3[_ngcontent-%COMP%]{top:1026px;left:246px}.larceny-4[_ngcontent-%COMP%]{top:1026px;left:264px}.larceny-5[_ngcontent-%COMP%]{top:1026px;left:281px}.survival-rote[_ngcontent-%COMP%]{top:1048px;left:51px}.survival-1[_ngcontent-%COMP%]{top:1052px;left:212px}.survival-2[_ngcontent-%COMP%]{top:1052px;left:229px}.survival-3[_ngcontent-%COMP%]{top:1052px;left:246px}.survival-4[_ngcontent-%COMP%]{top:1052px;left:264px}.survival-5[_ngcontent-%COMP%]{top:1052px;left:281px}.animalken-rote[_ngcontent-%COMP%]{top:1109px;left:51px}.animalken-1[_ngcontent-%COMP%]{top:1113px;left:212px}.animalken-2[_ngcontent-%COMP%]{top:1113px;left:229px}.animalken-3[_ngcontent-%COMP%]{top:1113px;left:246px}.animalken-4[_ngcontent-%COMP%]{top:1113px;left:264px}.animalken-5[_ngcontent-%COMP%]{top:1113px;left:281px}.empathy-rote[_ngcontent-%COMP%]{top:1135px;left:51px}.empathy-1[_ngcontent-%COMP%]{top:1140px;left:212px}.empathy-2[_ngcontent-%COMP%]{top:1140px;left:229px}.empathy-3[_ngcontent-%COMP%]{top:1140px;left:246px}.empathy-4[_ngcontent-%COMP%]{top:1140px;left:264px}.empathy-5[_ngcontent-%COMP%]{top:1140px;left:281px}.expression-rote[_ngcontent-%COMP%]{top:1162px;left:51px}.expression-1[_ngcontent-%COMP%]{top:1167px;left:212px}.expression-2[_ngcontent-%COMP%]{top:1167px;left:229px}.expression-3[_ngcontent-%COMP%]{top:1167px;left:246px}.expression-4[_ngcontent-%COMP%]{top:1167px;left:264px}.expression-5[_ngcontent-%COMP%]{top:1167px;left:281px}.intimidation-rote[_ngcontent-%COMP%]{top:1190px;left:51px}.intimidation-1[_ngcontent-%COMP%]{top:1195px;left:212px}.intimidation-2[_ngcontent-%COMP%]{top:1195px;left:229px}.intimidation-3[_ngcontent-%COMP%]{top:1195px;left:246px}.intimidation-4[_ngcontent-%COMP%]{top:1195px;left:264px}.intimidation-5[_ngcontent-%COMP%]{top:1195px;left:281px}.persuasion-rote[_ngcontent-%COMP%]{top:1217px;left:51px}.persuasion-1[_ngcontent-%COMP%]{top:1222px;left:212px}.persuasion-2[_ngcontent-%COMP%]{top:1222px;left:229px}.persuasion-3[_ngcontent-%COMP%]{top:1222px;left:246px}.persuasion-4[_ngcontent-%COMP%]{top:1222px;left:264px}.persuasion-5[_ngcontent-%COMP%]{top:1222px;left:281px}.socialize-rote[_ngcontent-%COMP%]{top:1243px;left:51px}.socialize-1[_ngcontent-%COMP%]{top:1248px;left:212px}.socialize-2[_ngcontent-%COMP%]{top:1248px;left:229px}.socialize-3[_ngcontent-%COMP%]{top:1248px;left:246px}.socialize-4[_ngcontent-%COMP%]{top:1248px;left:264px}.socialize-5[_ngcontent-%COMP%]{top:1248px;left:281px}.streetwise-rote[_ngcontent-%COMP%]{top:1269px;left:51px}.streetwise-1[_ngcontent-%COMP%]{top:1276px;left:212px}.streetwise-2[_ngcontent-%COMP%]{top:1276px;left:229px}.streetwise-3[_ngcontent-%COMP%]{top:1276px;left:246px}.streetwise-4[_ngcontent-%COMP%]{top:1276px;left:264px}.streetwise-5[_ngcontent-%COMP%]{top:1276px;left:281px}.subterfuge-rote[_ngcontent-%COMP%]{top:1296px;left:51px}.subterfuge-1[_ngcontent-%COMP%]{top:1303px;left:212px}.subterfuge-2[_ngcontent-%COMP%]{top:1303px;left:229px}.subterfuge-3[_ngcontent-%COMP%]{top:1303px;left:246px}.subterfuge-4[_ngcontent-%COMP%]{top:1303px;left:264px}.subterfuge-5[_ngcontent-%COMP%]{top:1303px;left:281px}.destin-1[_ngcontent-%COMP%]{top:1105px;left:517px}.destin-2[_ngcontent-%COMP%]{top:1105px;left:534px}.destin-3[_ngcontent-%COMP%]{top:1105px;left:552px}.destin-4[_ngcontent-%COMP%]{top:1105px;left:569px}.destin-5[_ngcontent-%COMP%]{top:1105px;left:586px}.espace-1[_ngcontent-%COMP%]{top:1126px;left:517px}.espace-2[_ngcontent-%COMP%]{top:1126px;left:534px}.espace-3[_ngcontent-%COMP%]{top:1126px;left:552px}.espace-4[_ngcontent-%COMP%]{top:1126px;left:569px}.espace-5[_ngcontent-%COMP%]{top:1126px;left:586px}.esprit-1[_ngcontent-%COMP%]{top:1147px;left:517px}.esprit-2[_ngcontent-%COMP%]{top:1147px;left:534px}.esprit-3[_ngcontent-%COMP%]{top:1147px;left:552px}.esprit-4[_ngcontent-%COMP%]{top:1147px;left:569px}.esprit-5[_ngcontent-%COMP%]{top:1147px;left:586px}.forces-1[_ngcontent-%COMP%]{top:1169px;left:517px}.forces-2[_ngcontent-%COMP%]{top:1169px;left:534px}.forces-3[_ngcontent-%COMP%]{top:1169px;left:552px}.forces-4[_ngcontent-%COMP%]{top:1169px;left:569px}.forces-5[_ngcontent-%COMP%]{top:1169px;left:586px}.matiere-1[_ngcontent-%COMP%]{top:1190px;left:517px}.matiere-2[_ngcontent-%COMP%]{top:1190px;left:534px}.matiere-3[_ngcontent-%COMP%]{top:1190px;left:552px}.matiere-4[_ngcontent-%COMP%]{top:1190px;left:569px}.matiere-5[_ngcontent-%COMP%]{top:1190px;left:586px}.mort-1[_ngcontent-%COMP%]{top:1212px;left:517px}.mort-2[_ngcontent-%COMP%]{top:1212px;left:534px}.mort-3[_ngcontent-%COMP%]{top:1212px;left:552px}.mort-4[_ngcontent-%COMP%]{top:1212px;left:569px}.mort-5[_ngcontent-%COMP%]{top:1212px;left:586px}.prime-1[_ngcontent-%COMP%]{top:1233px;left:517px}.prime-2[_ngcontent-%COMP%]{top:1233px;left:534px}.prime-3[_ngcontent-%COMP%]{top:1233px;left:552px}.prime-4[_ngcontent-%COMP%]{top:1233px;left:569px}.prime-5[_ngcontent-%COMP%]{top:1233px;left:586px}.psyche-1[_ngcontent-%COMP%]{top:1254px;left:517px}.psyche-2[_ngcontent-%COMP%]{top:1254px;left:534px}.psyche-3[_ngcontent-%COMP%]{top:1254px;left:552px}.psyche-4[_ngcontent-%COMP%]{top:1254px;left:569px}.psyche-5[_ngcontent-%COMP%]{top:1254px;left:586px}.temps-1[_ngcontent-%COMP%]{top:1276px;left:517px}.temps-2[_ngcontent-%COMP%]{top:1276px;left:534px}.temps-3[_ngcontent-%COMP%]{top:1276px;left:552px}.temps-4[_ngcontent-%COMP%]{top:1276px;left:569px}.temps-5[_ngcontent-%COMP%]{top:1276px;left:586px}.vie-1[_ngcontent-%COMP%]{top:1297px;left:517px}.vie-2[_ngcontent-%COMP%]{top:1297px;left:534px}.vie-3[_ngcontent-%COMP%]{top:1297px;left:552px}.vie-4[_ngcontent-%COMP%]{top:1297px;left:569px}.vie-5[_ngcontent-%COMP%]{top:1297px;left:586px}.health-1[_ngcontent-%COMP%]{top:577px;left:631px}.health-2[_ngcontent-%COMP%]{top:577px;left:648px}.health-3[_ngcontent-%COMP%]{top:577px;left:666px}.health-4[_ngcontent-%COMP%]{top:577px;left:684px}.health-5[_ngcontent-%COMP%]{top:577px;left:702px}.health-6[_ngcontent-%COMP%]{top:577px;left:719px}.health-7[_ngcontent-%COMP%]{top:577px;left:737px}.health-8[_ngcontent-%COMP%]{top:577px;left:755px}.health-9[_ngcontent-%COMP%]{top:577px;left:773px}.health-10[_ngcontent-%COMP%]{top:577px;left:790px}.health-11[_ngcontent-%COMP%]{top:577px;left:808px}.health-12[_ngcontent-%COMP%]{top:577px;left:825px}.health-13[_ngcontent-%COMP%]{top:577px;left:843px}.health-14[_ngcontent-%COMP%]{top:577px;left:861px}.health-15[_ngcontent-%COMP%]{top:577px;left:878px}.willpower-1[_ngcontent-%COMP%]{top:642px;left:630px}.willpower-2[_ngcontent-%COMP%]{top:642px;left:658px}.willpower-3[_ngcontent-%COMP%]{top:642px;left:686px}.willpower-4[_ngcontent-%COMP%]{top:642px;left:713px}.willpower-5[_ngcontent-%COMP%]{top:642px;left:740px}.willpower-6[_ngcontent-%COMP%]{top:642px;left:769px}.willpower-7[_ngcontent-%COMP%]{top:642px;left:796px}.willpower-8[_ngcontent-%COMP%]{top:642px;left:824px}.willpower-9[_ngcontent-%COMP%]{top:642px;left:851px}.willpower-10[_ngcontent-%COMP%]{top:642px;left:878px}.mana-1[_ngcontent-%COMP%]{top:701px;left:631px}.mana-2[_ngcontent-%COMP%]{top:701px;left:658px}.mana-3[_ngcontent-%COMP%]{top:701px;left:686px}.mana-4[_ngcontent-%COMP%]{top:701px;left:713px}.mana-5[_ngcontent-%COMP%]{top:701px;left:740px}.mana-6[_ngcontent-%COMP%]{top:701px;left:769px}.mana-7[_ngcontent-%COMP%]{top:701px;left:796px}.mana-8[_ngcontent-%COMP%]{top:701px;left:824px}.mana-9[_ngcontent-%COMP%]{top:701px;left:851px}.mana-10[_ngcontent-%COMP%]{top:701px;left:878px}.mana-11[_ngcontent-%COMP%]{top:721px;left:631px}.mana-12[_ngcontent-%COMP%]{top:721px;left:658px}.mana-13[_ngcontent-%COMP%]{top:721px;left:686px}.mana-14[_ngcontent-%COMP%]{top:721px;left:713px}.mana-15[_ngcontent-%COMP%]{top:721px;left:740px}.mana-16[_ngcontent-%COMP%]{top:721px;left:769px}.mana-17[_ngcontent-%COMP%]{top:721px;left:796px}.mana-18[_ngcontent-%COMP%]{top:721px;left:824px}.mana-19[_ngcontent-%COMP%]{top:721px;left:851px}.mana-20[_ngcontent-%COMP%]{top:721px;left:878px}.gnosis-1[_ngcontent-%COMP%]{top:789px;left:630px}.gnosis-2[_ngcontent-%COMP%]{top:789px;left:658px}.gnosis-3[_ngcontent-%COMP%]{top:789px;left:686px}.gnosis-4[_ngcontent-%COMP%]{top:789px;left:713px}.gnosis-5[_ngcontent-%COMP%]{top:789px;left:740px}.gnosis-6[_ngcontent-%COMP%]{top:789px;left:769px}.gnosis-7[_ngcontent-%COMP%]{top:789px;left:796px}.gnosis-8[_ngcontent-%COMP%]{top:789px;left:824px}.gnosis-9[_ngcontent-%COMP%]{top:789px;left:851px}.gnosis-10[_ngcontent-%COMP%]{top:789px;left:878px}.morality-10[_ngcontent-%COMP%]{top:842px;left:868px}.morality-9[_ngcontent-%COMP%]{top:865px;left:868px}.morality-8[_ngcontent-%COMP%]{top:888px;left:868px}.morality-7[_ngcontent-%COMP%]{top:912px;left:868px}.morality-6[_ngcontent-%COMP%]{top:935px;left:868px}.morality-5[_ngcontent-%COMP%]{top:960px;left:868px}.morality-4[_ngcontent-%COMP%]{top:982px;left:868px}.morality-3[_ngcontent-%COMP%]{top:1006px;left:868px}.morality-2[_ngcontent-%COMP%]{top:1029px;left:868px}.morality-1[_ngcontent-%COMP%]{top:1052px;left:868px}input[name=merit-1][_ngcontent-%COMP%]{top:584px;left:328px;width:176px}.merit-1-1[_ngcontent-%COMP%]{top:594px;left:516px}.merit-1-2[_ngcontent-%COMP%]{top:594px;left:534px}.merit-1-3[_ngcontent-%COMP%]{top:594px;left:551px}.merit-1-4[_ngcontent-%COMP%]{top:594px;left:569px}.merit-1-5[_ngcontent-%COMP%]{top:594px;left:586px}input[name=merit-2][_ngcontent-%COMP%]{top:611px;left:328px;width:176px}.merit-2-1[_ngcontent-%COMP%]{top:621px;left:516px}.merit-2-2[_ngcontent-%COMP%]{top:621px;left:534px}.merit-2-3[_ngcontent-%COMP%]{top:621px;left:551px}.merit-2-4[_ngcontent-%COMP%]{top:621px;left:569px}.merit-2-5[_ngcontent-%COMP%]{top:621px;left:586px}input[name=merit-3][_ngcontent-%COMP%]{top:638px;left:328px;width:176px}.merit-3-1[_ngcontent-%COMP%]{top:649px;left:516px}.merit-3-2[_ngcontent-%COMP%]{top:649px;left:534px}.merit-3-3[_ngcontent-%COMP%]{top:649px;left:551px}.merit-3-4[_ngcontent-%COMP%]{top:649px;left:569px}.merit-3-5[_ngcontent-%COMP%]{top:649px;left:586px}input[name=merit-4][_ngcontent-%COMP%]{top:665px;left:328px;width:176px}.merit-4-1[_ngcontent-%COMP%]{top:676px;left:516px}.merit-4-2[_ngcontent-%COMP%]{top:676px;left:534px}.merit-4-3[_ngcontent-%COMP%]{top:676px;left:551px}.merit-4-4[_ngcontent-%COMP%]{top:676px;left:569px}.merit-4-5[_ngcontent-%COMP%]{top:676px;left:586px}input[name=merit-5][_ngcontent-%COMP%]{top:692px;left:328px;width:176px}.merit-5-1[_ngcontent-%COMP%]{top:703px;left:516px}.merit-5-2[_ngcontent-%COMP%]{top:703px;left:534px}.merit-5-3[_ngcontent-%COMP%]{top:703px;left:551px}.merit-5-4[_ngcontent-%COMP%]{top:703px;left:569px}.merit-5-5[_ngcontent-%COMP%]{top:703px;left:586px}input[name=merit-6][_ngcontent-%COMP%]{top:719px;left:328px;width:176px}.merit-6-1[_ngcontent-%COMP%]{top:729px;left:516px}.merit-6-2[_ngcontent-%COMP%]{top:729px;left:534px}.merit-6-3[_ngcontent-%COMP%]{top:729px;left:551px}.merit-6-4[_ngcontent-%COMP%]{top:729px;left:569px}.merit-6-5[_ngcontent-%COMP%]{top:729px;left:586px}input[name=merit-7][_ngcontent-%COMP%]{top:746px;left:328px;width:176px}.merit-7-1[_ngcontent-%COMP%]{top:757px;left:516px}.merit-7-2[_ngcontent-%COMP%]{top:757px;left:534px}.merit-7-3[_ngcontent-%COMP%]{top:757px;left:551px}.merit-7-4[_ngcontent-%COMP%]{top:757px;left:569px}.merit-7-5[_ngcontent-%COMP%]{top:757px;left:586px}input[name=merit-8][_ngcontent-%COMP%]{top:773px;left:328px;width:176px}.merit-8-1[_ngcontent-%COMP%]{top:784px;left:516px}.merit-8-2[_ngcontent-%COMP%]{top:784px;left:534px}.merit-8-3[_ngcontent-%COMP%]{top:784px;left:551px}.merit-8-4[_ngcontent-%COMP%]{top:784px;left:569px}.merit-8-5[_ngcontent-%COMP%]{top:784px;left:586px}input[name=flaw-1][_ngcontent-%COMP%]{top:841px;left:328px;width:176px}input[name=flaw-2][_ngcontent-%COMP%]{top:869px;left:328px;width:176px}input[name=flaw-3][_ngcontent-%COMP%]{top:898px;left:328px;width:176px}input[name=size][_ngcontent-%COMP%]{top:925px;left:381px;width:176px}input[name=defense][_ngcontent-%COMP%]{top:953px;left:399px;width:151px}input[name=initiative][_ngcontent-%COMP%]{top:980px;left:409px;width:113px}input[name=speed][_ngcontent-%COMP%]{top:1007px;left:396px;width:167px}.li-empty[_ngcontent-%COMP%]{list-style:none;height:15px}"]}),t})();const ht=[{path:"",component:V},{path:"mortal/new",component:X},{path:"mage/new",component:ct},{path:"mage/prelude",component:(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Gb({type:t,selectors:[["app-nwod-mage-prelude"]],decls:390,vars:0,consts:[[1,"row"],[1,"col-12","col-sm-7","infos"],["href","http://letakol.free.fr/mage/arcanes.html","target","_blank"],[1,"col-12","col-sm-5"],[1,"card"],[1,"card-body"],["src","assets/nwod/map.png",1,"card-img-top"],[1,"col-12","col-sm-6"],[1,"card-title"],[1,"card-text"],[1,"red"]],template:function(t,e){1&t&&(a.Pb(0,"div",0),a.Pb(1,"div",1),a.Pb(2,"h2"),a.pc(3,"Quelques infos de base"),a.Ob(),a.Pb(4,"section"),a.Pb(5,"p"),a.pc(6,"Je recommande de ne pas aller chercher des infos sur l'univers, \xe7a pourrait vous spoil des \xe9l\xe9ments"),a.Ob(),a.Ob(),a.Pb(7,"section"),a.Pb(8,"p"),a.pc(9,'Vous \xeates un groupe de jeune mage, et vous vous \xeates "\xe9veill\xe9" r\xe9cemment \xe0 la magie, vous \xeates "novices"'),a.Ob(),a.Ob(),a.Pb(10,"section"),a.Pb(11,"p"),a.pc(12,'Vous n\'\xeates pas forc\xe9ment "soud\xe9s", mais votre survie peut d\xe9pendre de vos camarades'),a.Ob(),a.Ob(),a.Pb(13,"section"),a.Pb(14,"p"),a.pc(15,'Vos personnages peuvent se connaitre depuis "avant" votre \xe9veil, ou depuis peu.'),a.Ob(),a.Ob(),a.Pb(16,"h2"),a.pc(17,"Choses \xe0 choisir en groupe"),a.Ob(),a.Pb(18,"section"),a.Pb(19,"p"),a.pc(20,'L\'un ou l\'une d\'entre vous fera office de "leader", qui en saura "un peu plus", et qui aura la "responsabilit\xe9" de votre groupe'),a.Ob(),a.Ob(),a.Pb(21,"section"),a.Pb(22,"p"),a.pc(23,' Certaines atouts sont \xe0 acheter collectivement, il vous faudra vous organiser sur qui d\xe9pense combien dans les atouts de "groupe", sachant que vous avez 7 points par personne (ou + selon corruption du DM) '),a.Ob(),a.Ob(),a.Pb(24,"section"),a.Pb(25,"p"),a.pc(26,'Il faudra vous r\xe9partir dans les "voies"" de magie, si vous souhaitez (ou pas) avoir acc\xe8s \xe0 la plupart des "arcanes":'),a.Ob(),a.Pb(27,"ul"),a.Pb(28,"li"),a.pc(29," *Nom de la voie* "),a.Nb(30,"br"),a.pc(31," Arcanes majeures = facile \xe0 XP, max rang 5 "),a.Nb(32,"br"),a.pc(33," Arcane inf\xe9rieure = difficile \xe0 XP, max rang 2 "),a.Nb(34,"br"),a.pc(35," D\xe9finitions des arcanes : "),a.Pb(36,"a",2),a.pc(37,"ici"),a.Ob(),a.Ob(),a.Pb(38,"li"),a.Pb(39,"b"),a.pc(40,"Acanthus"),a.Ob(),a.Nb(41,"br"),a.pc(42," Arcanes majeures = Temps / Destin "),a.Nb(43,"br"),a.pc(44," Arcane inf\xe9rieure = Forces "),a.Ob(),a.Pb(45,"li"),a.Pb(46,"b"),a.pc(47,"Mastigos"),a.Ob(),a.Nb(48,"br"),a.pc(49," Arcanes majeures = Espace / Psych\xe9 "),a.Nb(50,"br"),a.pc(51," Arcane inf\xe9rieure = Mati\xe8re "),a.Ob(),a.Pb(52,"li"),a.Pb(53,"b"),a.pc(54,"Moros"),a.Ob(),a.Nb(55,"br"),a.pc(56," Arcanes majeures = Mati\xe8re / Mort "),a.Nb(57,"br"),a.pc(58," Arcane inf\xe9rieure = Esprit "),a.Ob(),a.Pb(59,"li"),a.Pb(60,"b"),a.pc(61,"Obrimos"),a.Ob(),a.Nb(62,"br"),a.pc(63," Arcanes majeures = Forces / Prime "),a.Nb(64,"br"),a.pc(65," Arcane inf\xe9rieure = Mort "),a.Ob(),a.Pb(66,"li"),a.Pb(67,"b"),a.pc(68,"Thyrsus"),a.Ob(),a.Nb(69,"br"),a.pc(70," Arcanes majeures = Vie / Esprit "),a.Nb(71,"br"),a.pc(72," Arcane inf\xe9rieure = Psych\xe9 "),a.Ob(),a.Ob(),a.Ob(),a.Pb(73,"section"),a.Pb(74,"p"),a.pc(75,'Il faudra vous r\xe9partir dans les "ordres" de magie, si vous souhaitez (ou pas) avoir acc\xe8s \xe0 la plupart des "organisations"'),a.Ob(),a.Pb(76,"ul"),a.Pb(77,"li"),a.Pb(78,"b"),a.pc(79,"Fl\xe8che d'adamantine"),a.Ob(),a.pc(80," : d\xe9fend les sanctuaires et les cabales gr\xe2ce \xe0 sa magie de combat "),a.Nb(81,"br"),a.pc(82," Bonus : Athl\xe9tisme, Intimidation, M\xe9decine "),a.Ob(),a.Pb(83,"li"),a.Pb(84,"b"),a.pc(85,"Conseil libre"),a.Ob(),a.pc(86," : cherche \xe0 \xe9chapper aux restrictions du pass\xe9 et \xe0 moderniser l'art de la magie. "),a.Nb(87,"br"),a.pc(88," Bonus : Artisanat, Persuasion, Science "),a.Ob(),a.Pb(89,"li"),a.Pb(90,"b"),a.pc(91,"Gardiens du voile"),a.Ob(),a.pc(92," : prot\xe8gent les Myst\xe8res de tous ceux qui voudraient les spolier ou qui oseraient "),a.Nb(93,"br"),a.pc(94," Bonus : Investigation, Furtivit\xe9, Subterfuge "),a.Ob(),a.Pb(95,"li"),a.Pb(96,"b"),a.pc(97,"Mysterium"),a.Ob(),a.pc(98," : recherche les traditions pr\xe9cieuses et les connaissances oubli\xe9es "),a.Nb(99,"br"),a.pc(100," Bonus : Investigation, Occulte, Survie "),a.Ob(),a.Pb(101,"li"),a.Pb(102,"b"),a.pc(103,"Echelle d'argent"),a.Ob(),a.pc(104," : souhaite \xe9tablir une v\xe9ritable hi\xe9rarchie des mages "),a.Nb(105,"br"),a.pc(106," Bonus : Expression, Persuasion, Subterfuge "),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(107,"div",3),a.Pb(108,"div",4),a.Pb(109,"div",5),a.Pb(110,"p"),a.pc(111,"Si les portes de la perception \xe9taient nettoy\xe9es, chaque chose appara\xeetrait \xe0 l'homme telle qu'elle est : infinie."),a.Ob(),a.Pb(112,"p"),a.pc(113,"C'est ce que vous voyez maintenant."),a.Ob(),a.Pb(114,"p"),a.pc(115,"L'oeil de votre \xe2me, l'ajna, le troisi\xe8me oeil, s'est ouvert."),a.Ob(),a.Pb(116,"p"),a.pc(117,"Vous percevez par la lumi\xe8re de votre Tour de guet, qui se dresse sur la rive infiniment lointaine au-del\xe0 des abysses."),a.Ob(),a.Pb(118,"p"),a.pc(119,"Vous vous \xeates \xe9veill\xe9 et les myst\xe8res se sont d\xe9voil\xe9s devant vous."),a.Ob(),a.Pb(120,"p"),a.pc(121,"Votre imagination est aussi r\xe9elle que votre corps, et votre volont\xe9 est sans entrave."),a.Ob(),a.Pb(122,"p"),a.pc(123,"C'est le pouvoir."),a.Ob(),a.Pb(124,"p"),a.pc(125,"C'est de la magie."),a.Ob(),a.Pb(126,"p"),a.pc(127,"Avec elle, vous allez refaire le monde."),a.Ob(),a.Ob(),a.Ob(),a.Pb(128,"div",4),a.Pb(129,"div",5),a.Pb(130,"p"),a.pc(131,"Les mots sont puissants et les noms encore plus, car ils impliquent une connexion avec l'entit\xe9 qu'ils d\xe9notent."),a.Ob(),a.Pb(132,"p"),a.pc(133,"Un ennemi qui ne peut \xeatre nomm\xe9 est un ennemi qui ne peut pas \xeatre cibl\xe9 avec la magie."),a.Ob(),a.Pb(134,"p"),a.pc(135,"Ainsi, les mages prennent souvent, apr\xe8s leur initiation, un nom d'ombre, cachant leur v\xe9ritable nom de leurs ennemis."),a.Ob(),a.Pb(136,"p"),a.pc(137,"L'utilisation est la m\xeame qu'un masque lors d'un bal masqu\xe9."),a.Ob(),a.Ob(),a.Ob(),a.Pb(138,"div",4),a.Nb(139,"img",6),a.Ob(),a.Ob(),a.Ob(),a.Pb(140,"div",0),a.Pb(141,"div",7),a.Pb(142,"div",4),a.Pb(143,"div",5),a.Pb(144,"h5",8),a.pc(145," Atouts Physiques "),a.Ob(),a.Pb(146,"p",9),a.pc(147," Ambidextre (3), enl\xe8ve le malus de -2 pour la main secondaire"),a.Nb(148,"br"),a.Nb(149,"br"),a.pc(150,' Esquive de bagarre (1), ajoute "bagarre" \xe0 la d\xe9fense'),a.Nb(151,"br"),a.pc(152," => n\xe9cessite Force 2, Bagarre 1"),a.Nb(153,"br"),a.Nb(154,"br"),a.pc(155,' Esquive des armes (1), ajoute "armes blanches" \xe0 la d\xe9fense'),a.Nb(156,"br"),a.pc(157," => n\xe9cessite Force 2, Armes blanches 1"),a.Nb(158,"br"),a.Nb(159,"br"),a.pc(160," Sens de l'orientation (1), toujours savoir o\xf9 est le nord"),a.Nb(161,"br"),a.Nb(162,"br"),a.pc(163," D\xe9sarmement (2), peut d\xe9sarmer avec une arme"),a.Nb(164,"br"),a.pc(165," => n\xe9cessite Dex 3, Armes blanches 2"),a.Nb(166,"br"),a.Nb(167,"br"),a.pc(168," R\xe9flexes rapides (1 \xe0 2), +1/+2 initiative"),a.Nb(169,"br"),a.pc(170," => n\xe9cessite Dex 3"),a.Nb(171,"br"),a.Nb(172,"br"),a.pc(173," Combat en finesse (2), utilise la Dex \xe0 la place de la Force"),a.Nb(174,"br"),a.pc(175," => n\xe9cessite Dex 3, Armes blanches 2"),a.Nb(176,"br"),a.Nb(177,"br"),a.pc(178," Style de combat : Boxe (1 \xe0 5)"),a.Nb(179,"br"),a.pc(180," => n\xe9cessite For 3, Vig 2, Bagarre 3"),a.Nb(181,"br"),a.pc(182," - 1 : fait perdre la prochaine action"),a.Nb(183,"br"),a.pc(184," - 2 : d\xe9fense++"),a.Nb(185,"br"),a.pc(186," - 3 : 2 attaques"),a.Nb(187,"br"),a.pc(188," - 4 : rendre inconscient"),a.Nb(189,"br"),a.pc(190," - 5 : d\xe9g\xe2ts l\xe9thaux"),a.Nb(191,"br"),a.Nb(192,"br"),a.pc(193," Style de combat : Kung-Fu (1 \xe0 5)"),a.Nb(194,"br"),a.pc(195," => n\xe9cessite For 2, Dex 2, Vig 2, Bagarre 2"),a.Nb(196,"br"),a.pc(197," - 1 : cibler des parties du corps"),a.Nb(198,"br"),a.pc(199," - 2 : armure++"),a.Nb(200,"br"),a.pc(201," - 3 : attaque-- defense++"),a.Nb(202,"br"),a.pc(203," - 4 : +DEX attaques"),a.Nb(204,"br"),a.pc(205," - 5 : d\xe9g\xe2ts l\xe9thaux"),a.Nb(206,"br"),a.Nb(207,"br"),a.pc(208," Style de combat : Filipino Martial Arts (1 \xe0 4)"),a.Nb(209,"br"),a.pc(210," => n\xe9cessite Dex 3, Armes blanches 3"),a.Nb(211,"br"),a.pc(212," - 1 : manoeuvre d\xe9fensive pour atraper l'adversaire"),a.Nb(213,"br"),a.pc(214," - 2 : d\xe9sarmer"),a.Nb(215,"br"),a.pc(216," - 3 : -2 attaque, 100% d\xe9g\xe2ts (solar plexus)"),a.Nb(217,"br"),a.pc(218," - 4 : ++d\xe9fense"),a.Nb(219,"br"),a.Nb(220,"br"),a.pc(221," Pieds rapides (1 \xe0 3), +1/+2/+3 vitesse"),a.Nb(222,"br"),a.pc(223," => n\xe9cessite For 2"),a.Nb(224,"br"),a.Nb(225,"br"),a.pc(226," G\xe9ant (4), +1 \xe0 la taille"),a.Nb(227,"br"),a.Nb(228,"br"),a.pc(229," Vigueur d'acier (1 \xe0 3), annule les malus de fatigue/blessure"),a.Nb(230,"br"),a.pc(231," => n\xe9cessite Vig 3 OU Resolution 3"),a.Nb(232,"br"),a.Nb(233,"br"),a.pc(234," Immunit\xe9 naturelle (1), +2 contre infection, maladie, ..."),a.Nb(235,"br"),a.pc(236," => n\xe9cessite Vig 2"),a.Nb(237,"br"),a.Nb(238,"br"),a.pc(239," Gu\xe9risseur rapide (4), divise par 2 le temps de gu\xe9rison"),a.Nb(240,"br"),a.pc(241," => n\xe9cessite Vig 4"),a.Nb(242,"br"),a.Nb(243,"br"),a.pc(244," Cascadeur (3), peut effectue des actions en conduisant"),a.Nb(245,"br"),a.pc(246," => n\xe9cessite Dex 3"),a.Nb(247,"br"),a.Nb(248,"br"),a.pc(249," R\xe9istance aux toxines (2), +2 contre poison, drogues, ..."),a.Nb(250,"br"),a.pc(251," => n\xe9cessite Vig 3"),a.Nb(252,"br"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(253,"div",7),a.Pb(254,"div",4),a.Pb(255,"div",5),a.Pb(256,"h5",8),a.pc(257," Atouts Communs "),a.Ob(),a.Pb(258,"p",9),a.pc(259," Sanctuaire - Taille (1 \xe0 5)"),a.Nb(260,"br"),a.pc(261," La taille de votre base."),a.Nb(262,"br"),a.Pb(263,"span",10),a.pc(264,"Un minimum de 2 est requis ici, mais vous serez \xe0 l'\xe9troit"),a.Ob(),a.Nb(265,"br"),a.pc(266," (1 = 2 pi\xe8ces, 2 = 4 pi\xe8ces, 3 = 8 pi\xe8ces, 4 = manoir, 5 = campus)"),a.Nb(267,"br"),a.Nb(268,"br"),a.pc(269," Sanctuaire - S\xe9curit\xe9 (1 \xe0 5)"),a.Nb(270,"br"),a.pc(271," Malus pour les ennemis qui voudraient vous attaquer / espionner / ..."),a.Nb(272,"br"),a.Nb(273,"br"),a.pc(274," Fontaine de mana (1 \xe0 5)"),a.Nb(275,"br"),a.pc(276," Nombre de point de mana g\xe9n\xe9r\xe9 par jour"),a.Nb(277,"br"),a.Nb(278,"br"),a.pc(279," Biblioth\xe8que (1 \xe0 5)"),a.Nb(280,"br"),a.pc(281," Nombre de champs d'expertise de la biblioth\xe8que (ex: d\xe9mons, esprits, ...)"),a.Nb(282,"br"),a.Nb(283,"br"),a.pc(284," Somnambule (1 \xe0 5)"),a.Nb(285,"br"),a.pc(286," Un humain qui connait l'existence de la magie sans pour autant en poss\xe9der les capacit\xe9s, sert principalement de majordome et s'occupe de t\xe2ches diverses, tel que garder la maison en votre absence."),a.Nb(287,"br"),a.pc(288," (1 = Ma\xeft\xe9 qui fait de la soupe, 5 = Alfred de Batman) "),a.Ob(),a.Ob(),a.Ob(),a.Pb(289,"div",4),a.Pb(290,"div",5),a.Pb(291,"h5",8),a.pc(292," Atouts surnaturels "),a.Ob(),a.Pb(293,"p",9),a.pc(294," R\xeaves (1 \xe0 5)"),a.Nb(295,"br"),a.pc(296," Permet de poser une question au DM, qui r\xe9pond par 1/2/3/4/5 r\xe9ponses"),a.Nb(297,"br"),a.Nb(298,"br"),a.pc(299," Destin\xe9e (1 \xe0 5)"),a.Nb(300,"br"),a.pc(301,' 2/4/6/8/10 d\xe9s "bonus" pour une game '),a.Ob(),a.Ob(),a.Ob(),a.Pb(302,"div",4),a.Pb(303,"div",5),a.Pb(304,"h5",8),a.pc(305," Atouts Sociaux "),a.Ob(),a.Pb(306,"p",9),a.pc(307," Contacts (1 \xe0 5), ex: police, mysterium, maison blanche"),a.Nb(308,"br"),a.Nb(309,"br"),a.pc(310," Inspirant (4), 1 fois par game, peut faire regagner 1 point de volont\xe9"),a.Nb(311,"br"),a.pc(312," => n\xe9cessite Pr\xe9sence 4"),a.Nb(313,"br"),a.Nb(314,"br"),a.pc(315," Mentor (1 \xe0 5), quelqu'un qui forme, conseil, aide"),a.Nb(316,"br"),a.Nb(317,"br"),a.pc(318," Ressources (1 \xe0 5), 1000$, 5000$, 10000$, 500000$, 5000000$"),a.Nb(319,"br"),a.Nb(320,"br"),a.pc(321," Statut (1 \xe0 5), h\xe9riarchie, ex: police, mysterium, maison blanche"),a.Nb(322,"br"),a.Nb(323,"br"),a.pc(324," Regard saisissant (2 OU 4), +1/+2 sur le social"),a.Nb(325,"br"),a.Ob(),a.Ob(),a.Ob(),a.Pb(326,"div",4),a.Pb(327,"div",5),a.Pb(328,"h5",8),a.pc(329," Atouts Mentaux "),a.Ob(),a.Pb(330,"p",9),a.pc(331," Sens du danger (2), +2 sur les r\xe9flexes"),a.Nb(332,"br"),a.Nb(333,"br"),a.pc(334," Esprit m\xe9ditatif (1), aucun malus pour m\xe9diter (bruit, ...)"),a.Nb(335,"br"),a.Nb(336,"br"),a.pc(337," Langues (1 \xe0 5), ex: russe, allemand, ..."),a.Nb(338,"br"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(339,"div",0),a.Pb(340,"div",7),a.Pb(341,"h2"),a.pc(342,"Exp\xe9rience"),a.Ob(),a.pc(343," Attribut : rang * 5"),a.Nb(344,"br"),a.pc(345," Comp\xe9tence : rang * 3"),a.Nb(346,"br"),a.pc(347," Sp\xe9cialisation : 3"),a.Nb(348,"br"),a.pc(349," Atout : rang * 2"),a.Nb(350,"br"),a.pc(351," Sagesse : rang * 3"),a.Nb(352,"br"),a.pc(353," Arcanes majeures : rang * 6"),a.Nb(354,"br"),a.pc(355," Arcanes communes : rang * 7"),a.Nb(356,"br"),a.pc(357," Arcane inf\xe9rieure : rang * 8"),a.Nb(358,"br"),a.pc(359," Routine : rang * 2"),a.Nb(360,"br"),a.pc(361," Gnose : rang * 8"),a.Nb(362,"br"),a.Nb(363,"br"),a.pc(364," Exemple : passer Force de 2 \xe0 3 = 3 * 5 = 15 "),a.Ob(),a.Pb(365,"div",7),a.Pb(366,"h2"),a.pc(367,"Sagesse"),a.Ob(),a.pc(368,' On peut perdre de la sagesse, en faisant des actions "n\xe9faste" du niveau correspond et inf\xe9rieur : '),a.Pb(369,"ul"),a.Pb(370,"li"),a.pc(371,"10 : Avoir des pens\xe9es \xe9go\xefstes / Utiliser la magie pour une action qui aurait p\xfb \xeatre r\xe9aliser sans"),a.Ob(),a.Pb(372,"li"),a.pc(373,"9 : Acte \xe9go\xefste mineur (refuser la charit\xe9) / Contraindre magiquement une autre personne pour qu'elle agisse contre sa propre volon\xe9"),a.Ob(),a.Pb(374,"li"),a.pc(375,"8 : Blessure \xe0 autrui accidentel / Contraindre magiquement une autre personne pour qu'elle viole son propre code moral"),a.Ob(),a.Pb(376,"li"),a.pc(377,"7 : Vol mineur (vol \xe0 l'\xe9talage) / Jeter une mal\xe9diction sur quelqu'un"),a.Ob(),a.Pb(378,"li"),a.pc(379,"6 : Grand vol (cambriolage) / Lier de force un esprit r\xe9ticent \xe0 un lieu"),a.Ob(),a.Pb(380,"li"),a.pc(381,"5 : Dommages intentionnels et massifs (incendie volontaire) / Transformer magiquement une personne en un \xeatre inf\xe9rieur"),a.Ob(),a.Pb(382,"li"),a.pc(383,"4 : Crime passionnel (homicide involontaire) / Utiliser la magie pour faire du mal \xe0 quelqu'un"),a.Ob(),a.Pb(384,"li"),a.pc(385,"3 : Crime planifi\xe9 (meurtre) / Enl\xe8vement forc\xe9 d'une autre personne"),a.Ob(),a.Pb(386,"li"),a.pc(387,"2 : Crime occasionnel (meurtre en s\xe9rie) / Pr\xe9venir intentionnellement un \xe9veil de magie"),a.Ob(),a.Pb(388,"li"),a.pc(389,"1 : Perversion totale (meurtre de masse) / Voler une \xe2me"),a.Ob(),a.Ob(),a.Ob(),a.Ob())},styles:[".card[_ngcontent-%COMP%]{font-size:.8rem}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.6rem}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.card[_ngcontent-%COMP%] + .card[_ngcontent-%COMP%]{margin-top:1rem}section[_ngcontent-%COMP%]{border-left:1px solid;padding-left:15px}section[_ngcontent-%COMP%]:hover{background:#e9ecef}.red[_ngcontent-%COMP%]{color:red}@media (max-width:576px){ul[_ngcontent-%COMP%]{padding-left:20px}}"]}),t})()},{path:"mage/leader",component:(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Gb({type:t,selectors:[["app-nwod-mage-leader"]],decls:149,vars:0,template:function(t,e){1&t&&(a.Pb(0,"h3"),a.pc(1,"Capacit\xe9s gratos"),a.Ob(),a.Pb(2,"u"),a.pc(3,'L\'atout "statut 1 (Consilium)"'),a.Ob(),a.Pb(4,"ul"),a.Pb(5,"li"),a.pc(6,"te permet d'\xeatre invit\xe9 aux r\xe9unions du Consilium"),a.Ob(),a.Pb(7,"li"),a.pc(8,"\xe7a te permet de connaitre les derniers \xe9v\xe9nements"),a.Ob(),a.Pb(9,"li"),a.pc(10,"et o\xf9 sont dispos\xe9es les Cabales dans le coin"),a.Ob(),a.Pb(11,"li"),a.pc(12,"et potentiellement d'autres infos"),a.Ob(),a.Ob(),a.Pb(13,"u"),a.pc(14,'L\'atout "Haute Langue 1"'),a.Ob(),a.Pb(15,"ul"),a.Pb(16,"li"),a.pc(17,"tu connais la langue Atlante"),a.Ob(),a.Pb(18,"li"),a.pc(19,"lors d'un lancer de sort, tu peux incanter avec cette langue"),a.Ob(),a.Pb(20,"li"),a.pc(21,"il faut parler \xe0 haute voix pour que ca marche"),a.Ob(),a.Pb(22,"li"),a.pc(23,"ca permet d'ajouter +2 \xe0 un lancer de sort, mais tu perds ta d\xe9fense"),a.Ob(),a.Pb(24,"li"),a.pc(25,"tu peux l'apprendre aux autres, qui pourront l'acheter \xe0 la fin du 1er sc\xe9nario"),a.Ob(),a.Ob(),a.Pb(26,"u"),a.pc(27,'La comp\xe9tence "Occulte", 1 point gratuit dedans'),a.Ob(),a.Pb(28,"ul"),a.Pb(29,"li"),a.pc(30,"tu peux mettre + si tu veux, maximum 3 en tout"),a.Ob(),a.Pb(31,"li"),a.pc(32,"les autres ne peuvent PAS prendre cette comp\xe9tence"),a.Ob(),a.Pb(33,"li"),a.pc(34,"\xe7a repr\xe9sente les connaissances/exp\xe9riences du surnaturel"),a.Ob(),a.Ob(),a.Pb(35,"u"),a.pc(36,"La gnose \xe0 2 pour d\xe9marrer"),a.Ob(),a.Pb(37,"ul"),a.Pb(38,"li"),a.pc(39,"C'est le degr\xe9 de compr\xe9hension de la magie ainsi que la puissance brute du personnage"),a.Ob(),a.Ob(),a.Pb(40,"h3"),a.pc(41,"Les noms d'ombre"),a.Ob(),a.Pb(42,"u"),a.pc(43,"En tant que leader :"),a.Ob(),a.Pb(44,"ul"),a.Pb(45,"li"),a.pc(46,'tu connais le "vrai" nom/pr\xe9nom de tes camarades'),a.Ob(),a.Pb(47,"li"),a.pc(48,"\xe0 toi de d\xe9terminer s'ils connaissent le tien"),a.Ob(),a.Pb(49,"li"),a.pc(50,'tu dois leur faire prendre un "nom d\'ombre", un pseudo, afin que leur "vrai" nom/pr\xe9nom ne soit pas d\xe9voil\xe9'),a.Ob(),a.Pb(51,"li"),a.pc(52,"btw, pas oublier de te trouver un nom d'ombre"),a.Ob(),a.Ob(),a.Pb(53,"h3"),a.pc(54,"Le Consilium"),a.Ob(),a.Pb(55,"p"),a.pc(56,"Le consilium, c'est un peu comme le minist\xe8re de la magie dans Harry Potter."),a.Ob(),a.pc(57,"\nIl est compos\xe9 de :\n"),a.Pb(58,"ul"),a.Pb(59,"li"),a.pc(60,"1 hi\xe9rarque (le chef)"),a.Ob(),a.Pb(61,"li"),a.pc(62,"4 conseillers"),a.Ob(),a.Pb(63,"li"),a.pc(64,"ces 5 personnes sont chacun d'une voie diff\xe9rente, pour que tous soient repr\xe9sent\xe9s"),a.Ob(),a.Pb(65,"li"),a.pc(66,'5 pr\xe9v\xf4ts (1 pour chaque personne ci-dessus), qui sont les "secr\xe9taires"'),a.Ob(),a.Pb(67,"li"),a.pc(68,"des h\xe9rauts, qui sont des repr\xe9sentants du Consilium"),a.Ob(),a.Pb(69,"li"),a.pc(70,"des sentinelles, la police du Consilium, qu'on envoi venir te voir quand \xe7a va pas"),a.Ob(),a.Ob(),a.Pb(71,"h3"),a.pc(72,"La Lex Magica"),a.Ob(),a.Pb(73,"p"),a.pc(74,"C'est la loi, fond\xe9e sur l'ancien code de la grande cit\xe9 d'Atlantide."),a.Ob(),a.Pb(75,"p"),a.pc(76,'La loi la plus sacr\xe9e, est celle du "voile", le fait de cacher la magie aux humains "normaux".'),a.Ob(),a.Pb(77,"p"),a.pc(78,"A ce qu'on dit, il y aurait des punitions paradoxales imm\xe9diates lorsqu'un humain voit de la magie."),a.Ob(),a.Pb(79,"p"),a.pc(80,'Sinon le reste des lois, c\'est relativement "pas faire de la merde", "pas tuer les gens", etc...'),a.Ob(),a.Pb(81,"h3"),a.pc(82,"Le sanctuaire"),a.Ob(),a.Pb(83,"p"),a.pc(84,"C'est votre forteresse, votre hutte de sorcier, votre tour de magicien."),a.Ob(),a.Pb(85,"p"),a.pc(86,'L\xe0 o\xf9 vous exp\xe9riment\xe9s vos pouvoirs, \xe0 "moindre" risque. (y parait)'),a.Ob(),a.Pb(87,"p"),a.pc(88,"Et ca permet aussi de lancer des sorts plus facilement. (bonus de +1)"),a.Ob(),a.Pb(89,"h3"),a.pc(90,"Les mages, c'est quoi leur but ?"),a.Ob(),a.pc(91," L'Ascension\n"),a.Pb(92,"ul"),a.Pb(93,"li"),a.pc(94,'La plupart des mages ont pour objectif de faire "l\'Ascension", de transcender le corps humain pour aller vivre dans les royaumes c\xe9lestes.'),a.Ob(),a.Pb(95,"li"),a.pc(96,"Certains pensent que pour cela, il faudrait atteindre 10 en gnose, d'autres 10 en Sagesse, d'autres encore parlent d'une porte situ\xe9e dans les ruines perdues de l'Atlantide."),a.Ob(),a.Ob(),a.pc(97," L'histoire\n"),a.Pb(98,"ul"),a.Pb(99,"li"),a.pc(100,"C'est un autre but de certains mages, retrouver l'histoire perdue de la grande cit\xe9 d'Atlantide."),a.Ob(),a.Pb(101,"li"),a.pc(102,"Tr\xe8s peux de d\xe9tails restent, ou sont cach\xe9s, sur ce qu'il s'est pass\xe9 le jour de la chute de la cit\xe9."),a.Ob(),a.Ob(),a.pc(103," La puissance\n"),a.Pb(104,"ul"),a.Pb(105,"li"),a.pc(106,"Eh oui, il n'y a pas que l'argent qui peut rendre puissant, la magie ouvre beaucoup de portes..."),a.Ob(),a.Pb(107,"li"),a.pc(108,"Certaines rumeurs parlent m\xeame de \"lign\xe9es\" de mage, ou d'h\xe9ritage que l'on pourrait obtenir aupr\xe8s de certaines familles"),a.Ob(),a.Ob(),a.Pb(109,"h3"),a.pc(110,"La mana"),a.Ob(),a.pc(111," De ce que tu en sais, elle est n\xe9cessaire pour :\n"),a.Pb(112,"ul"),a.Pb(113,"li"),a.pc(114,"lancer un sort qu'on ne connait pas parfaitement (qui n'est pas une routine OU pas d'une arcane majeure)"),a.Ob(),a.Pb(115,"li"),a.pc(116,"lancer un sort qui fait des d\xe9g\xe2ts / des soins"),a.Ob(),a.Pb(117,"li"),a.pc(118,"augmenter la puissance d'un sort"),a.Ob(),a.Pb(119,"li"),a.pc(120,"att\xe9nuer les chances de paradoxe"),a.Ob(),a.Pb(121,"li"),a.pc(122,"lancer un sort de bouclier pour la journ\xe9e (ce sera utilis\xe9 tr\xe8s souvent)"),a.Ob(),a.Pb(123,"li"),a.pc(124,'les conditions ci-dessus sont toutes "cumulables" :troll:'),a.Ob(),a.Ob(),a.pc(125," Pour en regagner on peut :\n"),a.Pb(126,"ul"),a.Pb(127,"li"),a.pc(128,"faire un rituel d'1h sur une fontaine de mana (X point d'atout = X mana par jour)"),a.Ob(),a.Pb(129,"li"),a.pc(130,"choisir de d\xe9grader son corps physique pour 24h (tu n'as pas encore exp\xe9riment\xe9 cela, mais beaucoup de mages le font)"),a.Ob(),a.Pb(131,"li"),a.pc(132,"sacrifier un \xeatre vivant, mais y parait que c'est pas bien (tu n'as pas encore exp\xe9riment\xe9 cela)"),a.Ob(),a.Ob(),a.Pb(133,"h3"),a.pc(134,"Les sorts"),a.Ob(),a.pc(135," Par d\xe9faut, voil\xe0 les caract\xe9ristiques d'un sort\n"),a.Pb(136,"ul"),a.Pb(137,"li"),a.pc(138,"Puissance = 1"),a.Ob(),a.Pb(139,"li"),a.pc(140,"Nombre de cible = 1"),a.Ob(),a.Pb(141,"li"),a.pc(142,"Zone = 1m rayon/cube"),a.Ob(),a.Pb(143,"li"),a.pc(144,"Dur\xe9e = 1 tour ou 1 sc\xe8ne"),a.Ob(),a.Ob(),a.Pb(145,"p"),a.pc(146," Un mage en g\xe9n\xe9ral utilise un focalisateur pour lancer un sort, il parait que ca att\xe9nue les chances de paradoxe."),a.Nb(147,"br"),a.pc(148," Exemple : baguette magique, montre, collier, gemme, pi\xe8ce, livre\n"),a.Ob())},styles:[""]}),t})()},{path:"mage/paradox",component:(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Gb({type:t,selectors:[["app-nwod-mage-paradox"]],decls:1,vars:0,template:function(t,e){1&t&&a.pc(0,"@TODO ")},styles:[""]}),t})()},{path:"mage/:id",component:ct}];let pt=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},imports:[[o.e.forChild(ht)],o.e]}),t})(),lt=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},imports:[[r.c,pt,i.c]]}),t})()},x7I3:function(t,e,n){"use strict";function r(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}n.r(e),n.d(e,"ErrorCode",(function(){return Qn})),n.d(e,"EventType",(function(){return $n})),n.d(e,"WebChannel",(function(){return Jn})),n.d(e,"XhrIo",(function(){return Yn})),n.d(e,"createWebChannelTransport",(function(){return Xn}));var i,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=s||{},a=o||self;function u(){}function c(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function h(t){var e=c(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var l="closure_uid_"+(1e9*Math.random()>>>0),f=0;function d(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:g).apply(null,arguments)}function m(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var y=Date.now||function(){return+new Date};function v(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function x(){this.j=this.j,this.i=this.i}x.prototype.j=!1,x.prototype.da=function(){!this.j&&(this.j=!0,this.C(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,l)&&t[l]||(t[l]=++f)}(this)},x.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var _=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},w=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function O(t){return Array.prototype.concat.apply([],arguments)}function P(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function E(t){return/^[\s\xa0]*$/.test(t)}var C,M=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function T(t,e){return-1!=t.indexOf(e)}function I(t,e){return t<e?-1:t>e?1:0}t:{var N=a.navigator;if(N){var A=N.userAgent;if(A){C=A;break t}}C=""}function S(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function k(t){var e={};for(var n in t)e[n]=t[n];return e}var D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<D.length;o++)n=D[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function L(t){return L[" "](t),t}L[" "]=u;var V,q,j=T(C,"Opera"),U=T(C,"Trident")||T(C,"MSIE"),F=T(C,"Edge"),z=F||U,B=T(C,"Gecko")&&!(T(C.toLowerCase(),"webkit")&&!T(C,"Edge"))&&!(T(C,"Trident")||T(C,"MSIE"))&&!T(C,"Edge"),G=T(C.toLowerCase(),"webkit")&&!T(C,"Edge");function W(){var t=a.document;return t?t.documentMode:void 0}t:{var K="",X=(q=C,B?/rv:([^\);]+)(\)|;)/.exec(q):F?/Edge\/([\d\.]+)/.exec(q):U?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):G?/WebKit\/(\S+)/.exec(q):j?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(X&&(K=X?X[1]:""),U){var Q=W();if(null!=Q&&Q>parseFloat(K)){V=String(Q);break t}}V=K}var $={};function J(t){return function(t,e){var n=$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=M(String(V)).split("."),r=M(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=I(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||I(0==s[2].length,0==a[2].length)||I(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var Y=a.document&&U&&(W()||parseInt(V,10))||void 0,H=!U||9<=Number(Y),Z=U&&!J("9"),tt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",u,e),a.removeEventListener("test",u,e)}catch(n){}return t}();function et(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function nt(t,e){if(et.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(B){t:{try{L(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:rt[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}et.prototype.b=function(){this.defaultPrevented=!0},v(nt,et);var rt={2:"touch",3:"pen",4:"mouse"};nt.prototype.b=function(){nt.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Z)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var it="closure_listenable_"+(1e6*Math.random()|0),ot=0;function st(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++ot,this.V=this.X=!1}function at(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function ut(t){this.src=t,this.a={},this.b=0}function ct(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=_(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(at(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ht(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}ut.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ht(t,e,r,i);return-1<s?(e=t[s],n||(e.X=!1)):((e=new st(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var pt="closure_lm_"+(1e6*Math.random()|0),lt={};function ft(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=_t(r),e&&e[it]?e.sa(n,r,p(i)?!!i.capture:!!i,o):dt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ft(t,e[o],n,r,i);return null}return n=_t(n),t&&t[it]?t.ra(e,n,p(r)?!!r.capture:!!r,i):dt(t,e,n,!1,r,i)}function dt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i;if(s&&!H)return null;var a=vt(t);if(a||(t[pt]=a=new ut(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=yt,e=H?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)tt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(bt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function gt(t){if("number"!=typeof t&&t&&!t.V){var e=t.src;if(e&&e[it])ct(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(bt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vt(e))?(ct(n,t),0==n.b&&(n.src=null,e[pt]=null)):at(t)}}}function bt(t){return t in lt?lt[t]:lt[t]="on"+t}function mt(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&gt(t),n.call(r,e)}function yt(t,e){if(t.V)return!0;if(!H){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return mt(t,e=new nt(e,this))}return mt(t,new nt(e,this))}function vt(t){return(t=t[pt])instanceof ut?t:null}var xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function _t(t){return"function"==c(t)?t:(t[xt]||(t[xt]=function(e){return t.handleEvent(e)}),t[xt])}function wt(){x.call(this),this.c=new ut(this),this.J=this,this.A=null}function Ot(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.V&&s.capture==n){var a=s.listener,u=s.aa||s.src;s.X&&ct(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}v(wt,x),wt.prototype[it]=!0,(i=wt.prototype).addEventListener=function(t,e,n,r){ft(this,t,e,n,r)},i.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=p(i)?!!i.capture:!!i,r=_t(r),e&&e[it]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=ht(s=e.a[n],r,i,o))&&(at(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=vt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=ht(n,r,i,o)),(r=-1<e?n[e]:null)&&gt(r))}(this,t,e,n,r)},i.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new et(t,n);else if(t instanceof et)t.target=t.target||n;else{var i=t;R(t=new et(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=Ot(s,r,!0,t)&&i}if(i=Ot(s=t.a=n,r,!0,t)&&i,i=Ot(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Ot(s=t.a=e[o],r,!1,t)&&i;return i},i.C=function(){if(wt.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)at(n[r]);delete e.a[t],e.b--}}this.A=null},i.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},i.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Pt=a.JSON.stringify;function Et(){this.b=this.a=null}var Ct,Mt=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new It}),(function(t){t.reset()}),100);function Tt(){var t=kt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function It(){this.next=this.b=this.a=null}function Nt(t){a.setTimeout((function(){throw t}),0)}function At(t,e){Ct||function(){var t=a.Promise.resolve(void 0);Ct=function(){t.then(Dt)}}(),St||(Ct(),St=!0),kt.add(t,e)}Et.prototype.add=function(t,e){var n=Mt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},It.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},It.prototype.reset=function(){this.next=this.b=this.a=null};var St=!1,kt=new Et;function Dt(){for(var t;t=Tt();){try{t.a.call(t.b)}catch(n){Nt(n)}var e=Mt;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}St=!1}function Rt(t,e){wt.call(this),this.b=t||1,this.a=e||a,this.f=b(this.Ua,this),this.g=y()}function Lt(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Vt(t,e,n){if("function"==c(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function qt(t,e,n){x.call(this),this.f=null!=n?b(t,n):t,this.c=e,this.b=b(this.Pa,this),this.a=[]}function jt(t){t.T=Vt(t.b,t.c),t.f.apply(null,t.a)}function Ut(t){x.call(this),this.b=t,this.a={}}v(Rt,wt),(i=Rt.prototype).Z=!1,i.L=null,i.Ua=function(){if(this.Z){var t=y()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(Lt(this),this.start()))}},i.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=y())},i.C=function(){Rt.M.C.call(this),Lt(this),delete this.a},v(qt,x),(i=qt.prototype).ba=!1,i.T=null,i.Ia=function(t){this.a=arguments,this.T?this.ba=!0:jt(this)},i.C=function(){qt.M.C.call(this),this.T&&(a.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},i.Pa=function(){this.T=null,this.ba&&(this.ba=!1,jt(this))},v(Ut,x);var Ft=[];function zt(t,e,n,r){Array.isArray(n)||(n&&(Ft[0]=n.toString()),n=Ft);for(var i=0;i<n.length;i++){var o=ft(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Bt(t){S(t.a,(function(t,e){this.a.hasOwnProperty(e)&&gt(t)}),t),t.a={}}function Gt(){}Ut.prototype.C=function(){Ut.M.C.call(this),Bt(this)},Ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wt=null;function Kt(){return Wt=Wt||new wt}function Xt(t){et.call(this,"serverreachability",t)}function Qt(t){var e=Kt();e.dispatchEvent(new Xt(e,t))}function $t(t){et.call(this,"statevent",t)}function Jt(t){var e=Kt();e.dispatchEvent(new $t(e,t))}function Yt(t){et.call(this,"timingevent",t)}function Ht(t,e){if("function"!=c(t))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){t()}),e)}v(Xt,et),v($t,et),v(Yt,et);var Zt={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},te={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function ee(){}function ne(){}ee.prototype.a=null;var re,ie={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function oe(){et.call(this,"d")}function se(){et.call(this,"c")}function ae(){}function ue(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new Ut(this),this.N=ce,this.O=new Rt(t=z?125:void 0),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}v(oe,et),v(se,et),v(ae,ee),re=new ae;var ce=45e3,he={},pe={};function le(t,e,n){t.B=1,t.f=De(Te(e)),t.j=n,t.F=!0,fe(t,null)}function fe(t,e){t.s=y(),be(t),t.A=Te(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),Xe(n.b,"t",r),t.w=0,t.a=jn(t.g,t.g.w?e:null),0<t.J&&(t.D=new qt(b(t.ya,t,t.a),t.J)),zt(t.G,t.a,"readystatechange",t.Sa),e=t.m?k(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),Qt(1)}function de(t,e,n){for(var r=!0;!t.l&&t.w<n.length;){var i=ge(t,n);if(i==pe){4==e&&(t.c=4,Jt(14),r=!1);break}if(i==he){t.c=4,Jt(15),r=!1;break}_e(t,i)}4==e&&0==n.length&&(t.c=1,Jt(16),r=!1),t.b=t.b&&r,r||(xe(t),ve(t))}function ge(t,e){var n=t.w,r=e.indexOf("\n",n);return-1==r?pe:(n=Number(e.substring(n,r)),isNaN(n)?he:(r+=1)+n>e.length?pe:(e=e.substr(r,n),t.w=r+n,e))}function be(t){t.P=y()+t.N,me(t,t.N)}function me(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=Ht(b(t.Qa,t),e)}function ye(t){t.h&&(a.clearTimeout(t.h),t.h=null)}function ve(t){0==t.g.u||t.l||Dn(t.g,t)}function xe(t){ye(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,Lt(t.O),Bt(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function _e(t,e){try{var n=t.g;if(0!=n.u&&(n.a==t||tn(n.b,t)))if(n.A=t.H,!t.o&&tn(n.b,t)&&3==n.u){try{var r=n.ja.a.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.i){if(n.a){if(!(n.a.s+3e3<t.s))break t;kn(n),n.a.cancel(),n.a=null}Sn(n),Jt(18)}}else n.ia=i[1],0<n.ia-n.G&&37500>i[2]&&n.U&&0==n.m&&!n.l&&(n.l=Ht(b(n.Na,n),6e3));if(1>=Ze(n.b)&&n.O){try{n.O()}catch(g){}n.O=void 0}}else Ln(n,11)}else if((t.o||n.a==t)&&kn(n),!E(e))for(e=r=n.ja.a.parse(e),r=0;r<e.length;r++)if(n.G=(i=e[r])[0],i=i[1],2==n.u)if("c"==i[0]){n.B=i[1],n.R=i[2];var o=i[3];null!=o&&(n.oa=o);var s=i[5];null!=s&&"number"==typeof s&&0<s&&(n.D=1.5*s);var a=n,u=t.a;if(u){var c=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=a.b;!h.a&&(T(c,"spdy")||T(c,"quic")||T(c,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(en(h,h.b),h.b=null))}if(a.s){var p=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;p&&(a.ha=p,ke(a.v,a.s,p))}}n.u=3,n.c&&n.c.na();var l=t;if((a=n).ea=qn(a,a.w?a.R:null,a.P),l.o){nn(a.b,l);var f=l,d=a.D;d&&f.setTimeout(d),f.h&&(ye(f),be(f)),a.a=l}else An(a);0<n.f.length&&Mn(n)}else"stop"!=i[0]&&"close"!=i[0]||Ln(n,7);else 3==n.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Ln(n,7):Pn(n):"noop"!=i[0]&&n.c&&n.c.ma(i),n.m=0);Qt(4)}catch(g){}}function we(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)w(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(h(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Oe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Oe)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Pe(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ee(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ee(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ee(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(i=ue.prototype).setTimeout=function(t){this.N=t},i.Sa=function(t){t=t.target;var e=this.D;e&&3==xn(t)?e.Ia():this.ya(t)},i.ya=function(t){try{if(t==this.a)t:{var e=xn(this.a),n=this.a.qa(),r=this.a.S();if(!(3>e||3==e&&!z&&!this.a.Y())){this.l||4!=e||7==n||Qt(8==n||0>=r?3:2),ye(this);var i=this.a.S();this.H=i;var o=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.c=3,Jt(12),xe(this),ve(this);break t}this.o=!0,_e(this,u)}this.F?(de(this,e,o),z&&this.b&&3==e&&(zt(this.G,this.O,"tick",this.Ra),this.O.start())):_e(this,o),4==e&&xe(this),this.b&&!this.l&&(4==e?Dn(this.g,this):(this.b=!1,be(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Jt(12)):(this.c=0,Jt(13)),xe(this),ve(this)}}}catch(c){}},i.Ra=function(){if(this.a){var t=xn(this.a),e=this.a.Y();this.w<e.length&&(ye(this),de(this,t,e),this.b&&4!=t&&be(this))}},i.cancel=function(){this.l=!0,xe(this)},i.Qa=function(){this.h=null;var t=y();0<=t-this.P?(2!=this.B&&(Qt(3),Jt(17)),xe(this),this.c=2,ve(this)):me(this,this.P-t)},(i=Oe.prototype).I=function(){Pe(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},i.K=function(){return Pe(this),this.a.concat()},i.get=function(t,e){return Ee(this.b,t)?this.b[t]:e},i.set=function(t,e){Ee(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},i.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ce=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Me(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Me){this.a=void 0!==e?e:t.a,Ie(this,t.f),this.j=t.j,Ne(this,t.c),Ae(this,t.h),this.g=t.g,e=t.b;var n=new Be;n.c=e.c,e.a&&(n.a=new Oe(e.a),n.b=e.b),Se(this,n),this.i=t.i}else t&&(n=String(t).match(Ce))?(this.a=!!e,Ie(this,n[1]||"",!0),this.j=Re(n[2]||""),Ne(this,n[3]||"",!0),Ae(this,n[4]),this.g=Re(n[5]||"",!0),Se(this,n[6]||"",!0),this.i=Re(n[7]||"")):(this.a=!!e,this.b=new Be(null,this.a))}function Te(t){return new Me(t)}function Ie(t,e,n){t.f=n?Re(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ne(t,e,n){t.c=n?Re(e,!0):e}function Ae(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Se(t,e,n){e instanceof Be?(t.b=e,function(t,e){e&&!t.f&&(Ge(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(We(this,e),Xe(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Le(e,Fe)),t.b=new Be(e,t.a))}function ke(t,e,n){t.b.set(e,n)}function De(t){return ke(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^y()).toString(36)),t}function Re(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Le(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ve),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ve(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Me.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Le(e,qe,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Le(e,qe,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Le(n,"/"==n.charAt(0)?Ue:je,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Le(n,ze)),t.join("")};var qe=/[#\/\?@]/g,je=/[#\?:]/g,Ue=/[#\?]/g,Fe=/[#\?@]/g,ze=/#/g;function Be(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ge(t){t.a||(t.a=new Oe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function We(t,e){Ge(t),e=Qe(t,e),Ee(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ee((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Pe(t)))}function Ke(t,e){return Ge(t),e=Qe(t,e),Ee(t.a.b,e)}function Xe(t,e,n){We(t,e),0<n.length&&(t.c=null,t.a.set(Qe(t,e),P(n)),t.b+=n.length)}function Qe(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function $e(t,e){this.b=t,this.a=e}function Je(t){this.g=t||Ye,t=a.PerformanceNavigationTiming?0<(t=a.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(a.ca&&a.ca.ua&&a.ca.ua()&&a.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(i=Be.prototype).add=function(t,e){Ge(this),this.c=null,t=Qe(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},i.forEach=function(t,e){Ge(this),this.a.forEach((function(n,r){w(n,(function(n){t.call(e,n,r,this)}),this)}),this)},i.K=function(){Ge(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},i.I=function(t){Ge(this);var e=[];if("string"==typeof t)Ke(this,t)&&(e=O(e,this.a.get(Qe(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=O(e,t[n])}return e},i.set=function(t,e){return Ge(this),this.c=null,Ke(this,t=Qe(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},i.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},i.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.I(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Ye=10;function He(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Ze(t){return t.b?1:t.a?t.a.size:0}function tn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function en(t,e){t.a?t.a.add(e):t.b=e}function nn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function rn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null!=t.a&&0!==t.a.size){var i=t.c;try{for(var o=r(t.a.values()),s=o.next();!s.done;s=o.next())i=i.concat(s.value.i)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}return P(t.c)}function on(){}function sn(){this.a=new on}function an(t,e,n){var r=n||"";try{we(t,(function(t,n){var i=t;p(t)&&(i=Pt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function un(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Je.prototype.cancel=function(){var t,e;if(this.c=rn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=r(this.a.values()),i=n.next();!i.done;i=n.next())i.value.cancel()}catch(o){t={error:o}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},on.prototype.stringify=function(t){return a.JSON.stringify(t,void 0)},on.prototype.parse=function(t){return a.JSON.parse(t,void 0)};var cn=a.JSON.parse;function hn(t){wt.call(this),this.headers=new Oe,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=pn,this.B=this.F=!1}v(hn,wt);var pn="",ln=/^https?$/i,fn=["POST","PUT"];function dn(t){return"content-type"==t.toLowerCase()}function gn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,bn(t),yn(t)}function bn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function mn(t){if(t.b&&void 0!==s&&(!t.s[1]||4!=xn(t)||2!=t.S()))if(t.l&&4==xn(t))Vt(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==xn(t)){t.b=!1;try{var e,n=t.S();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.D).match(Ce)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}i=!ln.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var c=2<xn(t)?t.a.statusText:""}catch(h){c=""}t.f=c+" ["+t.S()+"]",bn(t)}}finally{yn(t)}}}function yn(t,e){if(t.a){vn(t);var n=t.a,r=t.s[0]?u:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function vn(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(a.clearTimeout(t.m),t.m=null)}function xn(t){return t.a?t.a.readyState:0}function _n(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return S(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ke(t,e,n))}function wn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function On(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=wn("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=wn("baseRetryDelayMs",5e3,t),this.Ga=wn("retryDelaySeedMs",1e4,t),this.Da=wn("forwardChannelMaxRetries",2,t),this.ga=wn("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new Je(t&&t.concurrentRequestLimit),this.ja=new sn,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function Pn(t){if(En(t),3==t.u){var e=t.H++,n=Te(t.v);ke(n,"SID",t.B),ke(n,"RID",e),ke(n,"TYPE","terminate"),In(t,n),(e=new ue(t,e,void 0)).B=2,e.f=De(Te(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(e.f.toString(),"")),!n&&a.Image&&((new Image).src=e.f,n=!0),n||(e.a=jn(e.g,null),e.a.$(e.f)),e.s=y(),be(e)}Vn(t)}function En(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(a.clearTimeout(t.i),t.i=null),kn(t),t.b.cancel(),t.g&&("number"==typeof t.g&&a.clearTimeout(t.g),t.g=null)}function Cn(t,e){t.f.push(new $e(t.Fa++,e)),3==t.u&&Mn(t)}function Mn(t){He(t.b)||t.g||(t.g=!0,At(t.xa,t),t.o=0)}function Tn(t,e){var n;n=e?e.W:t.H++;var r=Te(t.v);ke(r,"SID",t.B),ke(r,"RID",n),ke(r,"AID",t.G),In(t,r),t.h&&t.j&&_n(r,t.h,t.j),n=new ue(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=Nn(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),en(t.b,n),le(n,r,e)}function In(t,e){t.c&&we({},(function(t,n){ke(e,n,t)}))}function Nn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?b(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{an(h,s,"req"+c+"_")}catch(p){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function An(t){t.a||t.i||(t.J=1,At(t.wa,t),t.m=0)}function Sn(t){return!(t.a||t.i||3<=t.m||(t.J++,t.i=Ht(b(t.wa,t),Rn(t,t.m)),t.m++,0))}function kn(t){null!=t.l&&(a.clearTimeout(t.l),t.l=null)}function Dn(t,e){var n=null;if(t.a==e){kn(t),t.a=null;var r=2}else{if(!tn(t.b,e))return;n=e.i,nn(t.b,e),r=1}if(t.A=e.H,0!=t.u)if(e.b)if(1==r){n=e.j?e.j.length:0,e=y()-e.s;var i=t.o;(r=Kt()).dispatchEvent(new Yt(r,n,e,i)),Mn(t)}else An(t);else if(3==(i=e.c)||0==i&&0<t.A||!(1==r&&function(t,e){return!(Ze(t.b)>=t.b.f-(t.g?1:0)||(t.g?(t.f=e.i.concat(t.f),0):1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da)||(t.g=Ht(b(t.xa,t,e),Rn(t,t.o)),t.o++,0)))}(t,e)||2==r&&Sn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Ln(t,5);break;case 4:Ln(t,10);break;case 3:Ln(t,6);break;default:Ln(t,2)}}function Rn(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function Ln(t,e){if(2==e){var n=null;t.c&&(n=null);var r=b(t.Ta,t);n||(n=new Me("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Ie(n,"https"),De(n)),function(t,e){var n=new Gt;if(a.Image){var r=new Image;r.onload=m(un,n,r,"TestLoadImage: loaded",!0,e),r.onerror=m(un,n,r,"TestLoadImage: error",!1,e),r.onabort=m(un,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=m(un,n,r,"TestLoadImage: timeout",!1,e),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Jt(2);t.u=0,t.c&&t.c.la(e),Vn(t),En(t)}function Vn(t){t.u=0,t.A=-1,t.c&&(0==rn(t.b).length&&0==t.f.length||(t.b.c.length=0,P(t.f),t.f.length=0),t.c.ka())}function qn(t,e,n){var r=function(t){return t instanceof Me?Te(t):new Me(t,void 0)}(n);if(""!=r.c)e&&Ne(r,e+"."+r.c),Ae(r,r.h);else{var i=a.location;r=function(t,e,n,r){var i=new Me(null,void 0);return t&&Ie(i,t),e&&Ne(i,e),n&&Ae(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.N&&S(t.N,(function(t,e){ke(r,e,t)})),n=t.ha,(e=t.s)&&n&&ke(r,e,n),ke(r,"VER",t.oa),In(t,r),r}function jn(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hn(t.Ea)).F=t.w,e}function Un(){}function Fn(){if(U&&!(10<=Number(Y)))throw Error("Environmental error: no available transport.")}function zn(t,e){wt.call(this),this.a=new On(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!E(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!E(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Wn(this)}function Bn(t){oe.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Gn(){se.call(this),this.status=1}function Wn(t){this.a=t}(i=hn.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.G?this.G:re),this.a.onreadystatechange=b(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(o){return void gn(this,o)}t=n||"";var i=new Oe(this.headers);r&&we(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=dn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.K()),n=a.FormData&&t instanceof a.FormData,!(0<=_(fn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{vn(this),0<this.o&&((this.B=function(t){return U&&J(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.ta,this)):this.m=Vt(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){gn(this,o)}},i.ta=function(){void 0!==s&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},i.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),yn(this))},i.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),yn(this,!0)),hn.M.C.call(this)},i.va=function(){this.j||(this.w||this.l||this.g?mn(this):this.Oa())},i.Oa=function(){mn(this)},i.S=function(){try{return 2<xn(this)?this.a.status:-1}catch(q){return-1}},i.Y=function(){try{return this.a?this.a.responseText:""}catch(q){return""}},i.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),cn(e)}},i.qa=function(){return this.h},i.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(i=On.prototype).oa=8,i.u=1,i.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random());var e,n=new ue(this,t=this.H++,void 0),r=this.j;if(this.F&&(r?R(r=k(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Nn(this,n,e),ke(i=Te(this.v),"RID",t),ke(i,"CVER",22),this.s&&ke(i,"X-HTTP-Session-Id",this.s),In(this,i),this.h&&r&&_n(i,this.h,r),en(this.b,n),this.fa?(ke(i,"$req",e),ke(i,"SID","null"),n.R=!0,le(n,i,null)):le(n,i,e),this.u=2}}else 3==this.u&&(t?Tn(this,t):0==this.f.length||He(this.b)||Tn(this))},i.wa=function(){this.i=null,this.a=new ue(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=Te(this.ea);ke(t,"RID","rpc"),ke(t,"SID",this.B),ke(t,"CI",this.U?"0":"1"),ke(t,"AID",this.G),In(this,t),ke(t,"TYPE","xmlhttp"),this.h&&this.j&&_n(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=De(Te(t)),e.j=null,e.F=!0,fe(e,n)},i.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,Sn(this),Jt(19))},i.Ta=function(t){Jt(t?2:1)},(i=Un.prototype).na=function(){},i.ma=function(){},i.la=function(){},i.ka=function(){},i.Ha=function(){},Fn.prototype.a=function(t,e){return new zn(t,e)},v(zn,wt),(i=zn.prototype).addEventListener=function(t,e,n,r){zn.M.addEventListener.call(this,t,e,n,r)},i.removeEventListener=function(t,e,n,r){zn.M.removeEventListener.call(this,t,e,n,r)},i.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;Jt(0),t.P=e,t.N=n||{},t.U=t.W,t.v=qn(t,null,t.P),Mn(t)},i.close=function(){Pn(this.a)},i.La=function(t){if("string"==typeof t){var e={};e.__data__=t,Cn(this.a,e)}else this.g?((e={}).__data__=Pt(t),Cn(this.a,e)):Cn(this.a,t)},i.C=function(){this.a.c=null,delete this.f,Pn(this.a),delete this.a,zn.M.C.call(this)},v(Bn,oe),v(Gn,se),v(Wn,Un),Wn.prototype.na=function(){this.a.dispatchEvent("a")},Wn.prototype.ma=function(t){this.a.dispatchEvent(new Bn(t))},Wn.prototype.la=function(t){this.a.dispatchEvent(new Gn(t))},Wn.prototype.ka=function(){this.a.dispatchEvent("b")},Fn.prototype.createWebChannel=Fn.prototype.a,zn.prototype.send=zn.prototype.La,zn.prototype.open=zn.prototype.Ka,zn.prototype.close=zn.prototype.close,Zt.NO_ERROR=0,Zt.TIMEOUT=8,Zt.HTTP_ERROR=6,te.COMPLETE="complete",ne.EventType=ie,ie.OPEN="a",ie.CLOSE="b",ie.ERROR="c",ie.MESSAGE="d",wt.prototype.listen=wt.prototype.ra,hn.prototype.listenOnce=hn.prototype.sa,hn.prototype.getLastError=hn.prototype.Ma,hn.prototype.getLastErrorCode=hn.prototype.qa,hn.prototype.getStatus=hn.prototype.S,hn.prototype.getResponseJson=hn.prototype.Ja,hn.prototype.getResponseText=hn.prototype.Y,hn.prototype.send=hn.prototype.$;var Kn={createWebChannelTransport:function(){return new Fn},ErrorCode:Zt,EventType:te,WebChannel:ne,XhrIo:hn},Xn=Kn.createWebChannelTransport,Qn=Kn.ErrorCode,$n=Kn.EventType,Jn=Kn.WebChannel,Yn=Kn.XhrIo;e.default=Kn}}]);